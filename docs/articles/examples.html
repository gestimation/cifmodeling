<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Examples • cifmodeling</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Examples">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">cifmodeling</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.8.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/overview.html">Overview</a></li>
    <li><a class="dropdown-item" href="../articles/functions.html">Main functions</a></li>
    <li><a class="dropdown-item" href="../articles/polyreg.html">Direct polytomous regression</a></li>
    <li><a class="dropdown-item" href="../articles/examples.html">Examples</a></li>
    <li><a class="dropdown-item" href="../articles/information.html">Additional information</a></li>
    <li><a class="dropdown-item" href="../articles/arguments.html">Full lists of arguments</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/gestimation/cifmodeling" aria-label="GitHub repository"><span class="fa fa-github"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Examples</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/gestimation/cifmodeling/blob/HEAD/vignettes/examples.Rmd" class="external-link"><code>vignettes/examples.Rmd</code></a></small>
      <div class="d-none name"><code>examples.Rmd</code></div>
    </div>

    
    
<!-- badges: start -->
<!-- badges: end -->
<div class="section level2">
<h2 id="example-1--unadjusted-competing-risks-analysis">Example 1. Unadjusted competing risks analysis<a class="anchor" aria-label="anchor" href="#example-1--unadjusted-competing-risks-analysis"></a>
</h2>
<p>For the initial illustration, unadjusted analysis focusing on
cumulative incidence of diabetic retinopathy (event 1) and macrovascular
complications (event 2) at 8 years of follow-up is demonstrated. To
visualize each covariate separately when multiple strata are supplied,
set <code>panel.per.variable = TRUE</code>. Each variable on the
right-hand side is plotted in its own panel, and the layout can be
controlled with <code>rows.columns.panel</code>. The figure below
contrasts the cumulative incidence curves of diabetic retinopathy for
the quartiles <code>fruitq</code> and a binary exposure
<code>fruitq1</code>, low (Q1) and high (Q2 to 4) intake of fruit,
generated by <code><a href="../reference/cifplot.html">cifplot()</a></code>. The <code>add.conf=TRUE</code>
argument adds confidence intervals to the plot. This helps visualize the
statistical uncertainty of estimated probabilities across exposure
levels. When using numeric variables for stratification, discretize them
beforehand with <code><a href="https://rdrr.io/r/base/cut.html" class="external-link">cut()</a></code> or <code><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor()</a></code>. The labels
of x-axis (Time) and y-axis (Cumulative incidence) in these panels are
default labels.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">diabetes.complications</span><span class="op">)</span></span>
<span><span class="va">diabetes.complications</span><span class="op">$</span><span class="va">fruitq1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span></span>
<span>  <span class="va">diabetes.complications</span><span class="op">$</span><span class="va">fruitq</span> <span class="op">==</span> <span class="st">"Q1"</span>,<span class="st">"Q1"</span>,<span class="st">"Q2 to Q4"</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/cifplot.html">cifplot</a></span><span class="op">(</span><span class="fu"><a href="../reference/Event.html">Event</a></span><span class="op">(</span><span class="va">t</span>,<span class="va">epsilon</span><span class="op">)</span><span class="op">~</span><span class="va">fruitq</span><span class="op">+</span><span class="va">fruitq1</span>, data<span class="op">=</span><span class="va">diabetes.complications</span>, </span>
<span>        outcome.type<span class="op">=</span><span class="st">"competing-risk"</span>,</span>
<span>        add.conf<span class="op">=</span><span class="cn">TRUE</span>, add.censor.mark<span class="op">=</span><span class="cn">FALSE</span>, </span>
<span>        add.competing.risk.mark<span class="op">=</span><span class="cn">FALSE</span>, panel.per.variable<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="fig/function-example04-1-1-1.png" alt="Cumulative incidence curves per each stratification variable" width="70%"><p class="caption">
Cumulative incidence curves per each stratification variable
</p>
</div>
<p>In the second figure, censoring marks are added along each curve
(<code>add.censor.mark = TRUE</code>) to indicate individuals who were
censored before experiencing any event. These marks visualize the timing
and frequency of censoring, allowing a clearer understanding of
loss-to-censoring patterns over follow-up. Here the workflow differs
slightly from the previous code. First, we compute a survfit-compatible
object <code>output1</code> using <code><a href="../reference/cifcurve.html">cifcurve()</a></code> with
<code>outcome.type="competing-risk"</code> by calculating Aalen–Johansen
estimator stratified by <code>fruitq1</code>. Then,
<code><a href="../reference/cifplot.html">cifplot()</a></code> is used to generate the figure. The
<code>label.y</code>, <code>label.x</code> and <code>limit.x</code>
arguments are also used to customize the axis labels and limits.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">output1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/cifcurve.html">cifcurve</a></span><span class="op">(</span><span class="fu"><a href="../reference/Event.html">Event</a></span><span class="op">(</span><span class="va">t</span>,<span class="va">epsilon</span><span class="op">)</span><span class="op">~</span><span class="va">fruitq1</span>, data<span class="op">=</span><span class="va">diabetes.complications</span>, </span>
<span>                    outcome.type<span class="op">=</span><span class="st">"competing-risk"</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/cifplot.html">cifplot</a></span><span class="op">(</span><span class="va">output1</span>, add.conf<span class="op">=</span><span class="cn">FALSE</span>, add.risktable<span class="op">=</span><span class="cn">FALSE</span>, </span>
<span>        add.censor.mark<span class="op">=</span><span class="cn">TRUE</span>, add.competing.risk.mark<span class="op">=</span><span class="cn">FALSE</span>, </span>
<span>        label.y<span class="op">=</span><span class="st">"CIF of diabetic retinopathy"</span>, label.x<span class="op">=</span><span class="st">"Years from registration"</span>,</span>
<span>        limits.x<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">8</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="fig/function-example04-1-2-1.png" alt="Cumulative incidence curves with censor marks and axis labels" width="70%"><p class="caption">
Cumulative incidence curves with censor marks and axis labels
</p>
</div>
<p>Next, competing risk marks are added
(<code>add.competing.risk.mark = TRUE</code>) to indicate individuals
who experienced the competing event (macrovascular complications) before
diabetic retinopathy. The time points at which the macrovascular
complications occurred were obtained as <code>output2</code> for each
strata using a helper function <code><a href="../reference/extract_time_to_event.html">extract_time_to_event()</a></code>.
These symbols help distinguish between events due to the primary cause
and those attributable to competing causes. Note that the names of
<code>competing.risk.time</code> and
<code>intercurrent.event.time</code> must match the strata labels used
in the plot if supplied by the user.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">output2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/extract_time_to_event.html">extract_time_to_event</a></span><span class="op">(</span><span class="fu"><a href="../reference/Event.html">Event</a></span><span class="op">(</span><span class="va">t</span>,<span class="va">epsilon</span><span class="op">)</span><span class="op">~</span><span class="va">fruitq1</span>, </span>
<span>                                 data<span class="op">=</span><span class="va">diabetes.complications</span>, which_event<span class="op">=</span><span class="st">"event2"</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/cifplot.html">cifplot</a></span><span class="op">(</span><span class="va">output1</span>, add.conf<span class="op">=</span><span class="cn">FALSE</span>, add.risktable<span class="op">=</span><span class="cn">FALSE</span>, </span>
<span>        add.censor.mark<span class="op">=</span><span class="cn">FALSE</span>, add.competing.risk.mark<span class="op">=</span><span class="cn">TRUE</span>, competing.risk.time<span class="op">=</span><span class="va">output2</span>, </span>
<span>        label.y<span class="op">=</span><span class="st">"CIF of diabetic retinopathy"</span>, label.x<span class="op">=</span><span class="st">"Years from registration"</span>,</span>
<span>        limits.x<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">8</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="fig/function-example04-1-3-1.png" alt="Cumulative incidence curves with competing risk marks" width="70%"><p class="caption">
Cumulative incidence curves with competing risk marks
</p>
</div>
<p><code>label.strata</code> is another argument for customizing labels,
but when inputting a survfit object, it becomes invalid because it does
not contain stratum information. Therefore, the following code inputs
the formula and data. <code>label.strata</code> is used by combining
<code>level.strata</code> and <code>order.strata</code>.
<code>level.strata</code> specifies the levels of the stratification
variable corresponding to each label in <code>label.strata</code>. The
levels specified in <code>level.strata</code> are then displayed in the
figure in the order defined by <code>order.strata</code>. A figure
enclosed in a square was generated, which is due to
<code>style="FRAMED"</code> specification.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/cifplot.html">cifplot</a></span><span class="op">(</span><span class="fu"><a href="../reference/Event.html">Event</a></span><span class="op">(</span><span class="va">t</span>,<span class="va">epsilon</span><span class="op">)</span><span class="op">~</span><span class="va">fruitq1</span>, data<span class="op">=</span><span class="va">diabetes.complications</span>, </span>
<span>        outcome.type<span class="op">=</span><span class="st">"competing-risk"</span>, add.conf<span class="op">=</span><span class="cn">FALSE</span>, add.risktable<span class="op">=</span><span class="cn">FALSE</span>, </span>
<span>        add.estimate.table<span class="op">=</span><span class="cn">TRUE</span>, add.censor.mark<span class="op">=</span><span class="cn">FALSE</span>, add.competing.risk.mark<span class="op">=</span><span class="cn">TRUE</span>, </span>
<span>        competing.risk.time<span class="op">=</span><span class="va">output2</span>, label.y<span class="op">=</span><span class="st">"CIF of diabetic retinopathy"</span>, </span>
<span>        label.x<span class="op">=</span><span class="st">"Years from registration"</span>, limits.x<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">8</span><span class="op">)</span>,</span>
<span>        label.strata<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"High intake"</span>,<span class="st">"Low intake"</span><span class="op">)</span>, level.strata<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Q2 to Q4"</span>,<span class="st">"Q1"</span><span class="op">)</span>, </span>
<span>        order.strata<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Q1"</span>, <span class="st">"Q2 to Q4"</span><span class="op">)</span>, style<span class="op">=</span><span class="st">"FRAMED"</span><span class="op">)</span></span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="fig/function-example04-1-4-1.png" alt="Cumulative incidence curves with strata labels and FRAMED style" width="70%"><p class="caption">
Cumulative incidence curves with strata labels and FRAMED style
</p>
</div>
<p>By specifying <code>add.estimate.table=TRUE</code>, the risks of
diabetic retinopathy (estimates for CIFs) along with their confidence
interval are shown in the table at the bottom of the figure The risk
ratios at a specific time point (e.g. 8 years) for competing events can
be jointly and coherently estimated using <code><a href="../reference/polyreg.html">polyreg()</a></code> with
<code>outcome.type="competing-risk"</code>. In the code of
<code><a href="../reference/polyreg.html">polyreg()</a></code> below, no covariates are included in the nuisance
model (<code>~1</code> specifies intercept only). The effect of low
fruit intake <code>fruitq1</code> is estimated as an unadjusted risk
ratio (<code>effect.measure1="RR"</code>) for diabetic retinopathy
(event 1) and macrovascular complications (event 2) at 8 years
(<code>time.point=8</code>).</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">output3</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/polyreg.html">polyreg</a></span><span class="op">(</span>nuisance.model<span class="op">=</span><span class="fu"><a href="../reference/Event.html">Event</a></span><span class="op">(</span><span class="va">t</span>,<span class="va">epsilon</span><span class="op">)</span><span class="op">~</span><span class="fl">1</span>, exposure<span class="op">=</span><span class="st">"fruitq1"</span>, </span>
<span>          data<span class="op">=</span><span class="va">diabetes.complications</span>, effect.measure1<span class="op">=</span><span class="st">"RR"</span>, effect.measure2<span class="op">=</span><span class="st">"RR"</span>, </span>
<span>          time.point<span class="op">=</span><span class="fl">8</span>, outcome.type<span class="op">=</span><span class="st">"competing-risk"</span>, </span>
<span>          report.nuisance.parameter<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">output3</span><span class="op">$</span><span class="va">coefficient</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] -1.38313159 -0.30043942 -3.99147406 -0.07582595</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">output3</span><span class="op">$</span><span class="va">cov</span><span class="op">)</span></span>
<span><span class="co">#&gt;              [,1]         [,2]         [,3]         [,4]</span></span>
<span><span class="co">#&gt; [1,]  0.017018160 -0.012351309  0.009609321 -0.008372500</span></span>
<span><span class="co">#&gt; [2,] -0.012351309  0.012789187 -0.006012254  0.006540183</span></span>
<span><span class="co">#&gt; [3,]  0.009609321 -0.006012254  0.048161715 -0.044070501</span></span>
<span><span class="co">#&gt; [4,] -0.008372500  0.006540183 -0.044070501  0.055992232</span></span></code></pre></div>
<p>The summaries of analysis results in the list of outputs
(e.g. <code>output3$summary</code> below) are compatible with the
<code>modelsummary</code> ecosystem, which makes it easy to create
publication-ready tables in a variety of formats. A typical workflow is
to pass the <code>summary</code> element of a <code><a href="../reference/polyreg.html">polyreg()</a></code> fit
(or a list of such fits) to <code><a href="https://modelsummary.com/man/msummary.html" class="external-link">modelsummary::msummary()</a></code>. In
this case, all regression coefficients are included in summary by
setting <code>report.nuisance.parameter = TRUE</code>. Model summaries
can also be exponentiated to display risk ratios, odds ratios, or
subdistribution hazard ratios using <code>exponentiate</code> option.
The summaries can be displayed in the Viewer with customized statistics
such as p-values or confidence intervals.</p>
</div>
<div class="section level2">
<h2 id="example-2--survival-analysis">Example 2. Survival analysis<a class="anchor" aria-label="anchor" href="#example-2--survival-analysis"></a>
</h2>
<p>The second example is time to first event analysis
(<code>outcome.type="survival"</code>) to estimate the effect on the
risk of diabetic retinopathy or macrovascular complications at 8 years.
In the code below, <code><a href="../reference/cifplot.html">cifplot()</a></code> is directly used to generate a
survfit-compatible object internally and plot it.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">diabetes.complications</span><span class="op">$</span><span class="va">d</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">as.integer</a></span><span class="op">(</span><span class="va">diabetes.complications</span><span class="op">$</span><span class="va">epsilon</span><span class="op">&gt;</span><span class="fl">0</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/cifplot.html">cifplot</a></span><span class="op">(</span><span class="fu"><a href="../reference/Event.html">Event</a></span><span class="op">(</span><span class="va">t</span>,<span class="va">d</span><span class="op">)</span> <span class="op">~</span> <span class="va">fruitq1</span>, data<span class="op">=</span><span class="va">diabetes.complications</span>, </span>
<span>outcome.type<span class="op">=</span><span class="st">"survival"</span>, add.conf<span class="op">=</span><span class="cn">TRUE</span>, add.censor.mark<span class="op">=</span><span class="cn">FALSE</span>, </span>
<span>add.competing.risk.mark<span class="op">=</span><span class="cn">FALSE</span>, label.y<span class="op">=</span><span class="st">"Survival probability"</span>, </span>
<span>label.x<span class="op">=</span><span class="st">"Years from registration"</span>, label.strata<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"High intake"</span>,<span class="st">"Low intake"</span><span class="op">)</span>,</span>
<span>level.strata<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Q2 to Q4"</span>,<span class="st">"Q1"</span><span class="op">)</span>, order.strata<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Q1"</span>, <span class="st">"Q2 to Q4"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="fig/function-example04-2-1-1.png" alt="Survival curves from cifplot()" width="70%"><p class="caption">
Survival curves from cifplot()
</p>
</div>
<p>The code below specifies the Richardson model on the risk of diabetic
retinopathy or macrovascular complications at 8 years
(outcome.type=“survival”). Dependent censoring is adjusted by stratified
IPCW method (<code>strata='strata'</code>). Estimates other than the
effects of exposure (e.g. intercept) are suppressed when
<code>report.nuisance.parameter</code> is not specified.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">output4</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/polyreg.html">polyreg</a></span><span class="op">(</span>nuisance.model<span class="op">=</span><span class="fu"><a href="../reference/Event.html">Event</a></span><span class="op">(</span><span class="va">t</span>,<span class="va">d</span><span class="op">)</span><span class="op">~</span><span class="fl">1</span>, </span>
<span>          exposure<span class="op">=</span><span class="st">"fruitq1"</span>, strata<span class="op">=</span><span class="st">"strata"</span>, data<span class="op">=</span><span class="va">diabetes.complications</span>,</span>
<span>          effect.measure1<span class="op">=</span><span class="st">"RR"</span>, time.point<span class="op">=</span><span class="fl">8</span>, outcome.type<span class="op">=</span><span class="st">"survival"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="example-3--adjusted-competing-risks-analysis">Example 3. Adjusted competing risks analysis<a class="anchor" aria-label="anchor" href="#example-3--adjusted-competing-risks-analysis"></a>
</h2>
<p>The code below specifies polytomous log-odds models of both of
competing events (<code>outcome.type="competing-risk"</code>). Here 15
covariates and censoring strata are specified in
<code>nuisance.model=</code> and <code>strata=</code>, respectively.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">output5</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/polyreg.html">polyreg</a></span><span class="op">(</span>nuisance.model<span class="op">=</span><span class="fu"><a href="../reference/Event.html">Event</a></span><span class="op">(</span><span class="va">t</span>,<span class="va">epsilon</span><span class="op">)</span><span class="op">~</span><span class="va">age</span><span class="op">+</span><span class="va">sex</span><span class="op">+</span><span class="va">bmi</span><span class="op">+</span><span class="va">hba1c</span></span>
<span>          <span class="op">+</span><span class="va">diabetes_duration</span><span class="op">+</span><span class="va">drug_oha</span><span class="op">+</span><span class="va">drug_insulin</span><span class="op">+</span><span class="va">sbp</span><span class="op">+</span><span class="va">ldl</span><span class="op">+</span><span class="va">hdl</span><span class="op">+</span><span class="va">tg</span></span>
<span>          <span class="op">+</span><span class="va">current_smoker</span><span class="op">+</span><span class="va">alcohol_drinker</span><span class="op">+</span><span class="va">ltpa</span>, </span>
<span>          exposure<span class="op">=</span><span class="st">"fruitq1"</span>, strata<span class="op">=</span><span class="st">"strata"</span>, data<span class="op">=</span><span class="va">diabetes.complications</span>,</span>
<span>          effect.measure1<span class="op">=</span><span class="st">"RR"</span>, time.point<span class="op">=</span><span class="fl">8</span>, outcome.type<span class="op">=</span><span class="st">"competing-risk"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="example-4--description-of-cumulative-incidence-of-competing-events">Example 4. Description of cumulative incidence of competing
events<a class="anchor" aria-label="anchor" href="#example-4--description-of-cumulative-incidence-of-competing-events"></a>
</h2>
<p><code><a href="../reference/cifpanel.html">cifpanel()</a></code> arranges multiple survival and CIF plots into
a single, polished layout with a shared legend. It’s designed for
side-by-side comparisons—e.g., event 1 vs event 2, different groupings,
or different y-scales—while keeping axis ranges and styles consistent.
Internally each panel is produced using the same engine as
<code><a href="../reference/cifcurve.html">cifcurve()</a></code>, and you can supply scalar arguments (applied to
all panels) or lists to control each panel independently.</p>
<p>This function accepts both shared and panel-specific arguments. When
a single formula is provided, the same model structure is reused for
each panel, and arguments supplied as lists are applied individually to
each panel. Arguments such as <code>code.events</code>,
<code>label.strata</code>, or <code>add.censor.mark</code> can be given
as lists, where each list element corresponds to one panel. This allows
flexible configuration while maintaining a concise and readable
syntax.</p>
<p>The example below creates a 1×2 panel
(<code>rows.columns.panel = c(1,2)</code>) comparing the cumulative
incidence of two competing events in the same cohort, namely CIF of
diabetic retinopathy in the left panel and CIF of macrovascular
complications in the right panel. Both panels are stratified by
<code>fruitq1</code>, and the legend is shared at the bottom. The pairs
of <code>code.events</code> as a list instructs <code><a href="../reference/cifpanel.html">cifpanel()</a></code>
to display event 1 in the first panel and event 2 in the second panel,
with event code 0 representing censoring.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">output6</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/cifpanel.html">cifpanel</a></span><span class="op">(</span></span>
<span> rows.columns.panel <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span><span class="op">)</span>,</span>
<span> formula            <span class="op">=</span> <span class="fu"><a href="../reference/Event.html">Event</a></span><span class="op">(</span><span class="va">t</span>, <span class="va">epsilon</span><span class="op">)</span> <span class="op">~</span> <span class="va">fruitq1</span>,</span>
<span> data               <span class="op">=</span> <span class="va">diabetes.complications</span>,</span>
<span> outcome.type       <span class="op">=</span> <span class="st">"competing-risk"</span>,</span>
<span> code.events        <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span>,<span class="fl">0</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>,<span class="fl">1</span>,<span class="fl">0</span><span class="op">)</span><span class="op">)</span>,</span>
<span> label.y            <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"CIF of diabetic retinopathy"</span>, <span class="st">"CIF of macrovascular complications"</span><span class="op">)</span>,</span>
<span> label.x            <span class="op">=</span> <span class="st">"Years from registration"</span>,</span>
<span> label.strata       <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"High intake"</span>,<span class="st">"Low intake"</span><span class="op">)</span><span class="op">)</span>,</span>
<span> title.plot         <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Diabetic retinopathy"</span>, <span class="st">"Macrovascular complications"</span><span class="op">)</span>,</span>
<span> legend.position    <span class="op">=</span> <span class="st">"bottom"</span>,</span>
<span> legend.collect     <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">output6</span><span class="op">)</span></span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="fig/function-example04-4-1.png" alt="Cumulative incidence curves for event 1 vs event 2 using cifpanel()" width="70%"><p class="caption">
Cumulative incidence curves for event 1 vs event 2 using cifpanel()
</p>
</div>
<p>Arguments specified as scalars (for example,
<code>label.x = "Years from registration"</code>) are applied uniformly
to all panels. Character vectors of the same length as the number of
panels (for example,
<code>label.y = c("Diabetic retinopathy", "Macrovascular complications")</code>)
assign a different label to each panel in order. Lists provide the most
flexibility, allowing each panel to have distinct settings that mirror
the arguments of <code><a href="../reference/cifcurve.html">cifcurve()</a></code>.</p>
<p>The <code>legend.collect = TRUE</code> option merges legends from all
panels into a single shared legend, positioned according to
<code>legend.position</code>. The arguments <code>title.panel</code>,
<code>subtitle.panel</code>, <code>caption.panel</code>, and
<code>title.plot</code> control the overall panel title and individual
subplot titles, ensuring that multi-panel layouts remain consistent and
publication-ready.</p>
</div>
<div class="section level2">
<h2 id="example-5--plot-customization">Example 5. Plot customization<a class="anchor" aria-label="anchor" href="#example-5--plot-customization"></a>
</h2>
<div class="section level3">
<h3 id="default">Default<a class="anchor" aria-label="anchor" href="#default"></a>
</h3>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">diabetes.complications</span><span class="op">)</span></span>
<span><span class="va">diabetes.complications</span><span class="op">$</span><span class="va">d</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">as.integer</a></span><span class="op">(</span><span class="va">diabetes.complications</span><span class="op">$</span><span class="va">epsilon</span><span class="op">&gt;</span><span class="fl">0</span><span class="op">)</span></span>
<span><span class="va">diabetes.complications</span><span class="op">$</span><span class="va">fruitq1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span></span>
<span>  <span class="va">diabetes.complications</span><span class="op">$</span><span class="va">fruitq</span> <span class="op">==</span> <span class="st">"Q1"</span>,<span class="st">"Q1"</span>,<span class="st">"Q2 to Q4"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Default</span></span>
<span><span class="fu"><a href="../reference/cifplot.html">cifplot</a></span><span class="op">(</span><span class="fu"><a href="../reference/Event.html">Event</a></span><span class="op">(</span><span class="va">t</span>,<span class="va">epsilon</span><span class="op">)</span> <span class="op">~</span> <span class="va">fruitq1</span>,</span>
<span>        data                    <span class="op">=</span> <span class="va">diabetes.complications</span>,</span>
<span>        outcome.type            <span class="op">=</span> <span class="st">"competing-risk"</span><span class="op">)</span></span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="fig/function-example04-5-01-1.png" alt="Default of cifplot()" width="70%"><p class="caption">
Default of cifplot()
</p>
</div>
</div>
<div class="section level3">
<h3 id="visual-elements">Visual elements<a class="anchor" aria-label="anchor" href="#visual-elements"></a>
</h3>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Hide confidence interval, risk table, and censor marks</span></span>
<span><span class="fu"><a href="../reference/cifplot.html">cifplot</a></span><span class="op">(</span><span class="fu"><a href="../reference/Event.html">Event</a></span><span class="op">(</span><span class="va">t</span>,<span class="va">epsilon</span><span class="op">)</span> <span class="op">~</span> <span class="va">fruitq1</span>,</span>
<span>        data                    <span class="op">=</span> <span class="va">diabetes.complications</span>,</span>
<span>        outcome.type            <span class="op">=</span> <span class="st">"competing-risk"</span>,</span>
<span>        add.conf                <span class="op">=</span> <span class="cn">FALSE</span>, </span>
<span>        add.risktable           <span class="op">=</span> <span class="cn">FALSE</span>, </span>
<span>        add.censor.mark         <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="fig/function-example04-5-02-1.png" alt="Hide confidence interval, risk table, and censor marks" width="70%"><p class="caption">
Hide confidence interval, risk table, and censor marks
</p>
</div>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Add a table of CIF estimates and event-2 time marks</span></span>
<span><span class="fu"><a href="../reference/cifplot.html">cifplot</a></span><span class="op">(</span><span class="fu"><a href="../reference/Event.html">Event</a></span><span class="op">(</span><span class="va">t</span>,<span class="va">epsilon</span><span class="op">)</span> <span class="op">~</span> <span class="va">fruitq1</span>,</span>
<span>        data                    <span class="op">=</span> <span class="va">diabetes.complications</span>,</span>
<span>        outcome.type            <span class="op">=</span> <span class="st">"competing-risk"</span>,</span>
<span>        add.risktable           <span class="op">=</span> <span class="cn">FALSE</span>, </span>
<span>        add.estimate.table      <span class="op">=</span> <span class="cn">TRUE</span>, </span>
<span>        add.censor.mark         <span class="op">=</span> <span class="cn">FALSE</span>, </span>
<span>        add.competing.risk.mark <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="fig/function-example04-5-03-1.png" alt="Add a table of CIF estimates and event-2 time marks" width="70%"><p class="caption">
Add a table of CIF estimates and event-2 time marks
</p>
</div>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Extract event-2 time from data frame</span></span>
<span><span class="va">time_to_event</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/extract_time_to_event.html">extract_time_to_event</a></span><span class="op">(</span><span class="fu"><a href="../reference/Event.html">Event</a></span><span class="op">(</span><span class="va">t</span>, <span class="va">epsilon</span><span class="op">)</span> <span class="op">~</span> <span class="va">fruitq1</span>,</span>
<span>                                       data <span class="op">=</span> <span class="va">diabetes.complications</span>, which_event <span class="op">=</span> <span class="st">"event2"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Ensure named list by strata</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/stopifnot.html" class="external-link">stopifnot</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">is.list</a></span><span class="op">(</span><span class="va">time_to_event</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">time_to_event</span><span class="op">)</span> <span class="op">&gt;</span> <span class="fl">0</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Add event-2 time marks using external event-2 time </span></span>
<span><span class="fu"><a href="../reference/cifplot.html">cifplot</a></span><span class="op">(</span><span class="fu"><a href="../reference/Event.html">Event</a></span><span class="op">(</span><span class="va">t</span>, <span class="va">epsilon</span><span class="op">)</span> <span class="op">~</span> <span class="va">fruitq1</span>,</span>
<span>        data                    <span class="op">=</span> <span class="va">diabetes.complications</span>,</span>
<span>        outcome.type            <span class="op">=</span> <span class="st">"competing-risk"</span>,</span>
<span>        add.risktable           <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>        add.estimate.table      <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>        add.censor.mark         <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>        add.competing.risk.mark <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>        competing.risk.time     <span class="op">=</span> <span class="va">time_to_event</span><span class="op">)</span></span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="fig/function-example04-5-04-1.png" alt="Add event-2 time marks using external event-2 time" width="70%"><p class="caption">
Add event-2 time marks using external event-2 time
</p>
</div>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Use (open) circle for strata in estimate table and event-2 time marks </span></span>
<span><span class="fu"><a href="../reference/cifplot.html">cifplot</a></span><span class="op">(</span><span class="fu"><a href="../reference/Event.html">Event</a></span><span class="op">(</span><span class="va">t</span>, <span class="va">epsilon</span><span class="op">)</span> <span class="op">~</span> <span class="va">fruitq1</span>,</span>
<span>        data                      <span class="op">=</span> <span class="va">diabetes.complications</span>,</span>
<span>        outcome.type              <span class="op">=</span> <span class="st">"competing-risk"</span>,</span>
<span>        add.risktable             <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>        add.estimate.table        <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>        symbol.risk.table         <span class="op">=</span> <span class="st">"circle"</span>, </span>
<span>        add.censor.mark           <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>        add.competing.risk.mark   <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>        shape.competing.risk.mark <span class="op">=</span> <span class="fl">1</span>,</span>
<span>        size.competing.risk.mark  <span class="op">=</span> <span class="fl">4</span>,</span>
<span>        competing.risk.time       <span class="op">=</span> <span class="va">time_to_event</span><span class="op">)</span></span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="fig/function-example04-5-05-1.png" alt="Use (open) circle for strata in estimate table and event-2 time marks" width="70%"><p class="caption">
Use (open) circle for strata in estimate table and event-2 time marks
</p>
</div>
</div>
<div class="section level3">
<h3 id="font-style-and-palette">Font, style and palette<a class="anchor" aria-label="anchor" href="#font-style-and-palette"></a>
</h3>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Adjust font size</span></span>
<span><span class="fu"><a href="../reference/cifplot.html">cifplot</a></span><span class="op">(</span><span class="fu"><a href="../reference/Event.html">Event</a></span><span class="op">(</span><span class="va">t</span>,<span class="va">epsilon</span><span class="op">)</span> <span class="op">~</span> <span class="va">fruitq</span>,</span>
<span>        data                      <span class="op">=</span> <span class="va">diabetes.complications</span>,</span>
<span>        outcome.type              <span class="op">=</span> <span class="st">"competing-risk"</span>,</span>
<span>        add.conf                  <span class="op">=</span> <span class="cn">FALSE</span>, </span>
<span>        font.size                 <span class="op">=</span> <span class="fl">16</span>, </span>
<span>        font.size.risk.table      <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="fig/function-example04-5-06-1.png" alt="Adjust font size" width="70%"><p class="caption">
Adjust font size
</p>
</div>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Select font family, style, linewidth and palette</span></span>
<span><span class="fu"><a href="../reference/cifplot.html">cifplot</a></span><span class="op">(</span><span class="fu"><a href="../reference/Event.html">Event</a></span><span class="op">(</span><span class="va">t</span>,<span class="va">epsilon</span><span class="op">)</span> <span class="op">~</span> <span class="va">fruitq</span>,</span>
<span>        data                      <span class="op">=</span> <span class="va">diabetes.complications</span>,</span>
<span>        outcome.type              <span class="op">=</span> <span class="st">"competing-risk"</span>,</span>
<span>        add.conf                  <span class="op">=</span> <span class="cn">FALSE</span>, </span>
<span>        style                     <span class="op">=</span> <span class="st">"bold"</span>, </span>
<span>        font.family               <span class="op">=</span> <span class="st">"serif"</span>, </span>
<span>        palette                   <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"blue1"</span>, <span class="st">"cyan3"</span>, <span class="st">"navy"</span>, <span class="st">"deepskyblue3"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="fig/function-example04-5-07-1.png" alt="Select font family, style, linewidth and palette" width="70%"><p class="caption">
Select font family, style, linewidth and palette
</p>
</div>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/cifplot.html">cifplot</a></span><span class="op">(</span><span class="fu"><a href="../reference/Event.html">Event</a></span><span class="op">(</span><span class="va">t</span>,<span class="va">epsilon</span><span class="op">)</span> <span class="op">~</span> <span class="va">fruitq</span>,</span>
<span>        data                      <span class="op">=</span> <span class="va">diabetes.complications</span>,</span>
<span>        outcome.type              <span class="op">=</span> <span class="st">"competing-risk"</span>,</span>
<span>        add.conf <span class="op">=</span> <span class="cn">FALSE</span>, </span>
<span>        style                     <span class="op">=</span> <span class="st">"framed"</span>, </span>
<span>        font.family               <span class="op">=</span> <span class="st">"serif"</span>, </span>
<span>        linewidth                 <span class="op">=</span> <span class="fl">1.3</span>, </span>
<span>        linetype                  <span class="op">=</span> <span class="cn">TRUE</span>, </span>
<span>        palette                   <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"azure4"</span>, <span class="st">"gray"</span>, <span class="st">"black"</span>, <span class="st">"darkgray"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="fig/function-example04-5-07-2.png" alt="Select font family, style, linewidth and palette" width="70%"><p class="caption">
Select font family, style, linewidth and palette
</p>
</div>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/cifplot.html">cifplot</a></span><span class="op">(</span><span class="fu"><a href="../reference/Event.html">Event</a></span><span class="op">(</span><span class="va">t</span>,<span class="va">epsilon</span><span class="op">)</span> <span class="op">~</span> <span class="va">fruitq</span>,</span>
<span>        data                      <span class="op">=</span> <span class="va">diabetes.complications</span>,</span>
<span>        outcome.type              <span class="op">=</span> <span class="st">"competing-risk"</span>,</span>
<span>        add.conf                  <span class="op">=</span> <span class="cn">FALSE</span>, </span>
<span>        style                     <span class="op">=</span> <span class="st">"gray"</span>, </span>
<span>        font.family               <span class="op">=</span> <span class="st">"mono"</span>, </span>
<span>        palette                   <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"cyan3"</span>, <span class="st">"deepskyblue4"</span>, <span class="st">"darkseagreen2"</span>, <span class="st">"deepskyblue3"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="fig/function-example04-5-07-3.png" alt="Select font family, style, linewidth and palette" width="70%"><p class="caption">
Select font family, style, linewidth and palette
</p>
</div>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/cifplot.html">cifplot</a></span><span class="op">(</span><span class="fu"><a href="../reference/Event.html">Event</a></span><span class="op">(</span><span class="va">t</span>,<span class="va">epsilon</span><span class="op">)</span> <span class="op">~</span> <span class="va">fruitq</span>,</span>
<span>        data                      <span class="op">=</span> <span class="va">diabetes.complications</span>,</span>
<span>        outcome.type              <span class="op">=</span> <span class="st">"competing-risk"</span>,</span>
<span>        add.conf                  <span class="op">=</span> <span class="cn">FALSE</span>, </span>
<span>        style                     <span class="op">=</span> <span class="st">"ggsurvfit"</span>, </span>
<span>        font.family               <span class="op">=</span> <span class="st">"mono"</span>, </span>
<span>        palette                   <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"brown"</span>, <span class="st">"orange"</span>, <span class="st">"purple"</span>, <span class="st">"darkgoldenrod"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="fig/function-example04-5-07-4.png" alt="Select font family, style, linewidth and palette" width="70%"><p class="caption">
Select font family, style, linewidth and palette
</p>
</div>
</div>
<div class="section level3">
<h3 id="axis-and-label">Axis and label<a class="anchor" aria-label="anchor" href="#axis-and-label"></a>
</h3>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Customize labels with explicit level mapping (safe against factor order)</span></span>
<span><span class="fu"><a href="../reference/cifplot.html">cifplot</a></span><span class="op">(</span><span class="fu"><a href="../reference/Event.html">Event</a></span><span class="op">(</span><span class="va">t</span>,<span class="va">d</span><span class="op">)</span> <span class="op">~</span> <span class="va">fruitq1</span>,</span>
<span>        data                      <span class="op">=</span> <span class="va">diabetes.complications</span>,</span>
<span>        outcome.type              <span class="op">=</span> <span class="st">"survival"</span>,</span>
<span>        label.y                   <span class="op">=</span> <span class="st">"Survival (no complications)"</span>,</span>
<span>        label.x                   <span class="op">=</span> <span class="st">"Years from registration"</span>,</span>
<span>        label.strata              <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"High intake"</span>,<span class="st">"Low intake"</span><span class="op">)</span>, </span>
<span>        level.strata              <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Q2 to Q4"</span>,<span class="st">"Q1"</span><span class="op">)</span>, </span>
<span>        order.strata              <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Q1"</span>, <span class="st">"Q2 to Q4"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="fig/function-example04-5-08-1.png" alt="Customize labels with explicit level mapping (safe against factor order)" width="70%"><p class="caption">
Customize labels with explicit level mapping (safe against factor order)
</p>
</div>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Plot 1 - survival and set axis limits</span></span>
<span><span class="fu"><a href="../reference/cifplot.html">cifplot</a></span><span class="op">(</span><span class="fu"><a href="../reference/Event.html">Event</a></span><span class="op">(</span><span class="va">t</span>,<span class="va">d</span><span class="op">)</span> <span class="op">~</span> <span class="va">fruitq1</span>,</span>
<span>        data                      <span class="op">=</span> <span class="va">diabetes.complications</span>,</span>
<span>        outcome.type              <span class="op">=</span> <span class="st">"survival"</span>,</span>
<span>        label.y                   <span class="op">=</span> <span class="st">"Risk of diabetes complications"</span>,</span>
<span>        label.x                   <span class="op">=</span> <span class="st">"Years from registration"</span>,</span>
<span>        label.strata              <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"High intake"</span>,<span class="st">"Low intake"</span><span class="op">)</span>, </span>
<span>        level.strata              <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Q2 to Q4"</span>,<span class="st">"Q1"</span><span class="op">)</span>, </span>
<span>        order.strata              <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Q1"</span>, <span class="st">"Q2 to Q4"</span><span class="op">)</span>,</span>
<span>        type.y                    <span class="op">=</span> <span class="st">"risk"</span>,</span>
<span>        limits.y                  <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0.5</span><span class="op">)</span>,</span>
<span>        breaks.y                  <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0.5</span>, by<span class="op">=</span><span class="fl">0.1</span><span class="op">)</span>,</span>
<span>        limits.x                  <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">8</span><span class="op">)</span>,</span>
<span>        breaks.x                  <span class="op">=</span> <span class="fl">0</span><span class="op">:</span><span class="fl">8</span>,</span>
<span>        use.coord.cartesian       <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> </span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="fig/function-example04-5-09-1.png" alt="Plot 1 - survival and set axis limits" width="70%"><p class="caption">
Plot 1 - survival and set axis limits
</p>
</div>
</div>
<div class="section level3">
<h3 id="panel-mode">Panel mode<a class="anchor" aria-label="anchor" href="#panel-mode"></a>
</h3>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Cumulative incidence curves per each stratification variable</span></span>
<span><span class="fu"><a href="../reference/cifplot.html">cifplot</a></span><span class="op">(</span><span class="fu"><a href="../reference/Event.html">Event</a></span><span class="op">(</span><span class="va">t</span>,<span class="va">epsilon</span><span class="op">)</span> <span class="op">~</span> <span class="va">fruitq</span> <span class="op">+</span> <span class="va">fruitq1</span>,</span>
<span>        data                      <span class="op">=</span> <span class="va">diabetes.complications</span>,</span>
<span>        outcome.type              <span class="op">=</span> <span class="st">"competing-risk"</span>,</span>
<span>        panel.per.variable        <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="fig/function-example04-5-10-1.png" alt="Cumulative incidence curves per each stratification variable" width="70%"><p class="caption">
Cumulative incidence curves per each stratification variable
</p>
</div>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Cumulative incidence curves for event 1 vs event 2</span></span>
<span><span class="fu"><a href="../reference/cifplot.html">cifplot</a></span><span class="op">(</span><span class="fu"><a href="../reference/Event.html">Event</a></span><span class="op">(</span><span class="va">t</span>,<span class="va">epsilon</span><span class="op">)</span> <span class="op">~</span> <span class="va">fruitq1</span>,</span>
<span>        data                      <span class="op">=</span> <span class="va">diabetes.complications</span>,</span>
<span>        outcome.type              <span class="op">=</span> <span class="st">"competing-risk"</span>,</span>
<span>        panel.per.event           <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="fig/function-example04-5-11-1.png" alt="Cumulative incidence curves for event 1 vs event 2" width="70%"><p class="caption">
Cumulative incidence curves for event 1 vs event 2
</p>
</div>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Survival curves for event vs censoring</span></span>
<span><span class="fu"><a href="../reference/cifplot.html">cifplot</a></span><span class="op">(</span><span class="fu"><a href="../reference/Event.html">Event</a></span><span class="op">(</span><span class="va">t</span>,<span class="va">d</span><span class="op">)</span> <span class="op">~</span> <span class="va">fruitq1</span>,</span>
<span>        data                      <span class="op">=</span> <span class="va">diabetes.complications</span>,</span>
<span>        outcome.type              <span class="op">=</span> <span class="st">"survival"</span>,</span>
<span>        panel.censoring           <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="fig/function-example04-5-12-1.png" alt="Survival curves for event vs censoring" width="70%"><p class="caption">
Survival curves for event vs censoring
</p>
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Shiro Tanaka.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
