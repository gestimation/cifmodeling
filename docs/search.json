[{"path":"https://gestimation.github.io/cifmodeling/articles/arguments.html","id":"cifcurve","dir":"Articles","previous_headings":"","what":"cifcurve()","title":"Full lists of arguments","text":"formula model formula specifying time--event outcome left-hand side (typically Event(time, status) survival::Surv(time, status)) , optionally, stratification variable right-hand side. Unlike cifplot(), function accept fitted survfit object. data data frame containing variables formula. weights Optional name weight variable data. Weights must nonnegative. subset.condition Optional character expression subset data analysis. na.action function specifying action take missing values. default na.omit. outcome.type Character string specifying type time--event outcome. One \"survival\" (Kaplan–Meier) \"competing-risk\" (Aalen–Johansen). NULL (default), function automatically infers outcome type data: event variable two unique levels, \"competing-risk\" assumed; otherwise, \"survival\" used. can also use abbreviations \"S\" \"C\". Mixed ambiguous inputs (e.g., c(\"S\", \"C\")) trigger automatic detection based event coding data. code.event1 Integer code event interest (default 1). code.event2 Integer code competing event (default 2). code.censoring Integer code censoring (default 0). error Character specifying method standard error confidence intervals used internally. \"greenwood\" (default), \"tsiatis\" \"\" \"survival\", \"delta\" (default), \"aalen\" \"\" \"competing-risk\"). conf.type Character specifying method transformation confidence intervals used internally (default \"arcsine-square root\"). conf.int numeric two-sided confidence level (default 0.95). return_if Logical. TRUE engine = \"calculateAJ_Rcpp\", influence function also computed returned (default FALSE). report.survfit.std.err Logical. TRUE, report SE log-survival scale (survfit’s convention). Otherwise SE probability scale. engine Character. One \"auto\", \"calculateKM\", \"calculateAJ_Rcpp\" (default \"calculateAJ_Rcpp\"). prob.bound Numeric lower bound used internally truncate probabilities away 0 1 (default 1e-7).","code":""},{"path":"https://gestimation.github.io/cifmodeling/articles/arguments.html","id":"cifplot","dir":"Articles","previous_headings":"","what":"cifplot()","title":"Full lists of arguments","text":"formula_or_fit model formula survfit object. Note: formula supplied, left-hand side must Event(time, status) survival::Surv(time, status). data data frame containing variables formula. weights Optional name weight variable data. Weights must nonnegative. subset.condition Optional character expression subset data analysis. na.action function specifying action take missing values. default na.omit. outcome.type Character string specifying type time--event outcome. One \"survival\" (Kaplan–Meier type) \"competing-risk\" (Aalen–Johansen type). NULL (default), function automatically infers outcome type data: event variable two unique levels, \"competing-risk\" assumed; otherwise, \"survival\" used. can also use abbreviations \"S\" \"C\". Mixed ambiguous inputs (e.g., c(\"S\", \"C\")) trigger automatic detection based event coding data. code.event1 Integer code event interest (default 1). code.event2 Integer code competing event (default 2). code.censoring Integer code censoring (default 0). error Character specifying method variance standard error used internally. \"survival\" typically \"greenwood\". \"competing-risk\" pass options supported calculateAalenDeltaSE() (\"aalen\", \"delta\", \"none\"). conf.type Character transformation CI probability scale (default \"arcsine-square root\"). conf.int numeric two-sided confidence level (default 0.95). type.y Optional vector/list per panel: \"surv\" \"risk\" (display 1 - survival .e. CIF). label.x Character x-axis labels (default \"Time\"). label.y Character y-axis labels (default internally set \"Survival\" \"Cumulative incidence\"). label.strata Character vector labels strata. order.strata Optional ordering strata levels. panel.per.variable = TRUE, supply named list list(var = c(\"L1\",\"L2\",...)) RHS variable; unmatched levels dropped. panel.per.variable = FALSE, supply character vector c(\"L1\",\"L2\",...) specifies display order (legend/risktable) single stratification factor. Levels listed dropped. label.strata named vector, names must match (re-ordered) levels. limits.x Numeric length-2 vectors axis limits. NULL internally set c(0,max(out_readSurv$t)). limits.y Numeric length-2 vectors axis limits. NULL internally set c(0,1). breaks.x Numeric vectors axis breaks (default NULL). breaks.y Numeric vectors axis breaks (default NULL). use.coord.cartesian Logical specify use coord_cartesian() (default FALSE). add.conf Logical add add_confidence_interval() plot. calls geom_ribbon() (default TRUE). add.risktable Logical add add_risktable(risktable_stats=\"n.risk\") plot (default TRUE). add.estimate.table Logical add add_risktable(risktable_stats=\"estimate (conf.low, conf.high)\") plot (default FALSE). symbol.risk.table Character specifying symbol used risk table denote strata: \"square\", \"circle\", \"triangle\" (default \"square\"). font.size.risk.table Numeric font size texts risk / estimate tables (default 3). add.censor.mark Logical add add_censor_mark() plot. calls geom_point() (default TRUE). shape.censor.mark Integer point shape censor marks (default 3). size.censor.mark Numeric point size censor marks (default 2). add.competing.risk.mark Logical add time marks describe event2 specified Event(), usually competing events. calls geom_point() (default TRUE). competing.risk.time Named list numeric vectors (names must mapped strata labels). shape.competing.risk.mark Integer point shape competing-risk marks (default 16). size.competing.risk.mark Numeric point size competing-risk marks (default 2). add.intercurrent.event.mark Logical overlay user-specified time marks per strata calls geom_point() (default TRUE). intercurrent.event.time Named list numeric vectors (names must mapped strata labels). shape.intercurrent.event.mark Integer point shape intercurrent-event marks (default 1). size.intercurrent.event.mark Numeric point size intercurrent-event marks (default 2). add.quantile Logical add add_quantile() plot. calls geom_segment() (default TRUE). level.quantile Numeric quantile level add_quantile() (default 0.5). panel.per.event Logical. Explicit panel mode. TRUE outcome.type == \"competing-risk\", cifplot() internally calls cifpanel() display two event-specific CIFs side--side (event 1 event 2) using reversed code.events. Ignored non-competing-risk outcomes. panel.censoring Logical. Explicit panel mode. TRUE outcome.type == \"survival\", cifplot() internally calls cifpanel() display KM-type curves (event, censor) (censor, event) censoring patterns can inspected. panel.per.variable Logical. Explicit panel mode. TRUE right-hand side formula multiple covariates (e.g. ~ + b + c), function produces panel variable RHS used stratification factor. panel.mode Character specifying Automatic panel mode. \"auto\" none panel.per.variable, panel.per.event, panel.censoring set TRUE, function chooses suitable panel mode automatically: () formula RHS 2+ variables, behaves like panel.per.variable = TRUE; (ii) otherwise, outcome.type == \"competing-risk\", behaves like panel.per.event = TRUE; (iii) otherwise, outcome.type == \"survival\", behaves like panel.censoring = TRUE. panel mode explicitly specified, panel.mode ignored. rows.columns.panel Optional integer vector c(nrow, ncol) controlling panel layout. NULL, automatic layout used. style Character plot theme controls (default \"classsic\"). palette Optional character vector specify color palette, e.g. palette=c(\"blue\", \"cyan\", \"navy\", \"green\") (default NULL). linewidth Optional numeric specifying line width curve (default 0.8). linetype Optional logical using different line types curve (default \\code{FALSE`). font.family Character plot theme controls (e.g. \"sans\", \"serif\", \"mono\". default \"sans\"). font.size Integer plot theme controls (default 12). legend.position Character specify position legend: \"top\", \"right\", \"bottom\", \"left\", \"none\" (default \"top\"). filename.ggsave Character save ggsurvfit plot path name specified. width.ggsave Numeric specify width ggsurvfit plot. height.ggsave Numeric specify height ggsurvfit plot. dpi.ggsave Numeric specify dpi ggsurvfit plot.","code":""},{"path":"https://gestimation.github.io/cifmodeling/articles/arguments.html","id":"cifpanel","dir":"Articles","previous_headings":"","what":"cifpanel()","title":"Full lists of arguments","text":"formula model formula specifying time--event outcome left-hand side (typically Event(time, status) survival::Surv(time, status)) , optionally, stratification variable right-hand side. Unlike cifplot(), function accept fitted survfit object. formulas list formulas (one per panel). provided, overrides formula. data data frame containing variables formula. weights Optional name weight variable data. Weights must nonnegative. subset.condition Optional character expression subset data analysis. na.action function specifying action take missing values. default na.omit. outcome.type Character string specifying type time--event outcome. One \"survival\" (Kaplan–Meier type) \"competing-risk\" (Aalen–Johansen type). NULL (default), function automatically infers outcome type data: event variable two unique levels, \"competing-risk\" assumed; otherwise, \"survival\" used. can also use abbreviations \"S\" \"C\". Mixed ambiguous inputs (e.g., c(\"S\", \"C\")) trigger automatic detection based event coding data. code.event1 Integer code event interest (default 1). code.event2 Integer code competing event (default 2). code.censoring Integer code censoring (default 0). code.events Optional numeric length-3 vector c(event1, event2, censoring). supplied, overrides code.event1, code.event2, code.censoring (primarily used cifpanel() called panel.per.event = TRUE). error Character specifying method variance standard error used internally. \"survival\" typically \"greenwood\". \"competing-risk\" pass options supported calculateAalenDeltaSE() (\"aalen\", \"delta\", \"none\"). conf.type Character transformation CI probability scale (default \"arcsine-square root\"). conf.int numeric two-sided confidence level (default 0.95). type.y Optional vector/list per panel: \"surv\" \"risk\" (display 1 - survival .e. CIF). label.x, label.y Optional vectors/lists axis labels per panel. label.strata Optional list character vectors legend labels per panel (passed cifplot()). order.strata Optional list character vectors ordering labels per panel (passed cifplot()). limits.x, limits.y Optional vectors/lists numeric length-2 axis limits per panel. breaks.x, breaks.y Optional vectors/lists axis breaks per panel (forwarded breaks.x / breaks.y cifplot()). add.conf, add.censor.mark, add.competing.risk.mark, add.intercurrent.event.mark, add.quantile Optional logical vectors/lists per panel toggle features cifplot(). NULL, sensible defaults used (CI/Censor ; others ). rows.columns.panel Integer vector c(nrow, ncol) specifying grid size. title.panel, subtitle.panel, caption.panel Optional strings panel annotation. tag.panel Passed patchwork::plot_annotation(tag_levels = ...). title.plot Optional length-2 character vector, titles base/inset plots inset.panel = TRUE. legend.position Position legends: \"top\", \"right\", \"bottom\", \"left\", \"none\". legend.collect TRUE (grid mode), collect legends across subplots. inset.panel TRUE, place second plot inset first. inset.left, inset.bottom, inset.right, inset.top Numeric positions (0–1) inset box. inset.align.One \"panel\", \"plot\", \"full\". inset.legend.position Legend position inset plot (e.g., \"none\"). filename.ggsave Character save composed panel path name specified. width.ggsave Numeric specify width composed panel. height.ggsave Numeric specify height composed panel. dpi.ggsave Numeric specify dpi composed panel. print.panel Logical. TRUE, composed patchwork object printed immediately (interactive use). FALSE, object returned invisibly can assigned, modified, saved. Kept backward compatibility. engine Character scalar selecting internal plotting engine. Currently \"cifplot\" supported used construct panel cifplot_single(). argument reserved future extensions. ... Additional arguments forwarded cifplot (e.g., style, font.family, font.size, etc.). Panel-wise overrides provided via explicit arguments take precedence ....","code":""},{"path":"https://gestimation.github.io/cifmodeling/articles/arguments.html","id":"polyreg","dir":"Articles","previous_headings":"","what":"polyreg()","title":"Full lists of arguments","text":"nuisance.model formula describing outcome nuisance covariates, excluding exposure interest. left-hand side must Event(time, status) survival::Surv(time, status). exposure character string giving name categorical exposure variable data. strata Optional character string name stratification variable used adjust dependent censoring (default NULL). data data frame containing outcome, exposure nuisance covariates referenced nuisance.model. subset.condition Optional expression (character string) defining subset data analyze (default NULL). code.event1 Integer code event interest (default 1). code.event2 Integer code competing event (default 2). code.censoring Integer code censoring (default 0). code.exposure.ref Integer code identifying reference exposure category (default 0). effect.measure1 Character string specifying effect measure primary event. Supported values \"RR\", \"\" \"SHR\". effect.measure2 Character string specifying effect measure competing event. Supported values \"RR\", \"\" \"SHR\". time.point Numeric time point exposure effect evaluated. Required survival competing risk analyses. outcome.type Character string selecting outcome type. Valid values \"competing-risk\", \"survival\", \"binomial\", \"proportional-survival\" \"proportional-competing-risk\". Defaults \"competing-risk\". NULL (default), function automatically infers outcome type data: event variable two unique levels, \"competing-risk\" assumed; otherwise, \"survival\" used. can also use abbreviations \"S\" \"C\". Mixed ambiguous inputs (e.g., c(\"S\", \"C\")) trigger automatic detection based event coding data. conf.int numeric two-sided confidence level (default 0.95). report.nuisance.parameter Logical TRUE, returned object includes estimates nuisance model parameters (default FALSE). report.optim.convergence Logical TRUE, optimization convergence summaries returned (default FALSE). report.sandwich.conf Logical NULL. TRUE, confidence intervals based sandwich variance computed. FALSE, omitted (default TRUE). confidence interval default time-point models (\"outcome.type=COMPETING-RISK\", \"survival\" \"binomial\") available otherwise. report.boot.conf Logical NULL. TRUE, bootstrap confidence intervals computed. FALSE, omitted. NULL, function chooses based outcome.type (default NULL). confidence interval default proportional models (outcome.type=\"proportional-competing-risk\" \"proportional-survival\"). boot.bca Logical indicating bootstrap confidence interval method. Use TRUE bias-corrected accelerated intervals FALSE normal approximation (default FALSE). boot.replications Integer giving number bootstrap replications (default 200). boot.seed Numeric seed used resampling bootstrap. nleqslv.method Character string specifying solver used nleqslv(). Available choices \"Broyden\" \"Newton\". optim.parameter1 Numeric tolerance convergence outer loop (default 1e-6). optim.parameter2 Numeric tolerance convergence inner loop (default 1e-6). optim.parameter3 Numeric constraint absolute value parameters (default 100). optim.parameter4 Integer maximum number outer loop iterations (default 50). optim.parameter5 Integer maximum number nleqslv() iterations per outer iteration (default 50). optim.parameter6 Integer maximum number iterations Levenberg-Marquardt routine (default 50). optim.parameter7 Numeric convergence tolerance Levenberg-Marquardt routine (default 1e-10). optim.parameter8 Numeric tolerance updating Hessian Levenberg-Marquardt routine (default 1e-6). optim.parameter9 Numeric starting value Levenberg-Marquardt damping parameter lambda (default 1e-6). optim.parameter10 Numeric upper bound lambda Levenberg-Marquardt routine (default 40). optim.parameter11 Numeric lower bound lambda Levenberg-Marquardt routine (default 0.025). optim.parameter12 Numeric multiplicative increment applied lambda Levenberg-Marquardt step successful (default 2). optim.parameter13 Numeric multiplicative decrement applied lambda Levenberg-Marquardt step unsuccessful (default 0.5). data.initial.values Optional data frame providing starting values optimization (default NULL). normalize.covariate Logical indicating whether covariates centered scaled prior optimization (default TRUE). terminate.time.point Logical indicating whether time points contribute estimation terminated min max follow-times exposure level (default TRUE). prob.bound Numeric lower bound used internally truncate probabilities away 0 1 (default 1e-7).","code":""},{"path":"https://gestimation.github.io/cifmodeling/articles/examples.html","id":"example-1--unadjusted-competing-risks-analysis","dir":"Articles","previous_headings":"","what":"Example 1. Unadjusted competing risks analysis","title":"Examples","text":"initial illustration, unadjusted analysis focusing cumulative incidence diabetic retinopathy (event 1) macrovascular complications (event 2) 8 years follow-demonstrated. visualize covariate separately multiple strata supplied, set panel.per.variable = TRUE. variable right-hand side plotted panel, layout can controlled rows.columns.panel. figure contrasts cumulative incidence curves diabetic retinopathy quartiles fruitq binary exposure fruitq1, low (Q1) high (Q2 4) intake fruit, generated cifplot(). add.conf=TRUE argument adds confidence intervals plot. helps visualize statistical uncertainty estimated probabilities across exposure levels. using numeric variables stratification, discretize beforehand cut() factor(). labels x-axis (Time) y-axis (Cumulative incidence) panels default labels. Cumulative incidence curves per stratification variable second figure, censoring marks added along curve (add.censor.mark = TRUE) indicate individuals censored experiencing event. marks visualize timing frequency censoring, allowing clearer understanding loss--censoring patterns follow-. workflow differs slightly previous code. First, compute survfit-compatible object output1 using cifcurve() outcome.type=\"competing-risk\" calculating Aalen–Johansen estimator stratified fruitq1. , cifplot() used generate figure. label.y, label.x limit.x arguments also used customize axis labels limits. Cumulative incidence curves censor marks axis labels Next, competing risk marks added (add.competing.risk.mark = TRUE) indicate individuals experienced competing event (macrovascular complications) diabetic retinopathy. time points macrovascular complications occurred obtained output2 strata using helper function extract_time_to_event(). symbols help distinguish events due primary cause attributable competing causes. Note names competing.risk.time intercurrent.event.time must match strata labels used plot supplied user. Cumulative incidence curves competing risk marks label.strata another argument customizing labels, inputting survfit object, becomes invalid contain stratum information. Therefore, following code inputs formula data. label.strata used combining level.strata order.strata. level.strata specifies levels stratification variable corresponding label label.strata. levels specified level.strata displayed figure order defined order.strata. figure enclosed square generated, due style=\"framed\" specification. Cumulative incidence curves strata labels FRAMED style specifying add.estimate.table = TRUE, risks diabetic retinopathy (estimates CIFs) along CIs shown table bottom figure. risk ratios specific time point (e.g. 8 years) competing events can jointly coherently estimated using polyreg() outcome.type = \"competing-risk\". code polyreg() , covariates included nuisance model (~1 specifies intercept ). effect low fruit intake fruitq1 estimated unadjusted risk ratio (effect.measure1=\"RR\") diabetic retinopathy (event 1) macrovascular complications (event 2) 8 years (time.point=8). summary() method prints event-wise table point estimates, CIs, p-values. Internally, table stored summary component \"polyreg\" object, compatible modelsummary ecosystem. want elaborate tables, can optionally pass object modelsummary::msummary(). case, regression coefficients included summary setting report.nuisance.parameter = TRUE. Model summaries can also exponentiated display risk ratios, odds ratios, subdistribution hazard ratios using exponentiate option.","code":"data(diabetes.complications) diabetes.complications$fruitq1 <- ifelse(   diabetes.complications$fruitq == \"Q1\",\"Q1\",\"Q2 to Q4\" ) cifplot(Event(t,epsilon)~fruitq+fruitq1, data=diabetes.complications,          outcome.type=\"competing-risk\",         add.conf=TRUE, add.censor.mark=FALSE,          add.competing.risk.mark=FALSE, panel.per.variable=TRUE) output1 <- cifcurve(Event(t,epsilon)~fruitq1, data=diabetes.complications,                      outcome.type=\"competing-risk\") cifplot(output1, add.conf=FALSE, add.risktable=FALSE,          add.censor.mark=TRUE, add.competing.risk.mark=FALSE,          label.y=\"CIF of diabetic retinopathy\", label.x=\"Years from registration\",         limits.x=c(0,8)) output2 <- extract_time_to_event(Event(t,epsilon)~fruitq1,                                   data=diabetes.complications, which_event=\"event2\") cifplot(output1, add.conf=FALSE, add.risktable=FALSE,          add.censor.mark=FALSE, add.competing.risk.mark=TRUE, competing.risk.time=output2,          label.y=\"CIF of diabetic retinopathy\", label.x=\"Years from registration\",         limits.x=c(0,8)) cifplot(Event(t,epsilon)~fruitq1, data=diabetes.complications,          outcome.type=\"competing-risk\", add.conf=FALSE, add.risktable=FALSE,          add.estimate.table=TRUE, add.censor.mark=FALSE, add.competing.risk.mark=TRUE,          competing.risk.time=output2, label.y=\"CIF of diabetic retinopathy\",          label.x=\"Years from registration\", limits.x=c(0,8),         label.strata=c(\"High intake\",\"Low intake\"), level.strata=c(\"Q2 to Q4\",\"Q1\"),          order.strata=c(\"Q1\", \"Q2 to Q4\"), style=\"framed\") output3 <- polyreg(nuisance.model=Event(t,epsilon)~1, exposure=\"fruitq1\",            data=diabetes.complications, effect.measure1=\"RR\", effect.measure2=\"RR\",            time.point=8, outcome.type=\"competing-risk\",            report.nuisance.parameter=TRUE) coef(output3) #> [1] -1.38313159 -0.30043942 -3.99147406 -0.07582595 vcov(output3) #>              [,1]         [,2]         [,3]         [,4] #> [1,]  0.017018160 -0.012351309  0.009609321 -0.008372500 #> [2,] -0.012351309  0.012789187 -0.006012254  0.006540183 #> [3,]  0.009609321 -0.006012254  0.048161715 -0.044070501 #> [4,] -0.008372500  0.006540183 -0.044070501  0.055992232 summary(output3) #>  #>                       event1        event2       #> ----------------------------------------------  #> Intercept             #>                       0.251         0.018        #>                       [0.194, 0.324]  [0.012, 0.028] #>                       (p=0.000)     (p=0.000)    #>  #> fruitq1, Q2 to Q4 vs 0  #>                       0.740         0.927        #>                       [0.593, 0.924]  [0.583, 1.474] #>                       (p=0.008)     (p=0.749)    #>  #> ----------------------------------------------  #>  #> effect.measure        RR at 8       RR at 8      #> n.events              279 in N = 978  79 in N = 978 #> median.follow.up      8             -            #> range.follow.up       [0.05, 11.00]  -            #> n.parameters          4             -            #> converged.by          Converged in objective function  -            #> nleqslv.message       Function criterion near zero  -"},{"path":"https://gestimation.github.io/cifmodeling/articles/examples.html","id":"example-2--survival-analysis","dir":"Articles","previous_headings":"","what":"Example 2. Survival analysis","title":"Examples","text":"second example time first event analysis (outcome.type=\"survival\") estimate effect risk diabetic retinopathy macrovascular complications 8 years. code , cifplot() directly used generate survfit-compatible object internally plot . Survival curves cifplot() code specifies Richardson model risk diabetic retinopathy macrovascular complications 8 years (outcome.type=“survival”). Dependent censoring adjusted stratified IPCW method (strata='strata'). Estimates effects exposure (e.g. intercept) suppressed report.nuisance.parameter specified.","code":"diabetes.complications$d <- as.integer(diabetes.complications$epsilon>0) cifplot(Event(t,d) ~ fruitq1, data=diabetes.complications,  outcome.type=\"survival\", add.conf=TRUE, add.censor.mark=FALSE,  add.competing.risk.mark=FALSE, label.y=\"Survival probability\",  label.x=\"Years from registration\", label.strata=c(\"High intake\",\"Low intake\"), level.strata=c(\"Q2 to Q4\",\"Q1\"), order.strata=c(\"Q1\", \"Q2 to Q4\")) output4 <- polyreg(nuisance.model=Event(t,d)~1,            exposure=\"fruitq1\", strata=\"strata\", data=diabetes.complications,           effect.measure1=\"RR\", time.point=8, outcome.type=\"survival\") summary(output4) #>  #>                       event 1 (no competing risk) #> ----------------------------------  #> fruitq1, Q2 to Q4 vs 0  #>                       0.777        #>                       [0.001, 685.697] #>                       (p=0.942)    #>  #> ----------------------------------  #>  #> effect.measure        RR at 8      #> n.events              358 in N = 978 #> median.follow.up      8            #> range.follow.up       [0.05, 11.00] #> n.parameters          2            #> converged.by          Converged in objective function #> nleqslv.message       Function criterion near zero"},{"path":"https://gestimation.github.io/cifmodeling/articles/examples.html","id":"example-3--adjusted-competing-risks-analysis","dir":"Articles","previous_headings":"","what":"Example 3. Adjusted competing risks analysis","title":"Examples","text":"code specifies polytomous log-odds models competing events (outcome.type=\"competing-risk\"). 15 covariates censoring strata specified nuisance.model= strata=, respectively.","code":"output5 <- polyreg(nuisance.model=Event(t,epsilon)~age+sex+bmi+hba1c           +diabetes_duration+drug_oha+drug_insulin+sbp+ldl+hdl+tg           +current_smoker+alcohol_drinker+ltpa,            exposure=\"fruitq1\", strata=\"strata\", data=diabetes.complications,           effect.measure1=\"RR\", time.point=8, outcome.type=\"competing-risk\") summary(output5) #>  #>                       event1        event2       #> ----------------------------------------------  #> fruitq1, Q2 to Q4 vs 0  #>                       0.644         1.100        #>                       [0.489, 0.848]  [0.596, 2.030] #>                       (p=0.002)     (p=0.761)    #>  #> ----------------------------------------------  #>  #> effect.measure        RR at 8       RR at 8      #> n.events              279 in N = 978  79 in N = 978 #> median.follow.up      8             -            #> range.follow.up       [0.05, 11.00]  -            #> n.parameters          32            -            #> converged.by          Converged in objective function  -            #> nleqslv.message       Function criterion near zero  -"},{"path":"https://gestimation.github.io/cifmodeling/articles/examples.html","id":"example-4--description-of-cumulative-incidence-of-competing-events","dir":"Articles","previous_headings":"","what":"Example 4. Description of cumulative incidence of competing events","title":"Examples","text":"cifpanel() arranges multiple survival CIF plots single, polished layout shared legend. ’s designed side--side comparisons—e.g., event 1 vs event 2, different groupings, different y-scales—keeping axis ranges styles consistent. Internally panel produced using engine cifcurve(), can supply scalar arguments (applied panels) lists control panel independently. function accepts shared panel-specific arguments. single formula provided, model structure reused panel, arguments supplied lists applied individually panel. Arguments code.events, label.strata, add.censor.mark can given lists, list element corresponds one panel. allows flexible configuration maintaining concise readable syntax. example creates 1×2 panel (rows.columns.panel = c(1,2)) comparing cumulative incidence two competing events cohort, namely CIF diabetic retinopathy left panel CIF macrovascular complications right panel. panels stratified fruitq1, legend shared bottom. pairs code.events list instructs cifpanel() display event 1 first panel event 2 second panel, event code 0 representing censoring. Cumulative incidence curves event 1 vs event 2 using cifpanel() Arguments specified scalars (example, label.x = \"Years registration\") applied uniformly panels. Character vectors length number panels (example, label.y = c(\"Diabetic retinopathy\", \"Macrovascular complications\")) assign different label panel order. Lists provide flexibility, allowing panel distinct settings mirror arguments cifcurve(). legend.collect = TRUE option merges legends panels single shared legend, positioned according legend.position. arguments title.panel, subtitle.panel, caption.panel, title.plot control overall panel title individual subplot titles, ensuring multi-panel layouts remain consistent publication-ready.","code":"output6 <- cifpanel(  rows.columns.panel = c(1,2),  formula            = Event(t, epsilon) ~ fruitq1,  data               = diabetes.complications,  outcome.type       = \"competing-risk\",  code.events        = list(c(1,2,0), c(2,1,0)),  label.y            = c(\"CIF of diabetic retinopathy\", \"CIF of macrovascular complications\"),  label.x            = \"Years from registration\",  label.strata       = list(c(\"High intake\",\"Low intake\")),  title.plot         = c(\"Diabetic retinopathy\", \"Macrovascular complications\"),  legend.position    = \"bottom\",  legend.collect     = TRUE ) print(output6)"},{"path":"https://gestimation.github.io/cifmodeling/articles/examples.html","id":"example-5--zoomed-in-view","dir":"Articles","previous_headings":"","what":"Example 5. Zoomed-in-view","title":"Examples","text":"example, cifplot() calls cifpanel() combine multiple plots. cifpanel() can create panel multiple plots display one plot inside another. cumulative incidence probability macrovascular complications low, making difficult discern differences groups. following code uses inset.panel= display plot output2, enlarged vertical axis, inside plot output1. position size zoomed--view panel specified inset.left, inset.bottom, inset.right, inset.top. Zoomed--view panel using cifplot() cifpanel() code , formula data given directly, produces output .","code":"output7 <- cifplot(Event(t,epsilon) ~ fruitq,                    data=diabetes.complications,                    outcome.type=\"competing-risk\",                    code.event1=2,                    code.event2=1,                    add.conf=FALSE,                    add.risktable = FALSE,                    label.y=\"CIF of macrovascular complications\",                    label.x=\"Years from registration\") output8 <- cifplot(Event(t,epsilon) ~ fruitq,                    data=diabetes.complications,                    outcome.type=\"competing-risk\",                    code.event1=2,                    code.event2=1,                    add.conf = FALSE,                    add.risktable = FALSE,                    label.y=\"\",                    label.x=\"\",                    limits.y=c(0,0.15)) output9 <- list(a = output7$plot, b = output8$plot) output10 <- cifpanel(plots=output9,          title.plot=c(\"Fruit intake and macrovascular complications\", \"Zoomed-in view\"),          inset.panel=TRUE,          inset.left=0.40, inset.bottom=0.45,          inset.right=1.00, inset.top=0.95,          inset.legend.position=\"none\",          legend.position=\"bottom\") print(output10) cifpanel(  title.plot = c(\"Fruit intake and macrovascular complications\", \"Zoomed-in view\"),  inset.panel = TRUE,  formula = Event(t, epsilon) ~ fruitq,  data = diabetes.complications,  outcome.type = \"competing-risk\",  code.events = list(c(2,1,0), c(2,1,0)),  label.y = c(\"CIF of macrovascular complications\", \"\"),  label.x = c(\"Years from registration\", \"\"),  limits.y = list(c(0,1), c(0,0.15)),  inset.left = 0.40, inset.bottom = 0.45,  inset.right = 1.00, inset.top = 0.95,  inset.legend.position = \"none\",  legend.position = \"bottom\",   add.conf = FALSE )"},{"path":[]},{"path":"https://gestimation.github.io/cifmodeling/articles/examples.html","id":"default","dir":"Articles","previous_headings":"Example 6. Plot customization","what":"Default","title":"Examples","text":"Default cifplot()","code":"data(diabetes.complications) diabetes.complications$d <- as.integer(diabetes.complications$epsilon>0) diabetes.complications$fruitq1 <- ifelse(   diabetes.complications$fruitq == \"Q1\",\"Q1\",\"Q2 to Q4\" )  # Default cifplot(Event(t,epsilon) ~ fruitq1,         data                    = diabetes.complications,         outcome.type            = \"competing-risk\")"},{"path":"https://gestimation.github.io/cifmodeling/articles/examples.html","id":"visual-elements","dir":"Articles","previous_headings":"Example 6. Plot customization","what":"Visual elements","title":"Examples","text":"Hide confidence interval, risk table, censor marks Add table CIF estimates event-2 time marks Add event-2 time marks using external event-2 time Use (open) circle strata estimate table event-2 time marks","code":"# Hide confidence interval, risk table, and censor marks cifplot(Event(t,epsilon) ~ fruitq1,         data                    = diabetes.complications,         outcome.type            = \"competing-risk\",         add.conf                = FALSE,          add.risktable           = FALSE,          add.censor.mark         = FALSE) # Add a table of CIF estimates and event-2 time marks cifplot(Event(t,epsilon) ~ fruitq1,         data                    = diabetes.complications,         outcome.type            = \"competing-risk\",         add.risktable           = FALSE,          add.estimate.table      = TRUE,          add.censor.mark         = FALSE,          add.competing.risk.mark = TRUE) # Extract event-2 time from data frame time_to_event <- extract_time_to_event(Event(t, epsilon) ~ fruitq1,                                        data = diabetes.complications, which_event = \"event2\")  # Ensure named list by strata stopifnot(is.list(time_to_event), length(time_to_event) > 0)  # Add event-2 time marks using external event-2 time  cifplot(Event(t, epsilon) ~ fruitq1,         data                    = diabetes.complications,         outcome.type            = \"competing-risk\",         add.risktable           = FALSE,         add.estimate.table      = TRUE,         add.censor.mark         = FALSE,         add.competing.risk.mark = TRUE,         competing.risk.time     = time_to_event) # Use (open) circle for strata in estimate table and event-2 time marks  cifplot(Event(t, epsilon) ~ fruitq1,         data                      = diabetes.complications,         outcome.type              = \"competing-risk\",         add.risktable             = FALSE,         add.estimate.table        = TRUE,         symbol.risk.table         = \"circle\",          add.censor.mark           = FALSE,         add.competing.risk.mark   = TRUE,         shape.competing.risk.mark = 1,         size.competing.risk.mark  = 4,         competing.risk.time       = time_to_event)"},{"path":"https://gestimation.github.io/cifmodeling/articles/examples.html","id":"font-style-and-palette","dir":"Articles","previous_headings":"Example 6. Plot customization","what":"Font, style and palette","title":"Examples","text":"Adjust font size Select font family, style, linewidth palette Select font family, style, linewidth palette Select font family, style, linewidth palette Select font family, style, linewidth palette","code":"# Adjust font size cifplot(Event(t,epsilon) ~ fruitq,         data                      = diabetes.complications,         outcome.type              = \"competing-risk\",         add.conf                  = FALSE,          font.size                 = 16,          font.size.risk.table      = 3) # Select font family, style, linewidth and palette cifplot(Event(t,epsilon) ~ fruitq,         data                      = diabetes.complications,         outcome.type              = \"competing-risk\",         add.conf                  = FALSE,          style                     = \"bold\",          font.family               = \"serif\",          palette                   = c(\"blue1\", \"cyan3\", \"navy\", \"deepskyblue3\")) cifplot(Event(t,epsilon) ~ fruitq,         data                      = diabetes.complications,         outcome.type              = \"competing-risk\",         add.conf = FALSE,          style                     = \"framed\",          font.family               = \"serif\",          linewidth                 = 1.3,          linetype                  = TRUE,          palette                   = c(\"azure4\", \"gray\", \"black\", \"darkgray\")) cifplot(Event(t,epsilon) ~ fruitq,         data                      = diabetes.complications,         outcome.type              = \"competing-risk\",         add.conf                  = FALSE,          style                     = \"gray\",          font.family               = \"mono\",          palette                   = c(\"cyan3\", \"deepskyblue4\", \"darkseagreen2\", \"deepskyblue3\")) cifplot(Event(t,epsilon) ~ fruitq,         data                      = diabetes.complications,         outcome.type              = \"competing-risk\",         add.conf                  = FALSE,          style                     = \"ggsurvfit\",          font.family               = \"mono\",          palette                   = c(\"brown\", \"orange\", \"purple\", \"darkgoldenrod\"))"},{"path":"https://gestimation.github.io/cifmodeling/articles/examples.html","id":"axis-and-label","dir":"Articles","previous_headings":"Example 6. Plot customization","what":"Axis and label","title":"Examples","text":"Customize labels explicit level mapping (safe factor order) Plot 1 - survival set axis limits","code":"# Customize labels with explicit level mapping (safe against factor order) cifplot(Event(t,d) ~ fruitq1,         data                      = diabetes.complications,         outcome.type              = \"survival\",         label.y                   = \"Survival (no complications)\",         label.x                   = \"Years from registration\",         label.strata              = c(\"High intake\",\"Low intake\"),          level.strata              = c(\"Q2 to Q4\",\"Q1\"),          order.strata              = c(\"Q1\", \"Q2 to Q4\")) # Plot 1 - survival and set axis limits cifplot(Event(t,d) ~ fruitq1,         data                      = diabetes.complications,         outcome.type              = \"survival\",         label.y                   = \"Risk of diabetes complications\",         label.x                   = \"Years from registration\",         label.strata              = c(\"High intake\",\"Low intake\"),          level.strata              = c(\"Q2 to Q4\",\"Q1\"),          order.strata              = c(\"Q1\", \"Q2 to Q4\"),         type.y                    = \"risk\",         limits.y                  = c(0, 0.5),         breaks.y                  = seq(0, 0.5, by=0.1),         limits.x                  = c(0, 8),         breaks.x                  = 0:8,         use.coord.cartesian       = TRUE)"},{"path":"https://gestimation.github.io/cifmodeling/articles/examples.html","id":"panel-mode","dir":"Articles","previous_headings":"Example 6. Plot customization","what":"Panel mode","title":"Examples","text":"Cumulative incidence curves per stratification variable Cumulative incidence curves event 1 vs event 2 Survival curves event vs censoring","code":"# Cumulative incidence curves per each stratification variable cifplot(Event(t,epsilon) ~ fruitq + fruitq1,         data                      = diabetes.complications,         outcome.type              = \"competing-risk\",         panel.per.variable        = TRUE) # Cumulative incidence curves for event 1 vs event 2 cifplot(Event(t,epsilon) ~ fruitq1,         data                      = diabetes.complications,         outcome.type              = \"competing-risk\",         panel.per.event           = TRUE) # Survival curves for event vs censoring cifplot(Event(t,d) ~ fruitq1,         data                      = diabetes.complications,         outcome.type              = \"survival\",         panel.censoring           = TRUE)"},{"path":"https://gestimation.github.io/cifmodeling/articles/functions.html","id":"cifplot","dir":"Articles","previous_headings":"","what":"cifplot()","title":"Main functions","text":"function produces Kaplan–Meier survival Aalen–Johansen cumulative incidence curve unified formula + data interface. auto-labels axes based outcome.type type.y (\"risk\" 1-survival CIF), can add censoring/competing-risk/intercurrent-event marks, returns regular ggplot object (compatible + %+%). may also pass survfit-compatible object directly. Typical use cases Draw one survival/CIF curve set exposure groups (e.g., treatment vs control). Call cifpanel() simplified code create panel displaying plots multiple stratified survival/CIF curves CIF curves event type. Add CIs censor/competing-risk/intercurrent-event marks. Add risk table display number risk estimated survival probabilities CIFs CIs point time. Key arguments shared cifcurve() formula model formula specifying outcome (Event(time, status) Surv(time, status)) left-hand side (LHS) , optionally, stratification variable right-hand side (RHS). outcome.type = \"survival\" → Kaplan–Meier estimator outcome.type = \"competing-risk\" → Aalen–Johansen estimator conf.int sets two-sided level (default 0.95) conf.type chooses transformation (\"arcsine-square root\", \"plain\", \"log\", \"log-log\", \"logit\", \"none\") error chooses estimator SE (\"greenwood\", \"tsiatis\" \"\" survival curves \"delta\", \"aalen\" \"\" CIFs) Key arguments cifplot() add.conf adds CIs ggplot2-based plot add.competing.risk.mark add.intercurrent.event.mark add symbols describe competing risks intercurrent events addition conventional censoring marks add.censor.mark add.risktable adds numbers risk add.estimate.table adds time--time estimates CIs add.quantile add reference line chosen quantile level type.y chooses y-axis (\"surv\" survival \"risk\" 1-survival/CIF) limits.x, limits.y, breaks.x, breaks.y numeric vectors axis control style specifies appearance plot (\"classic\", \"bold\", \"framed\", \"grid\", \"gray\" \"ggsurvfit\") palette specifies color curve (e.g. palette=c(\"blue1\", \"cyan3\", \"navy\", \"deepskyblue3\"))) panel.per.variable produces multiple survival/CIF curves per stratification variable specified formula panel.per.event produces CIF curves event type panel.censoring produces Kaplan–Meier curves (event, censor) (censor, event) censoring patterns can inspected panel.mode uses automatic panel mode Return plot ggplot object Additional metadata used cifpanel() helper functions hood: cifcurve() cifplot() streamlined, opinionated wrapper around cifcurve(), calculates Kaplan–Meier estimator Aalen–Johansen estimator. cifcurve() returns survfit-compatible object, enabling independent use standard methods : summary() — time--time estimates SEs CIs plot() — base R stepwise survival/CIF curves mean() — restricted mean survival estimates CIs quantile() — quantile estimates CIs Furthermore, cifmodeling package provides workflow ggplot2-based visualization based survfit-compatible objects passing cifplot() cifpanel.","code":""},{"path":"https://gestimation.github.io/cifmodeling/articles/functions.html","id":"cifpanel","dir":"Articles","previous_headings":"","what":"cifpanel()","title":"Main functions","text":"cifpanel() arranges multiple cifplot()/ggplot (cifcurve() results rendered via cifplot()) unified layout consistent scales, shared legend, synchronized themes. inset feature allows display one plot inside another. Typical use cases - Compare CIF (event 1) vs CIF (event 2) 1×2 layout. Compare survival/CIF curves across strata shared legend matched axes. Display plot enlarged y-axis inside full-scale plot. Key arguments formula formulas — one formula list formulas; entry creates panel. data, outcome.type, code.events, type.y — recycled across panels unless list supplied per-panel control. rows.columns.panel — selects grid layout c(rows, cols). inset.panel — selects inset layout. title.panel, subtitle.panel, caption.panel, title.plot — overall titles captions. tag.panel — panel tag style (e.g., “”, “”, “1”). label.x, label.y, limits.x, limits.y, breaks.x, breaks.y — shared axis control unless list supplied per-panel control. Return patchwork patchwork object (still ggplot-compatible) plots list ggplot objects patchwork Additional metadata example usage first example, cifplot() called cifpanel() combine multiple plots. cifpanel() function creating panel multiple plots like . cifpanel() can also display one plot inside another. cumulative incidence probability macrovascular complications low, making difficult discern differences groups. following code uses inset.panel= display plot output2, enlarged vertical axis, inside plot output1. position size zoomed--view panel specified inset.left, inset.bottom, inset.right, inset.top. Zoomed--view panel using cifplot() cifpanel() code , formula data given directly, produces output .","code":"output1 <- cifplot(Event(t,epsilon) ~ fruitq,                    data=diabetes.complications,                    outcome.type=\"competing-risk\",                    code.event1=2,                    code.event2=1,                    add.conf=FALSE,                    add.risktable = FALSE,                    label.y=\"CIF of macrovascular complications\",                    label.x=\"Years from registration\") output2 <- cifplot(Event(t,epsilon) ~ fruitq,                    data=diabetes.complications,                    outcome.type=\"competing-risk\",                    code.event1=2,                    code.event2=1,                    add.conf = FALSE,                    add.risktable = FALSE,                    label.y=\"\",                    label.x=\"\",                    limits.y=c(0,0.15)) output3 <- list(a = output1$plot, b = output2$plot) output4 <- cifpanel(plots=output3,          title.plot=c(\"Fruit intake and macrovascular complications\", \"Zoomed-in view\"),          inset.panel=TRUE,          inset.left=0.40, inset.bottom=0.45,          inset.right=1.00, inset.top=0.95,          inset.legend.position=\"none\",          legend.position=\"bottom\") print(output4) cifpanel(  title.plot = c(\"Fruit intake and macrovascular complications\", \"Zoomed-in view\"),  inset.panel = TRUE,  formula = Event(t, epsilon) ~ fruitq,  data = diabetes.complications,  outcome.type = \"competing-risk\",  code.events = list(c(2,1,0), c(2,1,0)),  label.y = c(\"CIF of macrovascular complications\", \"\"),  label.x = c(\"Years from registration\", \"\"),  limits.y = list(c(0,1), c(0,0.15)),  inset.left = 0.40, inset.bottom = 0.45,  inset.right = 1.00, inset.top = 0.95,  inset.legend.position = \"none\",  legend.position = \"bottom\",   add.conf = FALSE )"},{"path":"https://gestimation.github.io/cifmodeling/articles/functions.html","id":"polyreg","dir":"Articles","previous_headings":"","what":"polyreg()","title":"Main functions","text":"function implements log odds product modeling CIFs user-specified time points, focusing multiplicative effects categorical exposure, constant effects time like Cox regression Fine-Gray models. estimates multiplicative effects risk ratios, odds ratios, subdistribution hazard ratios, ensuring probabilities across competing events sum one. achieved reparameterization using polytomous log odds products, fits -called effect-measure models nuisance models multiple competing events simultaneously. Additionally, polyreg() supports direct binomial regression survival outcome Richardson model binomial outcome, use log odds products. function follows familiar formula + data syntax Event() Surv() outputs tidy results, including point estimates, SEs, CIs, p-values. results can easily summarized summary() combined tools modelsummary broom reporting. Key arguments nuisance.model — formula describing outcome nuisance covariates, excluding exposure interest. exposure — specifies exposure variable. argument accepts one binary categorical variable. effect.measure1 effect.measure2 — specifies effect measures event1 event2 (\"RR\", \"\" \"SHR\"). outcome.type selects outcome type (\"competing-risk\", \"survival\", \"binomial\", \"proportional-survival\" \"proportional-competing-risk\"). time.point — specifies time points exposure effect evaluated. Required \"competing-risk\" \"survival\" outcomes. strata — specifies stratification variable used IPCW adjustment dependent censoring. Return coefficient — regression coefficients cov — variance-covariance matrix regression coefficients diagnostic.statistics — data frame containing inverse probability weights, influence functions, predicted potential outcomes summary — summary estimated exposure effects","code":""},{"path":"https://gestimation.github.io/cifmodeling/articles/functions.html","id":"an-example-of-usage","dir":"Articles","previous_headings":"polyreg()","what":"An example of usage","title":"Main functions","text":"","code":"output <- polyreg(nuisance.model=Event(t,epsilon)~1, exposure=\"fruitq\",            data=diabetes.complications, effect.measure1=\"RR\",            effect.measure2=\"RR\", time.point=8, outcome.type=\"competing-risk\")"},{"path":"https://gestimation.github.io/cifmodeling/articles/information.html","id":"model-formula-and-outcome-type-in-cifcurve-and-polyreg","dir":"Articles","previous_headings":"","what":"Model formula and outcome.type in cifcurve() and polyreg()","title":"Additional information","text":"Common ground functions expect Surv() Event() response LHS model formula follow-time event indicators supplied way. Internally helpers validate non-negative times, check event codes match user-specified code.event* arguments, derive indicators used downstream. outcome.type argument normalized utility, meaning set synonyms (e.g. \"C\", \"competing risk\", \"S\") accepted workflows mapped onto canonical labels used estimators. Key differences cifcurve() RHS formula defines grouping variable(s) whose curves estimated; weights () supplied separately. dedicated exposure argument strata handled formula term turned factor plotting estimation. polyreg() nuisance.model formula describes outcome nuisance covariates (.e. confounders), exposure passed separately exposure argument. exposure design matrix, reference level handling, scaling nuisance covariates handled explicitly regression fitting. cifcurve() focuses two estimands, selecting Kaplan–Meier Aalen–Johansen estimators via outcome.type = \"survival\" \"competing-risk\". contrast, polyreg() supports additional time-constant binomial estimands (\"proportional-survival\", \"proportional-competing-risk\", \"binomial\") enforces time-point requirements accordingly—example time.point mandatory effects fixed time, time-constant-effect (e.g. proportional subdistribution hazards) models can either use observed event times user-specified grid supplied via (vector) time.point.","code":""},{"path":"https://gestimation.github.io/cifmodeling/articles/information.html","id":"event-coding-conventions-incifmodeling-and-cdisc-adam-adtte","dir":"Articles","previous_headings":"","what":"Event coding conventions incifmodeling and CDISC ADaM ADTTE","title":"Additional information","text":"working survival data, one common source confusion arises inconsistent event coding conventions standard input Surv(), provided survival package, CDISC ADaM ADTTE (Analysis Data Model Time--Event Endpoints) used regulatory clinical trials. Surv(), event often coded 1 censoring coded 0. contrast, CDISC ADaM ADTTE (commonly used pharmaceutical submissions SDTM-based analyses) follows opposite convention. CNSR = 0 means event occurred CNSR = 1 represents censoring, aligns broader ADaM convention (1 = TRUE). accommodate differences coding conventions, one can explicitly specify event censoring codes using code.event1 code.censoring arguments cifcurve(), cifplot(), cifpanel() polyreg(). allows users perform accurate survival analysis using functions cifmodeling package maintaining CDISC ADaM ADTTE coding scheme.","code":"polyreg(Event(AVAL, CNSR) ~ ARM, data = adtte,          outcome.type = \"survival\", code.event1=0, code.censoring=1)"},{"path":"https://gestimation.github.io/cifmodeling/articles/information.html","id":"processing-pipeline-of-cifcurve","dir":"Articles","previous_headings":"","what":"Processing pipeline of cifcurve()","title":"Additional information","text":"user-specified model formula Event() Surv() first parsed util_read_surv() extract time--event, event indicator, optional weights, stratification variables. components passed back-end estimators implemented src/calculateAJ_Rcpp.cpp. C++ routine supports weighted stratified data, heavy lifting Kaplan–Meier Aalen–Johansen estimates (associated -risk, event, censor counts) happens efficiently regardless input specified. error argument determines SEs computed. survival data (outcome.type = \"survival\") maps Greenwood (default) Tsiatis estimators, competing-risks data (outcome.type = \"competing-risk\") \"aalen\" reproduces classic Aalen standard errors \"delta\" implements delta method. SEs weighted Kaplan-Meier estimators calculated using formulas Zie Liu (2005).","code":""},{"path":"https://gestimation.github.io/cifmodeling/articles/information.html","id":"computational-formulas-in-cifcurve","dir":"Articles","previous_headings":"","what":"Computational formulas in cifcurve()","title":"Additional information","text":"Let t1<t2<⋯<tDt_1 < t_2 < \\cdots < t_D represent distinct event times. event time =1,…,Di=1,\\ldots,D, let YiY_i size risk set (number surviving observations) just prior tit_i. Survival data expected outcome.type = \"survival\". Let did_i number failures tit_i. Kaplan–Meier estimator survival function S(ti)S(t_i) . Kaplan–Meier estimator Ŝ(t)=∏ti≤t(1−diYi) \\hat{S}(t) = \\prod_{t_i \\le t} \\left( 1 - \\frac{d_i}{Y_i} \\right)  Note estimator defined right-continuous, events tit_i included estimate Ŝ(ti)\\hat{S}(t_i). variance standard error Kaplan–Meier estimator often calculated Greenwood formula. formula derived binomial argument, extension weighted case ad hoc. Alternatively, Tsiatis (1981) proposes slightly different formula based counting process argument includes weighted case. Greenwood variance Var{Ŝ(t)}=Ŝ(t)2∑ti≤tdiYi(Yi−di) \\textrm{Var}\\!\\left\\{\\hat{S}(t)\\right \\} = \\hat{S}(t)^2\\sum_{t_i \\le t} \\frac{d_i}{Y_i\\,(Y_i - d_i)} Tsiatis variance Var{Ŝ(t)}=Ŝ(t)2∑ti≤tdiYi2 \\textrm{Var}\\!\\left\\{\\hat{S}(t)\\right \\} = \\hat{S}(t)^2\\sum_{t_i \\le t} \\frac{d_i}{Y_i^2} Suppose survival data consists {Tj,dj,wj}\\{T_j, d_j, w_j\\}, independent sample right-censored survival data weights (j=1,...,Nj=1,...,N). Let diwd_i^w YiwY_i^w weighted number failures weighted number risk, respectively, time tit_i. weighted Kaplan–Meier estimator survival function S(t)S(t) Ŝ(t)=∏ti≤t(1−diwYiw). \\hat{S}(t) = \\prod_{t_i \\le t} \\left( 1 - \\frac{d_i^w}{Y_i^w} \\right).   Xie Liu (2005) proposed Greenwood-type variance weighted Kaplan–Meier estimator. Greenwood variance weighted Kaplan–Meier Var{Ŝ(t)}=Ŝ(t)2∑ti≤tdiwYiMiYiw(Yiw−diw), \\textrm{Var}\\!\\left\\{\\hat{S}(t)\\right \\} = \\hat{S}(t)^2\\sum_{t_i \\le t} \\frac{d_i^w Y_i}{M_i Y_i^w(Y_i^w - d_i^w)},   MiM_i adjustment factor defined Mi=(∑tj≥tiwj)2∑tj≥tiwj2. M_i = \\frac{\\left(\\sum_{t_j \\geq t_i} w_j \\right)^2}{\\sum_{t_j \\geq t_i} w_j^2}.   Tsiatis-type variance calculated follows spirits. Tsiatis variance weighted Kaplan–Meier Var{Ŝ(t)}=Ŝ(t)2∑ti≤tdiwYiMi(Yiw)2 \\textrm{Var}\\!\\left\\{\\hat{S}(t)\\right \\} = \\hat{S}(t)^2\\sum_{t_i \\le t} \\frac{d_i^w Y_i}{M_i (Y_i^w)^2}  Competing risks (outcome.type = \"competing-risk\") arise studies individuals exposed two mutually exclusive failure events. failure occurs, observe time event TT cause failure ϵ\\epsilon. Suppose ϵ=1\\epsilon=1 ϵ=2\\epsilon=2 represent event interest competing risk, respectively. Let dijd_{ij} number failures cause jj time tit_i, now total number failures tit_i di=di1+di2d_i = d_{i1} + d_{i2}. Aalen–Johansen estimator CIF cause ϵ=j\\epsilon=j . Aalen–Johansen estimator F̂j(t)=∑ti≤tdijYiŜ(ti−1). \\hat{F}_j(t) = \\sum_{t_i \\le t} \\frac{d_{ij}}{Y_i}\\,\\hat{S}(t_{-1}). Two variance estimators Aalen–Johansen estimator commonly used: one based counting process theory (Aalen, 1978) based delta method. Aalen variance Var{F̂j(t)}=∑ti≤t[F̂j(t)−F̂j(ti)]2di(Yi−1)(Yi−di)+∑ti≤tŜ2(ti−1)dij(Yi−dij)Yi2(Yi−1)−2∑ti≤t[F̂j(t)−F̂j(ti)]Ŝ(ti−1)dij(Yi−dij)Yi(Yi−di)(Yi−1). \\begin{aligned} \\textrm{Var}\\!\\left\\{\\hat{F}_j(t)\\right \\} &= \\sum_{t_i \\le t} \\bigl[\\hat{F}_j(t) - \\hat{F}_j(t_i)\\bigr]^2 \\frac{d_i}{(Y_i-1)(Y_i - d_i)} \\\\[2pt] &\\quad + \\sum_{t_i \\le t} \\hat{S}^2(t_{-1}) \\frac{d_{ij}\\,(Y_i - d_{ij})}{Y_i^2\\,(Y_i-1)} \\\\[2pt] &\\quad - 2 \\sum_{t_i \\le t} \\bigl[\\hat{F}_j(t) - \\hat{F}_j(t_i)\\bigr]\\, \\hat{S}(t_{-1}) \\frac{d_{ij}\\,(Y_i - d_{ij})}{Y_i\\,(Y_i - d_i)\\,(Y_i-1)}. \\end{aligned} Delta variance Var{F̂j(t)}=∑ti≤t[F̂j(t)−F̂j(ti)]2diYl(Yi−di)+∑ti≤tŜ2(ti−1)dij(Yi−dij)Yi3−2∑ti≤t[F̂j(t)−F̂j(ti)]Ŝ(ti−1)dijYi2. \\begin{aligned} \\textrm{Var}\\!\\left\\{\\hat{F}_j(t)\\right \\} &= \\sum_{t_i \\le t} \\bigl[\\hat{F}_j(t) - \\hat{F}_j(t_i)\\bigr]^2 \\frac{d_i}{Y_l\\,(Y_i - d_i)} \\\\[2pt] &\\quad + \\sum_{t_i \\le t} \\hat{S}^2(t_{-1}) \\frac{d_{ij}\\,(Y_i - d_{ij})}{Y_i^3} \\\\[2pt] &\\quad - 2 \\sum_{t_i \\le t} \\bigl[\\hat{F}_j(t) - \\hat{F}_j(t_i)\\bigr]\\, \\hat{S}(t_{-1}) \\frac{d_{ij}}{Y_i^2}. \\end{aligned}","code":""},{"path":"https://gestimation.github.io/cifmodeling/articles/information.html","id":"confidence-interval-options-in-cifcurve","dir":"Articles","previous_headings":"","what":"Confidence interval options in cifcurve()","title":"Additional information","text":"Standard errors default cifcurve() Greenwood SE outcome.type=\"survival\" delta SE outcome.type=\"competing-risk\". default cifcurve() rescales Greenwood/Tsiatis quantities std.err reported probability scale; set report.survfit.std.err = TRUE return conventional log-survival SEs survival::survfit(). Confidence intervals cifcurve() constructs intervals probability scale using requested transformation: \"arcsine-square root\"/\"arcsin\"/\"\" (default), \"plain, \"log\", \"log-log\", \"logit\". Passing \"none\"/\"n\" skips interval computation entirely. function exponentiates back probability scale, clips bounds [0, 1], replaces undefined values NA interval endpoints remain well behaved plots summaries.","code":""},{"path":"https://gestimation.github.io/cifmodeling/articles/information.html","id":"processing-pipeline-of-polyreg","dir":"Articles","previous_headings":"","what":"Processing pipeline of polyreg()","title":"Additional information","text":"Input pre-processing mirrors survival workflow calling util_check_outcome_type(), reg_check_effect.measure(), reg_check_input() parse format inputs, event codes, exposure levels, requested estimands createAnalysisDataset() builds modeling frame reg_normalize_covariate() rescales covariates default. Starting values obtained nuisance model fits via getInitialValues() getInitialValuesProportional(), , necessary, user-supplied data frame starting values. Inverse-probability--censoring weights survival competing-risks outcomes calculated calculateIPCW(), turn wraps calculateKM() C++ routine obtain Kaplan-Meier estimates censoring, proportional models assemble matrices calculateIPCWMatrix(). weighted estimating equations solved solveEstimatingEquation(), dispatches specific score functions estimating_equation_ipcw(), estimating_equation_survival(), estimating_equation_proportional() iterates nleqslv/Levenberg–Marquardt updates convergence criteria assessConvergence() met. Sandwich variances come calculateCov() calculateCovSurvival() rescaled back original covariate scale reg_normalize_estimate(), optional bootstrap intervals reuse solver inside boot resampling loop. resulting influence functions, weights, fitted CIFs retained diagnostic.statistics downstream diagnostics.","code":""},{"path":"https://gestimation.github.io/cifmodeling/articles/information.html","id":"reproducibility-and-conventions-for-polyreg","dir":"Articles","previous_headings":"","what":"Reproducibility and conventions for polyreg()","title":"Additional information","text":"convergence warnings appear, relax/tighten tolerances cap parameter bound (optim.parameter1 3) inspect report.optim.convergence = TRUE. necessary, try modifying optim.parameter, providing user-specified initial values, reducing number nuisance parameters (e.g. provide time.point grid contributes estimation using \"proportional-survival\" \"proportional-competing-risk\"). Set boot.seed reproducible bootstrap results. Match CDISC ADaM conventions via code.event1 = 0, code.censoring = 1 (, applicable, code.event2 competing events).","code":""},{"path":"https://gestimation.github.io/cifmodeling/articles/information.html","id":"key-arguments-of-msummary-that-are-helpful-when-reporting-polyreg-results","dir":"Articles","previous_headings":"","what":"Key arguments of msummary() that are helpful when reporting polyreg() results","title":"Additional information","text":"output – controls destination table (e.g., \"markdown\", \"latex\", \"html\", file path 'results/cif_table.docx'). coef_map coef_rename – renames model terms interpretability. statistic – uncertainty summaries display. Examples: statistic = \"p.value\" p-values, statistic = \"conf.int\" Wald CIs, statistic = \"t\" t statistics, statistic = \"z\" z statistics, instead SEs (default). can also supply multiple model summaries named list compare estimates across specifications single table. See vignette('modelsummary') comprehensive overview additional layout styling options.","code":""},{"path":"https://gestimation.github.io/cifmodeling/articles/overview.html","id":"quick-start","dir":"Articles","previous_headings":"","what":"Quick start","title":"Overview","text":"package compact, high-level extension existing survival ecosystem. provides unified interface Kaplan–Meier Aalen–Johansen curves, modern visualization, direct polytomous regression survival competing risks data. Aalen–Johansen cumulative incidence curves cifplot() competing risks data, censoring often coded 0, event interest 1, competing risks 2. diabetes.complications data frame, epsilon follows convention. panel.per.event = TRUE, cifplot() visualizes cumulative incidence functions (CIFs), CIF diabetic retinopathy (epsilon = 1) shown left CIF macrovascular complications (epsilon = 2) right.","code":"library(cifmodeling) data(diabetes.complications) cifplot(Event(t,epsilon)~fruitq, data=diabetes.complications,          outcome.type=\"competing-risk\", panel.per.event=TRUE)"},{"path":"https://gestimation.github.io/cifmodeling/articles/overview.html","id":"why-cifmodeling","dir":"Articles","previous_headings":"Quick start","what":"Why cifmodeling?","title":"Overview","text":"Unified interface Kaplan–Meier Aalen–Johansen curves, survival competing risks handled syntax. Publication-ready graphics built ggsurvfit ggplot2, including risk/estimate tables, censoring/competing-risks/intercurrent-events marks, multi-panel layouts. Coherent regression models CIFs, targeting familiar effect measures risk ratios (RR), odds ratios (), subdistribution hazard ratios (SHR). Modeling nuisance structure using polytomous log odds products ensures sum cause-specific CIFs exceed one, enables coherent modelling multiplicative effects.","code":""},{"path":"https://gestimation.github.io/cifmodeling/articles/overview.html","id":"tools-for-survival-and-competing-risks-analysis","dir":"Articles","previous_headings":"","what":"Tools for survival and competing risks analysis","title":"Overview","text":"clinical epidemiological research, analysts often need handle censoring, competing risks, intercurrent events (e.g. treatment switching), existing R packages typically separate tasks across different interfaces. cifmodeling provides unified, publication-ready toolkit integrates nonparametric estimation, regression modelling, visualization survival competing risks data. package centered around three tightly connected functions: cifplot() typically generates survival CIF curve marks represent censoring, competing risks intercurrent events. Multiple standard error (SE) estimators confidence interval (CI) methods supported. visualization built top ggsurvfit ggplot2. cifpanel() creates multi-panel figure survival/CIF curves, arranged either grid layout inset overlay. polyreg() fits coherent regression models CIFs using polytomous log odds products. functions adopt formula + data syntax, return tidy, publication-ready outputs, integrate seamlessly ggsurvfit modelsummary visualization reporting.","code":""},{"path":"https://gestimation.github.io/cifmodeling/articles/overview.html","id":"position-in-the-survival-ecosystem","dir":"Articles","previous_headings":"","what":"Position in the survival ecosystem","title":"Overview","text":"Several excellent R packages exist survival competing risks analysis. survival package provides canonical API survival data. combination ggsurvfit, survival::survfit() can produce publication-ready survival plots. CIF plots, however, integration general ecosystem less streamlined. cifmodeling fills gap offering cifplot() survival/CIF plots multi-panel figures via single, unified interface. Beyond providing unified interface, cifcurve() also extends survival::survfit() targeted ways. unweighted survival data, reproduces standard Kaplan–Meier estimator Greenwood Tsiatis SEs unified set CI transformations. competing risks data, computes Aalen–Johansen CIFs Aalen-type delta-method SEs. weighted survival competing risks data (e.g. inverse probability weighting), implements influence-function based SEs (Deng Wang 2025) well modified Greenwood- Tsiatis-type SEs (Xie Liu 2005), valid general positive weights. need fine-grained plot customisation, can compute estimator keep survfit-compatible object cifcurve() (supply survfit object) style using ggsurvfit/ggplot2 layers. words: use cifcurve() estimation, use cifplot() / cifpanel() quick, high-quality figures, fall back ggplot ecosystem want full artistic control. mets package specialised toolkit provides advanced methods competing risks analysis. cifmodeling::polyreg() focuses coherent modelling CIFs simultaneously estimate RR//SHR user-specified times. coherence can come longer runtimes large problems. prefer fitting separate regression models competing event specifically need Fine–Gray models (Fine Gray 1999) direct binomial model (Scheike, Zhang Gerds 2008), mets::cifreg() mets::binreg() excellent choices.","code":""},{"path":"https://gestimation.github.io/cifmodeling/articles/overview.html","id":"installation","dir":"Articles","previous_headings":"","what":"Installation","title":"Overview","text":"package implemented R relies Rcpp, nleqslv boot numerical back-end. examples document also use ggplot2, ggsurvfit, patchwork modelsummary tabulation plotting. Install core package companion packages :","code":"# Install cifmodeling from GitHub devtools::install_github(\"gestimation/cifmodeling\")  # Core dependencies install.packages(c(\"Rcpp\", \"nleqslv\", \"boot\"))  # Recommended packages for plotting and tabulation in this README install.packages(c(\"ggplot2\", \"ggsurvfit\", \"patchwork\", \"modelsummary\"))"},{"path":"https://gestimation.github.io/cifmodeling/articles/overview.html","id":"quality-control","dir":"Articles","previous_headings":"","what":"Quality control","title":"Overview","text":"cifmodeling includes extensive test suite built testthat, checks numerical accuracy graphical consistency core functions (cifcurve(), cifplot(), cifpanel(), polyreg()). estimators routinely compared related functions survival, cmprsk mets packages ensure consistency. package continuously tested GitHub Actions (Windows, macOS, Linux) maintain reproducibility CRAN-level compliance.","code":""},{"path":"https://gestimation.github.io/cifmodeling/articles/polyreg.html","id":"coherent-modeling-of-cifs-using-polytomous-log-odds-products","dir":"Articles","previous_headings":"","what":"Coherent modeling of CIFs using polytomous log odds products","title":"Direct polytomous regression","text":"analyzing competing risks data, standard semiparametric regression modeling treats cause separately two drawbacks: potential loss information due ignoring correlation causes incoherence modeling fails ensure sum cause-specific CIFs exceed one. Direct polytomous regression addresses challenges reparameterizing nuisance parameters using polytomous log odds products, naturally enforces sum restriction. approach applicable semiparametric models common multiplicative effects time well models focused specific time point. model specified three main components: Nuisance model: Describes relationship outcomes covariates (excluding exposure). Effect measures time points: Defines exposure effect estimated time point interest. Censoring adjustment: Specifies strata inverse probability weighting adjust dependent censoring.","code":""},{"path":"https://gestimation.github.io/cifmodeling/articles/polyreg.html","id":"nuisance-model","dir":"Articles","previous_headings":"","what":"1. Nuisance Model","title":"Direct polytomous regression","text":"nuisance.model argument specifies formula linking outcome covariates. format depends outcome type: Competing risks survival outcome: Use Surv() Event() time status variables. Binomial outcome: Use standard R formula notation. Default event codes: Competing risks outcome: 1 2 event types, 0 censoring. Survival outcome: 1 events, 0 censoring. Binomial outcome: 0 1. Event codes can customized using code.event1, code.event2, code.censoring. outcome.type argument must set : Effects CIFs specific time: \"competing-risk\" Effects risk specific time: \"survival\" Constant effects CIFs time: \"proportional-competing-risk\" Constant effects risk time: \"proportional-survival\" Effects risk binomial outcome: \"binomial\" Covariates included nuisance.model adjust confounding factors obtain unbiased exposure effect estimates.","code":""},{"path":"https://gestimation.github.io/cifmodeling/articles/polyreg.html","id":"effect-measures-and-time-points","dir":"Articles","previous_headings":"","what":"2. Effect measures and time points","title":"Direct polytomous regression","text":"Three effect measures available: Risk ratio (RR) Odds ratio () Subdistribution hazard ratio (SHR) Set desired measure using effect.measure1 , competing risks analysis, effect.measure2. time.point argument specifies follow-time effects estimated.","code":""},{"path":"https://gestimation.github.io/cifmodeling/articles/polyreg.html","id":"censoring-adjustment","dir":"Articles","previous_headings":"","what":"3. Censoring adjustment","title":"Direct polytomous regression","text":"IPCW method used adjust dependent censoring. Use strata= specify stratification variables. strata specified, Kaplan-Meier weights used.","code":""},{"path":"https://gestimation.github.io/cifmodeling/articles/polyreg.html","id":"estimator-and-confidence-intervals","dir":"Articles","previous_headings":"","what":"Estimator and confidence intervals","title":"Direct polytomous regression","text":"polyreg(), regression parameters calculated stratified IPCW estimators, asymptotically achieve minimum variance within class augmented IPCW estimators, without computational burden deriving augmentation terms cause. confidence intervals, polyreg() normally chooses single, simple method based outcome.type: \"competing-risk\", \"survival\", \"binomial\" — Wald CIs based sandwich variance \"proportional-competing-risk\", \"proportional-survival\" — Bootstrap CIs (normal approximation) time-point (non-proportional) models, default Wald CIs using sandwich variance directly influence functions. report.boot.conf = TRUE, variance instead estimated wild (multiplier) bootstrap applied influence functions (boot.multiplier, boot.replications), Wald CIs formed bootstrap variance. common effects (proportional models), boot() refits estimator replicate forms normal-approximate CIs bootstrap mean SD. desired, BCa CIs can requested via boot.bca = TRUE (proportional models). Users normally need set CI flags.","code":""},{"path":"https://gestimation.github.io/cifmodeling/articles/polyreg.html","id":"return","dir":"Articles","previous_headings":"","what":"Return","title":"Direct polytomous regression","text":"function returns object class \"polyreg\" following main components: coef — regression coefficients chosen effect-measure scale. vcov — variance–covariance matrix regression coefficients. diagnostic.statistics — data frame containing inverse probability weights, influence functions, predicted potential outcomes individual observations. summary — list event-wise tidy glance tables summarising estimated exposure effects. practice, users expected work usual S3 methods: Calling summary() “polyreg” object prints modelsummary-like table point estimates, CIs, p-values event, returns underlying summary list invisibly. summary component can passed external tools modelsummary broom additional formatting desired, external packages required inspect model fit.","code":"coef(fit)         # regression coefficients vcov(fit)         # variance–covariance matrix nobs(fit)         # number of observations used in the fit summary(fit)      # formatted, event-wise table printed to the console"},{"path":"https://gestimation.github.io/cifmodeling/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Shiro Tanaka. Author, maintainer, copyright holder. Shigetaka Kobari. Contributor. Chisato Honda. Contributor.","code":""},{"path":"https://gestimation.github.io/cifmodeling/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Tanaka S (2025). cifmodeling: Visualize Fit Direct Polytomous Regression Models CIFs. R package version 0.8.0, https://github.com/gestimation/cifmodeling, https://gestimation.github.io/cifmodeling/.","code":"@Manual{,   title = {cifmodeling: Visualize and Fit Direct Polytomous Regression Models to CIFs},   author = {Shiro Tanaka},   year = {2025},   note = {R package version 0.8.0, https://github.com/gestimation/cifmodeling},   url = {https://gestimation.github.io/cifmodeling/}, }"},{"path":[]},{"path":"https://gestimation.github.io/cifmodeling/index.html","id":"quick-start","dir":"","previous_headings":"","what":"Quick start","title":"cifmodeling","text":"package compact, high-level extension existing survival ecosystem. provides unified interface Kaplan–Meier Aalen–Johansen curves, modern visualization, direct polytomous regression survival competing risks data. Aalen–Johansen cumulative incidence curves cifplot() competing risks data, censoring often coded 0, event interest 1, competing risks 2. diabetes.complications data frame, epsilon follows convention. panel.per.event = TRUE, cifplot() visualizes cumulative incidence functions (CIFs), CIF diabetic retinopathy (epsilon = 1) shown left CIF macrovascular complications (epsilon = 2) right.","code":"library(cifmodeling) data(diabetes.complications) cifplot(Event(t,epsilon)~fruitq, data=diabetes.complications,          outcome.type=\"competing-risk\", panel.per.event=TRUE)"},{"path":"https://gestimation.github.io/cifmodeling/index.html","id":"why-cifmodeling","dir":"","previous_headings":"Quick start","what":"Why cifmodeling?","title":"cifmodeling","text":"Unified interface Kaplan–Meier Aalen–Johansen curves, survival competing risks handled syntax. Publication-ready graphics built ggsurvfit ggplot2, including risk/estimate tables, censoring/competing-risks/intercurrent-events marks, multi-panel layouts. Coherent regression models CIFs, targeting familiar effect measures (risk ratios, odds ratios subdistribution hazard ratios). Modeling nuisance structure using polytomous log odds products ensures sum cause-specific CIFs exceed one, enables coherent modelling multiplicative effects.","code":""},{"path":"https://gestimation.github.io/cifmodeling/index.html","id":"tools-for-survival-and-competing-risks-analysis","dir":"","previous_headings":"","what":"Tools for survival and competing risks analysis","title":"cifmodeling","text":"clinical epidemiological research, analysts often need handle censoring, competing risks, intercurrent events (e.g. treatment switching), existing R packages typically separate tasks across different interfaces. cifmodeling provides unified, publication-ready toolkit integrates nonparametric estimation, regression modelling, visualization survival competing risks data. package centered around three tightly connected functions: cifplot() typically generates survival CIF curve marks represent censoring, competing risks intercurrent events. Multiple standard error (SE) estimators confidence interval (CI) methods supported. visualization built top ggsurvfit ggplot2. cifpanel() creates multi-panel figure survival/CIF curves, arranged either grid layout inset overlay. polyreg() fits coherent regression models CIFs using polytomous log odds products. functions adopt formula + data syntax, return tidy, publication-ready outputs, integrate seamlessly ggsurvfit modelsummary visualization reporting.","code":""},{"path":"https://gestimation.github.io/cifmodeling/index.html","id":"position-in-the-survival-ecosystem","dir":"","previous_headings":"","what":"Position in the survival ecosystem","title":"cifmodeling","text":"Several excellent R packages exist survival competing risks analysis. survival package provides canonical API survival data. combination ggsurvfit, survival::survfit() can produce publication-ready survival plots. CIF plots, however, integration general ecosystem less streamlined. cifmodeling fills gap offering cifplot() survival/CIF plots multi-panel figures via single, unified interface. Beyond providing unified interface, cifcurve() also extends survival::survfit() targeted ways. unweighted survival data, reproduces standard Kaplan–Meier estimator Greenwood Tsiatis SEs unified set CI transformations. competing risks data, computes Aalen–Johansen CIFs Aalen-type delta-method SEs. weighted survival competing risks data (e.g. inverse probability weighting), implements influence-function based SEs (Deng Wang 2025) well modified Greenwood- Tsiatis-type SEs (Xie Liu 2005), valid general positive weights. need fine-grained plot customisation, can compute estimator keep survfit-compatible object cifcurve() (supply survfit object) style using ggsurvfit/ggplot2 layers. words: use cifcurve() estimation, use cifplot() / cifpanel() quick, high-quality figures, fall back ggplot ecosystem want full artistic control. mets package specialised toolkit provides advanced methods competing risks analysis. cifmodeling::polyreg() focuses coherent modelling CIFs simultaneously estimate RR//SHR user-specified times. coherence can come longer runtimes large problems. prefer fitting separate regression models competing event specifically need Fine–Gray models (Fine Gray 1999) direct binomial model (Scheike, Zhang Gerds 2008), mets::cifreg() mets::binreg() excellent choices.","code":""},{"path":"https://gestimation.github.io/cifmodeling/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"cifmodeling","text":"package implemented R relies Rcpp, nleqslv boot numerical back-end. examples document also use ggplot2, ggsurvfit, patchwork modelsummary tabulation plotting. Install core package companion packages :","code":"# Install cifmodeling from GitHub devtools::install_github(\"gestimation/cifmodeling\")  # Core dependencies install.packages(c(\"Rcpp\", \"nleqslv\", \"boot\"))  # Recommended packages for plotting and tabulation in this README install.packages(c(\"ggplot2\", \"ggsurvfit\", \"patchwork\", \"modelsummary\"))"},{"path":"https://gestimation.github.io/cifmodeling/index.html","id":"quality-control","dir":"","previous_headings":"","what":"Quality control","title":"cifmodeling","text":"cifmodeling includes extensive test suite built testthat, checks numerical accuracy graphical consistency core functions (cifcurve(), cifplot(), cifpanel(), polyreg()). estimators routinely compared related functions survival, cmprsk mets packages ensure consistency. package continuously tested GitHub Actions (Windows, macOS, Linux) maintain reproducibility CRAN-level compliance.","code":""},{"path":"https://gestimation.github.io/cifmodeling/index.html","id":"an-example-of-competing-risks-analysis","dir":"","previous_headings":"","what":"An example of competing risks analysis","title":"cifmodeling","text":"initial illustration, focus unadjusted cumulative incidence diabetic retinopathy (event 1) macrovascular complications (event 2) 8 years follow-. visualize covariate separately multiple strata supplied, set panel.per.variable = TRUE. variable right-hand side plotted panel, layout can controlled rows.columns.panel. figure contrasts CIFs diabetic retinopathy quartiles fruitq binary exposure fruitq1, low (Q1) high (Q2 4) intake fruit, generated cifplot(). add.conf=TRUE argument adds CIs plot. helps visualize statistical uncertainty estimated probabilities across exposure levels. using numeric variables stratification, discretize beforehand cut() factor(). labels x-axis (Time) y-axis (Cumulative incidence) panels default labels. Cumulative incidence curves per stratification variable second figure, censoring marks added along curve (add.censor.mark = TRUE) indicate individuals censored experiencing event. marks visualize timing frequency censoring, allowing clearer understanding loss--censoring patterns follow-. workflow differs slightly previous code. First, compute survfit-compatible object output1 using cifcurve() outcome.type=\"competing-risk\" calculating Aalen–Johansen estimator stratified fruitq1. , cifplot() used generate figure. label.y, label.x limit.x arguments also used customize axis labels limits. Cumulative incidence curves censor marks axis labels Next, competing risk marks added (add.competing.risk.mark = TRUE) indicate individuals experienced competing event (macrovascular complications) diabetic retinopathy. time points macrovascular complications occurred obtained output2 strata using helper function extract_time_to_event(). symbols help distinguish events due primary cause attributable competing causes. Note names competing.risk.time intercurrent.event.time must match strata labels used plot supplied user. Cumulative incidence curves competing risk marks label.strata another argument customizing labels, inputting survfit object, becomes invalid contain stratum information. Therefore, following code inputs formula data. label.strata used combining level.strata order.strata. level.strata specifies levels stratification variable corresponding label label.strata. levels specified level.strata displayed figure order defined order.strata. figure enclosed square generated, due style=\"framed\" specification. Cumulative incidence curves strata labels FRAMED style specifying add.estimate.table = TRUE, risks diabetic retinopathy (estimates CIFs) along CIs shown table bottom figure. Risk ratios specific time point (e.g. 8 years) competing events can jointly coherently estimated using polyreg() outcome.type=\"competing-risk\". code polyreg() , covariates included nuisance model (~1 specifies intercept ). effect low fruit intake fruitq1 estimated unadjusted risk ratio (effect.measure1=\"RR\") diabetic retinopathy (event 1) macrovascular complications (event 2) 8 years (time.point=8). summary() method prints event-wise table point estimates, CIs, p-values. Internally, table stored summary component \"polyreg\" object, compatible modelsummary ecosystem. want elaborate tables, can optionally pass object modelsummary::msummary(). case, regression coefficients included summary setting report.nuisance.parameter = TRUE. Model summaries can also exponentiated display risk ratios, odds ratios, subdistribution hazard ratios using exponentiate option.","code":"data(diabetes.complications) diabetes.complications$fruitq1 <- ifelse(   diabetes.complications$fruitq == \"Q1\",\"Q1\",\"Q2 to Q4\" ) cifplot(Event(t,epsilon)~fruitq+fruitq1, data=diabetes.complications,          outcome.type=\"competing-risk\",         add.conf=TRUE, add.censor.mark=FALSE,          add.competing.risk.mark=FALSE, panel.per.variable=TRUE) output1 <- cifcurve(Event(t,epsilon)~fruitq1, data=diabetes.complications,                      outcome.type=\"competing-risk\") cifplot(output1, add.conf=FALSE, add.risktable=FALSE,          add.censor.mark=TRUE, add.competing.risk.mark=FALSE,          label.y=\"CIF of diabetic retinopathy\", label.x=\"Years from registration\",         limits.x=c(0,8)) output2 <- extract_time_to_event(Event(t,epsilon)~fruitq1,                                   data=diabetes.complications, which_event=\"event2\") cifplot(output1, add.conf=FALSE, add.risktable=FALSE,          add.censor.mark=FALSE, add.competing.risk.mark=TRUE, competing.risk.time=output2,          label.y=\"CIF of diabetic retinopathy\", label.x=\"Years from registration\",         limits.x=c(0,8)) cifplot(Event(t,epsilon)~fruitq1, data=diabetes.complications,          outcome.type=\"competing-risk\", add.conf=FALSE, add.risktable=FALSE,          add.estimate.table=TRUE, add.censor.mark=FALSE, add.competing.risk.mark=TRUE,          competing.risk.time=output2, label.y=\"CIF of diabetic retinopathy\",          label.x=\"Years from registration\", limits.x=c(0,8),         label.strata=c(\"High intake\",\"Low intake\"), level.strata=c(\"Q2 to Q4\",\"Q1\"),          order.strata=c(\"Q1\", \"Q2 to Q4\"), style=\"framed\") output3 <- polyreg(nuisance.model=Event(t,epsilon)~1, exposure=\"fruitq1\",            data=diabetes.complications, effect.measure1=\"RR\", effect.measure2=\"RR\",            time.point=8, outcome.type=\"competing-risk\",            report.nuisance.parameter=TRUE) coef(output3) #> [1] -1.38313159 -0.30043942 -3.99147406 -0.07582595 vcov(output3) #>              [,1]         [,2]         [,3]         [,4] #> [1,]  0.017018160 -0.012351309  0.009609321 -0.008372500 #> [2,] -0.012351309  0.012789187 -0.006012254  0.006540183 #> [3,]  0.009609321 -0.006012254  0.048161715 -0.044070501 #> [4,] -0.008372500  0.006540183 -0.044070501  0.055992232 summary(output3) #>  #>                       event1        event2       #> ----------------------------------------------  #> Intercept             #>                       0.251         0.018        #>                       [0.194, 0.324]  [0.012, 0.028] #>                       (p=0.000)     (p=0.000)    #>  #> fruitq1, Q2 to Q4 vs 0  #>                       0.740         0.927        #>                       [0.593, 0.924]  [0.583, 1.474] #>                       (p=0.008)     (p=0.749)    #>  #> ----------------------------------------------  #>  #> effect.measure        RR at 8       RR at 8      #> n.events              279 in N = 978  79 in N = 978 #> median.follow.up      8             -            #> range.follow.up       [0.05, 11.00]  -            #> n.parameters          4             -            #> converged.by          Converged in objective function  -            #> nleqslv.message       Function criterion near zero  -"},{"path":"https://gestimation.github.io/cifmodeling/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"MIT License","title":"MIT License","text":"Copyright (c) 2025 cifmodeling authors Permission hereby granted, free charge, person obtaining copy software associated documentation files (“Software”), deal Software without restriction, including without limitation rights use, copy, modify, merge, publish, distribute, sublicense, /sell copies Software, permit persons Software furnished , subject following conditions: copyright notice permission notice shall included copies substantial portions Software. SOFTWARE PROVIDED “”, WITHOUT WARRANTY KIND, EXPRESS IMPLIED, INCLUDING LIMITED WARRANTIES MERCHANTABILITY, FITNESS PARTICULAR PURPOSE NONINFRINGEMENT. EVENT SHALL AUTHORS COPYRIGHT HOLDERS LIABLE CLAIM, DAMAGES LIABILITY, WHETHER ACTION CONTRACT, TORT OTHERWISE, ARISING , CONNECTION SOFTWARE USE DEALINGS SOFTWARE.","code":""},{"path":"https://gestimation.github.io/cifmodeling/reference/cif-stat-arguments.html","id":null,"dir":"Reference","previous_headings":"","what":"These arguments are shared by cifplot(), cifpanel(), and cifcurve(). — cif-stat-arguments","title":"These arguments are shared by cifplot(), cifpanel(), and cifcurve(). — cif-stat-arguments","text":"arguments shared cifplot(), cifpanel(), cifcurve().","code":""},{"path":"https://gestimation.github.io/cifmodeling/reference/cif-stat-arguments.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"These arguments are shared by cifplot(), cifpanel(), and cifcurve(). — cif-stat-arguments","text":"data data frame containing variables formula. weights Optional name weight variable data. Weights must nonnegative. subset.condition Optional character string giving logical condition subset data (default NULL). na.action function specifying action take missing values (default na.omit). outcome.type Character string specifying type time--event outcome. One \"survival\" (Kaplan–Meier) \"competing-risk\" (Aalen–Johansen). NULL (default), function automatically infers outcome type data: event variable two unique levels, \"competing-risk\" assumed; otherwise, \"survival\" used. can also use abbreviations \"S\" \"C\". Mixed ambiguous inputs (e.g., c(\"S\", \"C\")) trigger automatic detection based event coding. code.event1 Integer code event interest (default 1). code.event2 Integer code competing event (default 2). code.censoring Integer code censoring (default 0). error Character string specifying method SEs CIs used internally. \"survival\", choose one \"greenwood\" (default), \"tsiatis\", \"\". \"competing-risk\", choose one \"delta\" (default), \"aalen\", \"\". conf.type Character specifying method transformation confidence intervals used internally (default arcsine-square root). conf.int Numeric two-sided confidence level (default 0.95).","code":""},{"path":"https://gestimation.github.io/cifmodeling/reference/cif-visual-arguments.html","id":null,"dir":"Reference","previous_headings":"","what":"These arguments are shared by cifplot(), cifpanel(), and cifcurve(). — cif-visual-arguments","title":"These arguments are shared by cifplot(), cifpanel(), and cifcurve(). — cif-visual-arguments","text":"arguments shared cifplot(), cifpanel(), cifcurve().","code":""},{"path":"https://gestimation.github.io/cifmodeling/reference/cif-visual-arguments.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"These arguments are shared by cifplot(), cifpanel(), and cifcurve(). — cif-visual-arguments","text":"type.y Character string specifying y-scale: \"surv\" survival probabilities \"risk\" cumulative incidence (1 - survival simple survival settings). label.x Character x-axis label (default \"Time\"). label.y Character y-axis label (default chosen automatically outcome.type type.y, e.g. \"Survival\" \"Cumulative incidence\"). limits.x Numeric length-2 vector specifying x-axis limits. NULL, set fitted object (typically c(0, max(time))). limits.y Numeric length-2 vector specifying y-axis limits. NULL, set c(0, 1) probability-type outcomes. breaks.x Numeric vector x-axis breaks (default NULL). breaks.y Numeric vector y-axis breaks (default NULL). use.coord.cartesian Logical; TRUE, uses ggplot2::coord_cartesian() zooming instead changing scale limits (default FALSE). add.conf Logical; TRUE, adds CI ribbon (via ggsurvfit::add_confidence_interval()). Default TRUE. add.censor.mark Logical; TRUE, draws censoring marks curve (via ggsurvfit::add_censor_mark()). Default TRUE. shape.censor.mark Integer point shape used censoring marks (default 3). size.censor.mark Numeric point size used censoring marks (default 2). add.competing.risk.mark Logical; TRUE, draws time marks competing event (event 2). times supplied via competing.risk.time, function tries extract automatically data. Default FALSE. competing.risk.time named list numeric vectors. name must correspond strata label, numeric vector gives times competing event occurred stratum. Typically left list() filled internally. shape.competing.risk.mark Integer point shape competing-risk marks (default 16). size.competing.risk.mark Numeric point size competing-risk marks (default 2). add.intercurrent.event.mark Logical; TRUE, overlays user-specified intercurrent-event times per stratum. Default FALSE. intercurrent.event.time named list numeric vectors intercurrent events (names must match strata labels). shape.intercurrent.event.mark Integer point shape intercurrent-event marks (default 1). size.intercurrent.event.mark Numeric point size intercurrent-event marks (default 2). add.quantile Logical; TRUE, adds quantile reference line (via ggsurvfit::add_quantile()). Default FALSE. level.quantile Numeric quantile level shown (default 0.5 median). rows.columns.panel Optional integer vector c(nrow, ncol) controlling layout panel returned panel modes. NULL, automatic layout determined number subplots. style Character choosing base plot style: \"classic\", \"bold\", \"framed\", \"grid\", \"gray\" \"ggsurvfit\" (default \"classic\"). Abbreviations \"C\", \"B\", \"F\", \"G\" also accepted. palette Optional character vector specifying color palette use across strata. linewidth Optional numeric specifying line width curve (default 0.8). linetype Optional logical using different line types curve (default FALSE). font.family Character specifying font family: \"sans\",  \"serif\", \"mono\" (default \"sans\"). font.size Integer specifying base font size (default 12). print.panel Logical. TRUE, panel displays created internally printed automatically interactive sessions; otherwise returned invisibly modification (default FALSE). filename.ggsave Character; non-NULL, save plot file. width.ggsave Numeric width passed ggplot2::ggsave() (default 6). height.ggsave Numeric height passed ggplot2::ggsave() (default 6). dpi.ggsave Numeric DPI passed ggplot2::ggsave() (default 300).","code":""},{"path":"https://gestimation.github.io/cifmodeling/reference/cifcurve.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate the Kaplan–Meier estimator and the Aalen–Johansen estimator — cifcurve","title":"Calculate the Kaplan–Meier estimator and the Aalen–Johansen estimator — cifcurve","text":"Core estimation routine computes survfit-compatible object formula + data interface (Event() survival::Surv() LHS, stratification variable RHS necessary). Use want numbers (KM / CIF + SE + CI) plot (example ggsurvfit cifplot).","code":""},{"path":"https://gestimation.github.io/cifmodeling/reference/cifcurve.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate the Kaplan–Meier estimator and the Aalen–Johansen estimator — cifcurve","text":"","code":"cifcurve(   formula,   data,   weights = NULL,   subset.condition = NULL,   na.action = na.omit,   outcome.type = c(\"survival\", \"competing-risk\"),   code.event1 = 1,   code.event2 = 2,   code.censoring = 0,   error = NULL,   conf.type = \"arcsine-square root\",   conf.int = 0.95,   report.influence.function = FALSE,   report.survfit.std.err = FALSE,   engine = \"calculateAJ_Rcpp\",   prob.bound = 1e-07 )"},{"path":"https://gestimation.github.io/cifmodeling/reference/cifcurve.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate the Kaplan–Meier estimator and the Aalen–Johansen estimator — cifcurve","text":"formula model formula specifying time--event outcome LHS (typically Event(time, status) survival::Surv(time, status)) , optionally, stratification variable RHS. Unlike cifplot, function accept fitted survfit object. data data frame containing variables formula. weights Optional name weight variable data. Weights must nonnegative. subset.condition Optional character string giving logical condition subset data (default NULL). na.action function specifying action take missing values (default na.omit). outcome.type Character string specifying type time--event outcome. One \"survival\" (Kaplan–Meier) \"competing-risk\" (Aalen–Johansen). NULL (default), function automatically infers outcome type data: event variable two unique levels, \"competing-risk\" assumed; otherwise, \"survival\" used. can also use abbreviations \"S\" \"C\". Mixed ambiguous inputs (e.g., c(\"S\", \"C\")) trigger automatic detection based event coding. code.event1 Integer code event interest (default 1). code.event2 Integer code competing event (default 2). code.censoring Integer code censoring (default 0). error Character string specifying method SEs CIs used internally. \"survival\", choose one \"greenwood\" (default), \"tsiatis\", \"\". \"competing-risk\", choose one \"delta\" (default), \"aalen\", \"\". conf.type Character specifying method transformation confidence intervals used internally (default arcsine-square root). conf.int Numeric two-sided confidence level (default 0.95). report.influence.function Logical. TRUE engine = \"calculateAJ_Rcpp\", influence function also computed returned (default FALSE). report.survfit.std.err Logical. TRUE, report SE log-survival scale (survfit's convention). Otherwise SE probability scale. engine Character. One \"auto\", \"calculateKM\", \"calculateAJ_Rcpp\" (default \"calculateAJ_Rcpp\"). prob.bound Numeric lower bound used internally truncate probabilities away 0 1 (default 1e-7).","code":""},{"path":"https://gestimation.github.io/cifmodeling/reference/cifcurve.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate the Kaplan–Meier estimator and the Aalen–Johansen estimator — cifcurve","text":"survfit object. outcome.type=\"survival\", $surv survival function. outcome.type=\"competing-risk\", $surv equals 1 - CIF code.event1. SE CIs provided per  error, conf.type conf.int. enables independent use standard methods survfit : summary() — time--time estimates SEs CIs plot() — base R stepwise survival/CIF curves mean() — restricted mean survival estimates CIs quantile() — quantile estimates CIs Note methods (e.g., residuals.survfit) may supported.","code":""},{"path":[]},{"path":"https://gestimation.github.io/cifmodeling/reference/cifcurve.html","id":"typical-use-cases","dir":"Reference","previous_headings":"","what":"Typical use cases","title":"Calculate the Kaplan–Meier estimator and the Aalen–Johansen estimator — cifcurve","text":"outcome.type = \"survival\", thin wrapper around KM estimator chosen variance / CI transformation. outcome.type = \"competing-risk\", computes AJ estimator CIF code.event1. returned $surv 1 - CIF, .e. format ggsurvfit expects. Use cifplot want go straight figure; use cifcurve() want numbers.","code":""},{"path":[]},{"path":[]},{"path":[]},{"path":"https://gestimation.github.io/cifmodeling/reference/cifcurve.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Calculate the Kaplan–Meier estimator and the Aalen–Johansen estimator — cifcurve","text":"","code":"data(diabetes.complications) out_cifcurve <- cifcurve(Event(t,epsilon) ~ fruitq,                          data = diabetes.complications,                          outcome.type=\"competing-risk\") cifplot(out_cifcurve,         outcome.type = \"competing-risk\",         type.y = \"risk\",         add.risktable = FALSE,         label.y = \"CIF of diabetic retinopathy\",         label.x = \"Years from registration\")"},{"path":"https://gestimation.github.io/cifmodeling/reference/cifmodeling-package.html","id":null,"dir":"Reference","previous_headings":"","what":"cifmodeling: Visualize and Fit Direct Polytomous Regression Models to CIFs — cifmodeling-package","title":"cifmodeling: Visualize and Fit Direct Polytomous Regression Models to CIFs — cifmodeling-package","text":"compact unified toolkit survival competing risks analysis. 'cifcurve()' estimates visualizes Kaplan-Meier survival Aalen-Johansen cumulative incidence functions (CIFs) familiar 'survival::survfit'-like object. 'polyreg()' performs regression modeling CIFs based polytomous log odds products estimate risk ratios, odds ratios, subdistribution hazard ratios categorical exposure. functions adopt formula + data syntax, return tidy, publication-ready outputs, integrate seamlessly 'ggsurvfit' 'modelsummary' visualization. Key numerical routines implemented C++ via 'Rcpp'.","code":""},{"path":[]},{"path":"https://gestimation.github.io/cifmodeling/reference/cifmodeling-package.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"cifmodeling: Visualize and Fit Direct Polytomous Regression Models to CIFs — cifmodeling-package","text":"Maintainer: Shiro Tanaka gestimation@gmail.com (ORCID) [copyright holder] contributors: Shigetaka Kobari [contributor] Chisato Honda [contributor]","code":""},{"path":"https://gestimation.github.io/cifmodeling/reference/cifpanel.html","id":null,"dir":"Reference","previous_headings":"","what":"Arrange multiple survival/CIF plots in a panel display — cifpanel","title":"Arrange multiple survival/CIF plots in a panel display — cifpanel","text":"cifpanel() panel-building counterpart cifplot(). takes one model formulas (, alternatively, one formula several event-coding specifications) returns multi-panel figure, typically patchwork-compatible object. display options (axis labels, marks, style, ggsave options) shared cifplot(), per-panel legends risk tables suppressed avoid duplicated display. Typical use cases : Compare CIF (event 1) vs CIF (event 2) 1×2 layout. Compare survival/CIF curves across strata shared legend matched axes. Display plot enlarged y-axis inside full-scale plot.","code":""},{"path":"https://gestimation.github.io/cifmodeling/reference/cifpanel.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Arrange multiple survival/CIF plots in a panel display — cifpanel","text":"","code":"cifpanel(   plots = NULL,   formula = NULL,   formulas = NULL,   data = NULL,   weights = NULL,   subset.condition = NULL,   na.action = na.omit,   outcome.type = NULL,   code.events = NULL,   error = NULL,   conf.type = NULL,   conf.int = NULL,   type.y = NULL,   label.x = NULL,   label.y = NULL,   label.strata = NULL,   order.strata = NULL,   level.strata = NULL,   limits.x = NULL,   limits.y = NULL,   breaks.x = NULL,   breaks.y = NULL,   add.conf = NULL,   add.risktable = NULL,   add.estimate.table = NULL,   symbol.risk.table = NULL,   font.size.risk.table = NULL,   add.censor.mark = NULL,   shape.censor.mark = NULL,   size.censor.mark = NULL,   add.competing.risk.mark = NULL,   competing.risk.time = NULL,   shape.competing.risk.mark = NULL,   size.competing.risk.mark = NULL,   add.intercurrent.event.mark = NULL,   intercurrent.event.time = NULL,   shape.intercurrent.event.mark = NULL,   size.intercurrent.event.mark = NULL,   add.quantile = NULL,   level.quantile = NULL,   rows.columns.panel = c(1, 1),   inset.panel = FALSE,   title.panel = NULL,   subtitle.panel = NULL,   caption.panel = NULL,   tag.panel = NULL,   title.plot = NULL,   style = \"classic\",   palette = NULL,   linewidth = 0.8,   linetype = FALSE,   font.family = \"sans\",   font.size = 8,   legend.position = \"top\",   legend.collect = TRUE,   inset.left = 0.6,   inset.bottom = 0.05,   inset.right = 0.98,   inset.top = 0.45,   inset.align.to = c(\"panel\", \"plot\", \"full\"),   inset.legend.position = NULL,   print.panel = FALSE,   filename.ggsave = NULL,   width.ggsave = NULL,   height.ggsave = NULL,   dpi.ggsave = 300,   survfit.info = NULL,   axis.info = NULL,   visual.info = NULL,   panel.info = NULL,   style.info = NULL,   inset.info = NULL,   print.info = NULL,   ggsave.info = NULL,   engine = \"cifplot\",   ... )"},{"path":"https://gestimation.github.io/cifmodeling/reference/cifpanel.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Arrange multiple survival/CIF plots in a panel display — cifpanel","text":"plots Optional list existing ggplot objects arranged panel. plots supplied, new models fitted; plots used -. formula model formula specifying time--event outcome left-hand side (typically Event(time, status) Surv(time, status)) , optionally, stratification variable right-hand side. Unlike cifplot(), function accept fitted survfit object. formulas Optional list formulas. given, formula defines one panel. common way create “one variable per plot” panels. data data frame containing variables formula. weights Optional name weight variable data. Weights must nonnegative. subset.condition Optional character string giving logical condition subset data (default NULL). na.action function specifying action take missing values (default na.omit). outcome.type Character string specifying type time--event outcome. One \"survival\" (Kaplan–Meier) \"competing-risk\" (Aalen–Johansen). NULL (default), function automatically infers outcome type data: event variable two unique levels, \"competing-risk\" assumed; otherwise, \"survival\" used. can also use abbreviations \"S\" \"C\". Mixed ambiguous inputs (e.g., c(\"S\", \"C\")) trigger automatic detection based event coding. code.events Optional numeric length-3 vector c(event1, event2, censoring). supplied, overrides code.event1, code.event2, code.censoring (primarily used cifpanel() called panel.per.event = TRUE). error Character string specifying method SEs CIs used internally. \"survival\", choose one \"greenwood\" (default), \"tsiatis\", \"\". \"competing-risk\", choose one \"delta\" (default), \"aalen\", \"\". conf.type Character specifying method transformation confidence intervals used internally (default arcsine-square root). conf.int Numeric two-sided confidence level (default 0.95). type.y Character string specifying y-scale: \"surv\" survival probabilities \"risk\" cumulative incidence (1 - survival simple survival settings). label.x Character x-axis label (default \"Time\"). label.y Character y-axis label (default chosen automatically outcome.type type.y, e.g. \"Survival\" \"Cumulative incidence\"). limits.x Numeric length-2 vector specifying x-axis limits. NULL, set fitted object (typically c(0, max(time))). limits.y Numeric length-2 vector specifying y-axis limits. NULL, set c(0, 1) probability-type outcomes. breaks.x Numeric vector x-axis breaks (default NULL). breaks.y Numeric vector y-axis breaks (default NULL). add.conf Logical; TRUE, adds CI ribbon (via ggsurvfit::add_confidence_interval()). Default TRUE. add.censor.mark Logical; TRUE, draws censoring marks curve (via ggsurvfit::add_censor_mark()). Default TRUE. shape.censor.mark Integer point shape used censoring marks (default 3). size.censor.mark Numeric point size used censoring marks (default 2). add.competing.risk.mark Logical; TRUE, draws time marks competing event (event 2). times supplied via competing.risk.time, function tries extract automatically data. Default FALSE. competing.risk.time named list numeric vectors. name must correspond strata label, numeric vector gives times competing event occurred stratum. Typically left list() filled internally. shape.competing.risk.mark Integer point shape competing-risk marks (default 16). size.competing.risk.mark Numeric point size competing-risk marks (default 2). add.intercurrent.event.mark Logical; TRUE, overlays user-specified intercurrent-event times per stratum. Default FALSE. intercurrent.event.time named list numeric vectors intercurrent events (names must match strata labels). shape.intercurrent.event.mark Integer point shape intercurrent-event marks (default 1). size.intercurrent.event.mark Numeric point size intercurrent-event marks (default 2). add.quantile Logical; TRUE, adds quantile reference line (via ggsurvfit::add_quantile()). Default FALSE. level.quantile Numeric quantile level shown (default 0.5 median). rows.columns.panel Optional integer vector c(nrow, ncol) controlling layout panel returned panel modes. NULL, automatic layout determined number subplots. inset.panel Logical. FALSE (default), panels arranged regular grid using patchwork::wrap_plots() plot_layout(). TRUE, function switches “inset mode”: first plot becomes main plot second plot (second) drawn top inset. Additional plots beyond second ignored inset mode. Use grid mode display two panels (inset.panel = FALSE). title.panel, subtitle.panel, caption.panel Character annotations applied whole panel layout (individual plots). passed patchwork::plot_annotation() useful creating figure-like outputs (title + subfigures + caption). tag.panel Passed patchwork::plot_annotation() auto-label individual panels (e.g. \"\", \"B\", \"C\"). Typical values \"\", \"1\", \"\". See ?patchwork::plot_annotation. title.plot Character vector titles panel order drawn. Length-1 values recycled panels. inset mode, first element refers main plot second (present) inset. style Character choosing base plot style: \"classic\", \"bold\", \"framed\", \"grid\", \"gray\" \"ggsurvfit\" (default \"classic\"). Abbreviations \"C\", \"B\", \"F\", \"G\" also accepted. palette Optional character vector specifying color palette use across strata. linewidth Optional numeric specifying line width curve (default 0.8). linetype Optional logical using different line types curve (default FALSE). font.family Character specifying font family: \"sans\",  \"serif\", \"mono\" (default \"sans\"). font.size Integer specifying base font size (default 12). legend.collect Logical; TRUE, try collect single legend panels (passed patchwork). Default TRUE. inset.left, inset.bottom, inset.right, inset.top Numeric values range [0, 1] define inset box fractions reference area. inset.left / inset.right control horizontal position, inset.bottom / inset.top control vertical position. Values interpreted “left/bottom” reference. example, inset.left = 0.4, inset.right = 1.0 draws inset right 60% reference area. inset.align.Character string specifying coordinate system inset box. One \"panel\" (default; box placed relative panel area, .e. plotting region excluding outer titles/margins), \"plot\" (relative entire plot area, including axes titles main plot), \"full\" (relative full patchwork canvas). argument passed patchwork::inset_element(). inset.legend.position Optional legend position inset plot . NULL (default), inset plot keeps whatever legend position defined (often means legend also inset). Set, example, \"none\" hide legend inside inset, still showing main plot's legend. print.panel Logical. TRUE, panel displays created internally printed automatically interactive sessions; otherwise returned invisibly modification (default FALSE). filename.ggsave Character; non-NULL, save plot file. width.ggsave Numeric width passed ggplot2::ggsave() (default 6). height.ggsave Numeric height passed ggplot2::ggsave() (default 6). dpi.ggsave Numeric DPI passed ggplot2::ggsave() (default 300). survfit.info, axis.info, visual.info, panel.info, style.info, print.info, ggsave.info, inset.info Internal lists used programmatic control. intended direct user input. ... Additional arguments forwarded internal cifplot_single() calls build panel. Use pass low-level options competing.risk.time, intercurrent.event.time, styling overrides.","code":""},{"path":"https://gestimation.github.io/cifmodeling/reference/cifpanel.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Arrange multiple survival/CIF plots in a panel display — cifpanel","text":"\"cifpanel\" object (returned invisibly), list least following elements: list.plot: list ggplot objects, one per panel patchwork: patchwork object representing composed panel plot: reserved backwards compatibility (always NULL) metadata fields mirroring cifplot() (information fitted curves display settings) print.panel = TRUE, patchwork object printed interactive sessions addition returned.","code":""},{"path":[]},{"path":"https://gestimation.github.io/cifmodeling/reference/cifpanel.html","id":"overview","dir":"Reference","previous_headings":"","what":"Overview","title":"Arrange multiple survival/CIF plots in a panel display — cifpanel","text":"cifpanel() composes multiple survival/CIF plots single figure. panel, estimates curves via cifcurve() renders cifplot(). can supply single formula reused across panels list formulas (one per panel). provided, formulas wins.","code":""},{"path":"https://gestimation.github.io/cifmodeling/reference/cifpanel.html","id":"outcome-type-amp-event-coding","dir":"Reference","previous_headings":"","what":"Outcome type & event coding","title":"Arrange multiple survival/CIF plots in a panel display — cifpanel","text":"Use outcome.type set per-panel estimator (\"survival\"=KM, \"competing-risk\"=AJ). Alternatively, pass code.events per panel infer type: length 2 = survival: c(event1, censor) length 3 = competing-risk: c(event1, event2, censor) outcome.type NULL, function infers panel code.events[[]] length. given, outcome.type takes precedence.","code":""},{"path":"https://gestimation.github.io/cifmodeling/reference/cifpanel.html","id":"panel-wise-vs-shared-arguments","dir":"Reference","previous_headings":"","what":"Panel-wise vs shared arguments","title":"Arrange multiple survival/CIF plots in a panel display — cifpanel","text":"Panel layout specified length-2 vector rows.columns.panel. function can also automatically determine panel count following order: (1) plots supplied, length defines number plots, (2) else formulas supplied, length defines number plots, (3) else code.events supplied, length defines number plots together formula, (4) otherwise rows.columns.panel=c(1,1). Many arguments accept scalar (recycled panels) list/vector (one entry per panel). Precedence: panel-wise explicit values > shared scalar > internal defaults. Length-1 inputs recycled.","code":""},{"path":"https://gestimation.github.io/cifmodeling/reference/cifpanel.html","id":"grid-vs-inset-composition","dir":"Reference","previous_headings":"","what":"Grid vs inset composition","title":"Arrange multiple survival/CIF plots in a panel display — cifpanel","text":"Grid mode (inset.panel = FALSE, default): plots arranged patchwork::wrap_plots() plot_layout(). legend.collect = TRUE, legends collected across panels possible. Inset mode (inset.panel = TRUE): second plot overlaid first using patchwork::inset_element(). first two plots used; extra plots ignored. Control inset box inset.left, inset.bottom, inset.right, inset.top, reference frame via inset.align.(\"panel\", \"plot\", \"full\").","code":""},{"path":"https://gestimation.github.io/cifmodeling/reference/cifpanel.html","id":"advanced-panel-controls-forwarded-to-cifplot-","dir":"Reference","previous_headings":"","what":"Advanced panel controls (forwarded to cifplot())","title":"Arrange multiple survival/CIF plots in a panel display — cifpanel","text":"following arguments allow per-panel control supplying vectors/lists, shared control supplying scalars. forwarded cifplot(). formula formulas: one formula list formulas; entry creates panel. data, outcome.type, code.events, type.y: recycled across panels unless list supplied per-panel control. rows.columns.panel: specification grid layout c(rows, cols). inset.panel: inset layout. title.panel, subtitle.panel, caption.panel, title.plot: overall titles captions. tag.panel: panel tag style (e.g., \"\", \"\", \"1\"). label.x, label.y, limits.x, limits.y, breaks.x, breaks.y: shared axis control unless list supplied per-panel control.","code":""},{"path":[]},{"path":"https://gestimation.github.io/cifmodeling/reference/cifpanel.html","id":"plot-layers-toggles-","dir":"Reference","previous_headings":"","what":"Plot layers (toggles)","title":"Arrange multiple survival/CIF plots in a panel display — cifpanel","text":"(Time marks inputs competing.risk.time / intercurrent.event.time can given via ... needed; names must match strata labels.)","code":""},{"path":"https://gestimation.github.io/cifmodeling/reference/cifpanel.html","id":"legend-amp-annotations","dir":"Reference","previous_headings":"","what":"Legend & annotations","title":"Arrange multiple survival/CIF plots in a panel display — cifpanel","text":"legend.position: \"top\", \"right\", \"bottom\", \"left\", \"none\" (applies panels). Grid mode: legend.collect = TRUE attempts shared legend. Panel annotations: title.panel, subtitle.panel, caption.panel. Tagging: tag.panel passed patchwork::plot_annotation(). inset mode, title.plot = c(title_base, title_inset) labels two plots.","code":""},{"path":"https://gestimation.github.io/cifmodeling/reference/cifpanel.html","id":"export-optional-","dir":"Reference","previous_headings":"","what":"Export (optional)","title":"Arrange multiple survival/CIF plots in a panel display — cifpanel","text":"filename.ggsave non-NULL, composed panel saved ggsave() using width.ggsave, height.ggsave, dpi.ggsave. Otherwise, function returns objects without saving. Notes Mixed panel types supported (e.g., AJ panel 1; KM panel 2). formulas shorter grid capacity, empty slots ignored. supplying vectors/lists per panel, lengths must match number panels; length-1 inputs recycled; otherwise error thrown. CIF displays, set type.y = \"risk\". survival scale, use type.y = NULL = \"surv\". ADaM-style data, use code.events=c(0,1) code.event1 = 0, code.censoring = 1. Additional graphical options (e.g., theme) can added post-hoc element list.plot composed patchwork.","code":""},{"path":[]},{"path":[]},{"path":"https://gestimation.github.io/cifmodeling/reference/cifpanel.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Arrange multiple survival/CIF plots in a panel display — cifpanel","text":"","code":"data(diabetes.complications) output1 <- cifpanel(   title.panel = \"A comparison of cumulative incidence of competing events\",   rows.columns.panel = c(1,2),   formula = Event(t, epsilon) ~ fruitq,   data = diabetes.complications,   outcome.type = \"competing-risk\",   code.events = list(c(1,2,0), c(2,1,0)),   label.y = c(\"Diabetic retinopathy\", \"Macrovascular complications\"),   label.x = \"Years from registration\",   subtitle.panel = \"Stratified by fruit intake\",   caption.panel  = \"Data: diabetes.complications\",   title.plot = c(\"Diabetic retinopathy\", \"Macrovascular complications\"),   legend.position = \"bottom\",   legend.collect=TRUE ) print(output1)   output2 <- cifplot(Event(t,epsilon) ~ fruitq,                    data = diabetes.complications,                    outcome.type=\"competing-risk\",                    code.event1=2,                    code.event2=1,                    add.conf = FALSE,                    add.risktable = FALSE,                    label.y=\"CIF of macrovascular complications\",                    label.x=\"Years from registration\") output3 <- cifplot(Event(t,epsilon) ~ fruitq,                    data = diabetes.complications,                    outcome.type=\"competing-risk\",                    code.event1=2,                    code.event2=1,                    add.conf = FALSE,                    add.risktable = FALSE,                    label.y=\"\",                    label.x=\"\",                    limits.y=c(0,0.15)) #> Warning: Some point estimates fall outside `limits.y` = [0, 0.15]. output4 <- list(a = output2$plot, b = output3$plot) output5 <- cifpanel(plots = output4,          inset.panel = TRUE,          inset.left = 0.40, inset.bottom = 0.45,          inset.right = 1.00, inset.top = 0.95,          inset.align.to = \"plot\",          inset.legend.position = \"none\",          legend.position = \"bottom\") print(output5)"},{"path":"https://gestimation.github.io/cifmodeling/reference/cifplot.html","id":null,"dir":"Reference","previous_headings":"","what":"Generate a survival/CIF curve with marks that represent censoring, competing risks and intermediate events — cifplot","title":"Generate a survival/CIF curve with marks that represent censoring, competing risks and intermediate events — cifplot","text":"function generates survival CIF curve unified formula–data interface existing survfit object. formula supplied, LHS typically Event() survivai::Surv(), RHS specifies optional stratification variable. addition curves , cifplot() can add numbers--risk tables, tables point estimates CIs, censoring marks, competing-risk marks, intercurrent-event marks. complex multi-panel displays, cifplot() can internally call cifpanel() via several “panel modes” (per event, per variable, censoring-focused). function returns object whose plot component regular ggplot object can modified (compatible + %+%).","code":""},{"path":"https://gestimation.github.io/cifmodeling/reference/cifplot.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generate a survival/CIF curve with marks that represent censoring, competing risks and intermediate events — cifplot","text":"","code":"cifplot(   formula_or_fit,   data = NULL,   weights = NULL,   subset.condition = NULL,   na.action = na.omit,   outcome.type = c(\"competing-risk\", \"survival\"),   code.event1 = 1,   code.event2 = 2,   code.censoring = 0,   code.events = NULL,   error = NULL,   conf.type = \"arcsine-square root\",   conf.int = 0.95,   type.y = NULL,   label.x = \"Time\",   label.y = NULL,   label.strata = NULL,   level.strata = NULL,   order.strata = NULL,   limits.x = NULL,   limits.y = NULL,   breaks.x = NULL,   breaks.y = NULL,   use.coord.cartesian = FALSE,   add.conf = TRUE,   add.risktable = TRUE,   add.estimate.table = FALSE,   symbol.risk.table = \"square\",   font.size.risk.table = 3,   add.censor.mark = TRUE,   shape.censor.mark = 3,   size.censor.mark = 2,   add.competing.risk.mark = FALSE,   competing.risk.time = list(),   shape.competing.risk.mark = 16,   size.competing.risk.mark = 2,   add.intercurrent.event.mark = FALSE,   intercurrent.event.time = list(),   shape.intercurrent.event.mark = 1,   size.intercurrent.event.mark = 2,   add.quantile = FALSE,   level.quantile = 0.5,   panel.per.event = FALSE,   panel.censoring = FALSE,   panel.per.variable = FALSE,   panel.mode = \"auto\",   rows.columns.panel = NULL,   style = \"classic\",   palette = NULL,   linewidth = 0.8,   linetype = FALSE,   font.family = \"sans\",   font.size = 12,   legend.position = \"top\",   print.panel = FALSE,   filename.ggsave = NULL,   width.ggsave = 6,   height.ggsave = 6,   dpi.ggsave = 300,   survfit.info = NULL,   axis.info = NULL,   visual.info = NULL,   panel.info = NULL,   style.info = NULL,   inset.info = NULL,   print.info = NULL,   ggsave.info = NULL,   ... )"},{"path":"https://gestimation.github.io/cifmodeling/reference/cifplot.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Generate a survival/CIF curve with marks that represent censoring, competing risks and intermediate events — cifplot","text":"formula_or_fit Either model formula survfit object. formula supplied, LHS must Event(time, status) Surv(time, status). RHS specifies optional stratification variable. data data frame containing variables formula. weights Optional name weight variable data. Weights must nonnegative. subset.condition Optional character string giving logical condition subset data (default NULL). na.action function specifying action take missing values (default na.omit). outcome.type Character string specifying type time--event outcome. One \"survival\" (Kaplan–Meier) \"competing-risk\" (Aalen–Johansen). NULL (default), function automatically infers outcome type data: event variable two unique levels, \"competing-risk\" assumed; otherwise, \"survival\" used. can also use abbreviations \"S\" \"C\". Mixed ambiguous inputs (e.g., c(\"S\", \"C\")) trigger automatic detection based event coding. code.event1 Integer code event interest (default 1). code.event2 Integer code competing event (default 2). code.censoring Integer code censoring (default 0). code.events Optional numeric length-3 vector c(event1, event2, censoring). supplied, overrides code.event1, code.event2, code.censoring (primarily used cifpanel() called panel.per.event = TRUE). error Character string specifying method SEs CIs used internally. \"survival\", choose one \"greenwood\" (default), \"tsiatis\", \"\". \"competing-risk\", choose one \"delta\" (default), \"aalen\", \"\". conf.type Character specifying method transformation confidence intervals used internally (default arcsine-square root). conf.int Numeric two-sided confidence level (default 0.95). type.y Character string specifying y-scale: \"surv\" survival probabilities \"risk\" cumulative incidence (1 - survival simple survival settings). label.x Character x-axis label (default \"Time\"). label.y Character y-axis label (default chosen automatically outcome.type type.y, e.g. \"Survival\" \"Cumulative incidence\"). label.strata Character vector named character vector specifying labels strata. Names (present) must match (re-ordered) underlying strata levels. Note: panel modes active (panel.per.variable = TRUE, panel.per.event = TRUE, panel.censoring = TRUE, panel.mode = \"auto\" actually dispatches panel), strata labels suppressed avoid duplicated legends across sub-plots. level.strata Optional character vector giving full set expected strata levels. provided, order.strata label.strata validated application. order.strata Optional character vector specifying display order strata legend / risk table. Specify levels strata. Levels listed dropped. limits.x Numeric length-2 vector specifying x-axis limits. NULL, set fitted object (typically c(0, max(time))). limits.y Numeric length-2 vector specifying y-axis limits. NULL, set c(0, 1) probability-type outcomes. breaks.x Numeric vector x-axis breaks (default NULL). breaks.y Numeric vector y-axis breaks (default NULL). use.coord.cartesian Logical; TRUE, uses ggplot2::coord_cartesian() zooming instead changing scale limits (default FALSE). add.conf Logical; TRUE, adds CI ribbon (via ggsurvfit::add_confidence_interval()). Default TRUE. add.risktable Logical; TRUE, adds numbers--risk table plot. Default TRUE. Note: panel mode active, tables suppressed. add.estimate.table Logical; TRUE, adds table estimates CIs. Default FALSE. Note: panel mode active, tables suppressed. symbol.risk.table Character specifying symbol used risk table denote strata: \"square\", \"circle\", \"triangle\" (default \"square\"). font.size.risk.table Numeric font size texts risk / estimate tables (default 3). add.censor.mark Logical; TRUE, draws censoring marks curve (via ggsurvfit::add_censor_mark()). Default TRUE. shape.censor.mark Integer point shape used censoring marks (default 3). size.censor.mark Numeric point size used censoring marks (default 2). add.competing.risk.mark Logical; TRUE, draws time marks competing event (event 2). times supplied via competing.risk.time, function tries extract automatically data. Default FALSE. competing.risk.time named list numeric vectors. name must correspond strata label, numeric vector gives times competing event occurred stratum. Typically left list() filled internally. shape.competing.risk.mark Integer point shape competing-risk marks (default 16). size.competing.risk.mark Numeric point size competing-risk marks (default 2). add.intercurrent.event.mark Logical; TRUE, overlays user-specified intercurrent-event times per stratum. Default FALSE. intercurrent.event.time named list numeric vectors intercurrent events (names must match strata labels). shape.intercurrent.event.mark Integer point shape intercurrent-event marks (default 1). size.intercurrent.event.mark Numeric point size intercurrent-event marks (default 2). add.quantile Logical; TRUE, adds quantile reference line (via ggsurvfit::add_quantile()). Default FALSE. level.quantile Numeric quantile level shown (default 0.5 median). panel.per.event Logical. Explicit panel mode. TRUE outcome.type == \"competing-risk\", cifplot() internally calls cifpanel() display two event-specific CIFs side--side (event 1 event 2) using reversed code.events. Ignored non-competing-risk outcomes. panel.censoring Logical. Explicit panel mode. TRUE outcome.type == \"survival\", cifplot() internally calls cifpanel() display KM curves (event, censor) (censor, event) censoring patterns can inspected. panel.per.variable Logical. Explicit panel mode. TRUE RHS formula multiple covariates (e.g. ~ + b + c), function produces panel variable RHS used stratification factor. panel.mode Character specifying Automatic panel mode. \"auto\" none panel.per.variable, panel.per.event, panel.censoring set TRUE, function chooses suitable panel mode automatically: () formula RHS 2+ variables, behaves like panel.per.variable = TRUE; (ii) otherwise, outcome.type == \"competing-risk\", behaves like panel.per.event = TRUE; (iii) otherwise, outcome.type == \"survival\", behaves like panel.censoring = TRUE. panel mode explicitly specified, panel.mode ignored. rows.columns.panel Optional integer vector c(nrow, ncol) controlling layout panel returned panel modes. NULL, automatic layout determined number subplots. style Character choosing base plot style: \"classic\", \"bold\", \"framed\", \"grid\", \"gray\" \"ggsurvfit\" (default \"classic\"). Abbreviations \"C\", \"B\", \"F\", \"G\" also accepted. palette Optional character vector specifying color palette use across strata. linewidth Optional numeric specifying line width curve (default 0.8). linetype Optional logical using different line types curve (default FALSE). font.family Character specifying font family: \"sans\",  \"serif\", \"mono\" (default \"sans\"). font.size Integer specifying base font size (default 12). legend.position Character specifying legend position: \"top\", \"right\", \"bottom\", \"left\", \"none\" (default \"top\"). print.panel Logical. TRUE, panel displays created internally printed automatically interactive sessions; otherwise returned invisibly modification (default FALSE). filename.ggsave Character; non-NULL, save plot file. width.ggsave Numeric width passed ggplot2::ggsave() (default 6). height.ggsave Numeric height passed ggplot2::ggsave() (default 6). dpi.ggsave Numeric DPI passed ggplot2::ggsave() (default 300). survfit.info, axis.info, visual.info, panel.info, style.info, print.info, ggsave.info Internal lists used programmatic control. intended direct user input.","code":""},{"path":"https://gestimation.github.io/cifmodeling/reference/cifplot.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Generate a survival/CIF curve with marks that represent censoring, competing risks and intermediate events — cifplot","text":"\"cifplot\" object (list) least following elements: plot: ggplot object containing main plot patchwork: reserved compatibility panel displays (typically NULL single-panel plots) survfit.info, axis.info, visual.info, panel.info, style.info, inset.info, print.info, ggsave.info: internal lists storing fitted curves display settings version: character string giving cifmodeling version used call: original function call object returned invisibly. panel mode active print.panel = TRUE, panel also printed interactive sessions.","code":""},{"path":[]},{"path":"https://gestimation.github.io/cifmodeling/reference/cifplot.html","id":"typical-use-cases","dir":"Reference","previous_headings":"","what":"Typical use cases","title":"Generate a survival/CIF curve with marks that represent censoring, competing risks and intermediate events — cifplot","text":"Draw one survival/CIF curve set exposure groups (e.g., treatment vs control). Call cifpanel() simplified code create panel displaying plots multiple stratified survival/CIF curves CIF curves event type. Add CIs censor/competing-risk/intercurrent-event marks. Add risk table display number risk estimated survival probabilities CIFs CIs point time.","code":""},{"path":"https://gestimation.github.io/cifmodeling/reference/cifplot.html","id":"key-arguments-shared-with-cifcurve-","dir":"Reference","previous_headings":"","what":"Key arguments shared with cifcurve()","title":"Generate a survival/CIF curve with marks that represent censoring, competing risks and intermediate events — cifplot","text":"Outcome type estimator outcome.type = \"survival\": Kaplan–Meier estimator outcome.type = \"competing-risk\": Aalen–Johansen estimator Confidence intervals conf.int sets two-sided level (default 0.95) conf.type chooses transformation (\"arcsine-square root\", \"plain\", \"log\", \"log-log\", \"logit\", \"none\") error chooses estimator SE (\"greenwood\", \"tsiatis\" \"\" survival curves \"delta\", \"aalen\" \"\" CIFs)","code":""},{"path":"https://gestimation.github.io/cifmodeling/reference/cifplot.html","id":"key-arguments-for-cifplot-","dir":"Reference","previous_headings":"","what":"Key arguments for cifplot()","title":"Generate a survival/CIF curve with marks that represent censoring, competing risks and intermediate events — cifplot","text":"Data visualization add.conf adds CIs ggplot2-based plot add.competing.risk.mark add.intercurrent.event.mark adds symbols describe competing risks intercurrent events addition conventional censoring marks add.censor.mark add.risktable adds numbers risk add.estimate.table adds time--time estimates CIs add.quantile adds reference line chosen quantile level Plot customization type.y chooses y-axis (\"surv\" survival \"risk\" 1-survival/CIF) limits.x, limits.y, breaks.x, breaks.y: numeric vectors axis control style specifies appearance plot (\"classic\", \"bold\", \"framed\", \"grid\", \"gray\" \"ggsurvfit\") palette specifies color curve (e.g. palette=c(\"blue1\", \"cyan3\", \"navy\", \"deepskyblue3\"))) Panel display panel.per.variable produces multiple survival/CIF curves per stratification variable specified formula panel.per.event produces CIF curves event type panel.censoring produces Kaplan–Meier curves (event, censor) (censor, event) censoring patterns can inspected panel.mode uses automatic panel mode panel.per.event = TRUE, two panels created code.events = list(c(e1, e2, c), c(e2, e1, c)), code.events = c(e1, e2, c) input coding event1, event2, censoring. Common legend collected default (legend.collect = TRUE). Numeric stratification variables normalized automatically. Columns fewer nine distinct numeric values coerced factors; columns nine distinct numeric values split median “median” “median” strata.","code":""},{"path":"https://gestimation.github.io/cifmodeling/reference/cifplot.html","id":"advanced-control-not-required-for-typical-use","dir":"Reference","previous_headings":"","what":"Advanced control not required for typical use","title":"Generate a survival/CIF curve with marks that represent censoring, competing risks and intermediate events — cifplot","text":"arguments fine-tune internal estimation figure appearance. users need change defaults.","code":""},{"path":[]},{"path":[]},{"path":[]},{"path":[]},{"path":[]},{"path":"https://gestimation.github.io/cifmodeling/reference/cifplot.html","id":"export","dir":"Reference","previous_headings":"","what":"Export","title":"Generate a survival/CIF curve with marks that represent censoring, competing risks and intermediate events — cifplot","text":"Notes CIF displays, set type.y = \"risk\". survival scale, use type.y = NULL = \"surv\". Event coding can controlled via code.event1, code.event2, code.censoring. ADaM-style data, use code.event1 = 0, code.censoring = 1. Per-stratum time lists names identical plotted strata labels.","code":""},{"path":[]},{"path":[]},{"path":"https://gestimation.github.io/cifmodeling/reference/cifplot.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Generate a survival/CIF curve with marks that represent censoring, competing risks and intermediate events — cifplot","text":"","code":"data(diabetes.complications) cifplot(Event(t,epsilon) ~ fruitq,         data = diabetes.complications,         outcome.type=\"competing-risk\",         add.risktable = FALSE,         label.y='CIF of diabetic retinopathy',         label.x='Years from registration')"},{"path":"https://gestimation.github.io/cifmodeling/reference/diabetes.complications.html","id":null,"dir":"Reference","previous_headings":"","what":"Data from a cohort study of patients with type 2 diabetes — diabetes.complications","title":"Data from a cohort study of patients with type 2 diabetes — diabetes.complications","text":"Anonymized data cohort study patients type 2 diabetes followed ocular macro-vascular complications.","code":""},{"path":"https://gestimation.github.io/cifmodeling/reference/diabetes.complications.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Data from a cohort study of patients with type 2 diabetes — diabetes.complications","text":"","code":"data(diabetes.complications)"},{"path":"https://gestimation.github.io/cifmodeling/reference/diabetes.complications.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Data from a cohort study of patients with type 2 diabetes — diabetes.complications","text":"data frame 978 observations 19 variables: t Follow-time years. epsilon Event type indicator (0 = censored, 1 = diabetic retinopathy, 2 = macro-vascular complication). fruit Fruit intake (g/day). fruitq Quartile fruit intake. fruitq1 Binary indicator low fruit intake. strata Stratum used inverse probability censoring weights. age Age baseline (years). sex Sex coded 0 = woman, 1 = man. bmi Body mass index baseline. hba1c Hemoglobin A1c (%). diabetes_duration Duration diabetes (years). drug_oha Indicator oral hypoglycemic agent use. drug_insulin Indicator insulin use. sbp Systolic blood pressure (mmHg). ldl Low-density lipoprotein cholesterol (mg/dL). hdl High-density lipoprotein cholesterol (mg/dL). tg Triglycerides (mg/dL). current_smoker Indicator current smoking status. alcohol_drinker Indicator current alcohol drinking. ltpa Leisure-time physical activity (METs).","code":""},{"path":"https://gestimation.github.io/cifmodeling/reference/diabetes.complications.html","id":"source","dir":"Reference","previous_headings":"","what":"Source","title":"Data from a cohort study of patients with type 2 diabetes — diabetes.complications","text":"Anonymized data supplied package documentation demonstration purposes.","code":""},{"path":"https://gestimation.github.io/cifmodeling/reference/diabetes.complications.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Data from a cohort study of patients with type 2 diabetes — diabetes.complications","text":"variables include follow-time, cause-specific event indicators, exposure indicators fruit intake, censoring strata, set covariates used package vignettes.","code":""},{"path":"https://gestimation.github.io/cifmodeling/reference/diabetes.complications.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Data from a cohort study of patients with type 2 diabetes — diabetes.complications","text":"","code":"data(diabetes.complications) str(diabetes.complications) #> 'data.frame':\t978 obs. of  20 variables: #>  $ t                : num  8.62 8.51 7.79 8.91 8.94 ... #>  $ epsilon          : int  0 0 0 0 0 1 0 1 0 1 ... #>  $ strata           : int  1 4 3 1 2 3 1 3 3 1 ... #>  $ fruit            : num  75 26.8 64.3 5.35 211.05 ... #>  $ fruitq1          : int  0 1 0 1 0 1 0 0 0 0 ... #>  $ age              : int  45 68 63 49 55 61 56 64 67 58 ... #>  $ sex              : int  0 0 0 0 0 0 0 1 1 1 ... #>  $ bmi              : num  21.5 18.3 23.9 22.9 18.7 23.4 20.1 28.6 25.6 22.8 ... #>  $ hba1c            : num  6.97 8.02 6.89 7.24 8.28 ... #>  $ diabetes_duration: num  4.2 2.9 14.3 4.2 16.3 8.9 13 6.1 20.3 13.3 ... #>  $ drug_oha         : int  0 0 1 1 1 1 0 1 0 0 ... #>  $ drug_insulin     : int  0 1 0 0 0 0 1 0 0 1 ... #>  $ sbp              : int  124 128 164 126 136 146 118 136 136 142 ... #>  $ ldl              : num  187.3 87.6 74.6 95.7 50.5 ... #>  $ hdl              : num  58.1 57.2 35 34.7 55.7 36.7 57.7 52.2 60.5 55.4 ... #>  $ tg               : num  123 71 252 83 139 181 71 57 91 115 ... #>  $ current_smoker   : int  0 1 1 1 1 0 1 0 0 0 ... #>  $ alcohol_drinker  : int  0 0 1 0 0 0 0 0 0 0 ... #>  $ ltpa             : num  52.5 11.03 4.38 9.38 12.38 ... #>  $ fruitq           : Factor w/ 4 levels \"Q1\",\"Q2\",\"Q3\",..: 2 1 2 1 4 1 4 2 2 2 ..."},{"path":"https://gestimation.github.io/cifmodeling/reference/Event.html","id":null,"dir":"Reference","previous_headings":"","what":"Create a survival or competing-risks response — Event","title":"Create a survival or competing-risks response — Event","text":"lightweight response constructor used cifcurve() polyreg() pass survival competing-risks data via model formula.","code":""},{"path":"https://gestimation.github.io/cifmodeling/reference/Event.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create a survival or competing-risks response — Event","text":"","code":"Event(time, event, allowed = getOption(\"cifmodeling.allowed\", c(0, 1, 2)))"},{"path":"https://gestimation.github.io/cifmodeling/reference/Event.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create a survival or competing-risks response — Event","text":"time Numeric vector follow-times (non-negative). event Integer (0=censor, 1,2,...) character/factor vector whose levels numeric codes \"0\",\"1\",\"2\",... competing events. allowed Numeric vector acceptable event codes.","code":""},{"path":"https://gestimation.github.io/cifmodeling/reference/Event.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create a survival or competing-risks response — Event","text":"object class \"Event\" (2-column matrix) columns time, event.","code":""},{"path":[]},{"path":[]},{"path":"https://gestimation.github.io/cifmodeling/reference/Event.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create a survival or competing-risks response — Event","text":"","code":"## event: 0=censor, 1=primary, 2=competing data(diabetes.complications) output <- polyreg(   nuisance.model = Event(t, epsilon) ~ +1,   exposure = \"fruitq1\",   data = diabetes.complications,   effect.measure1 = \"RR\",   effect.measure2 = \"RR\",   time.point = 8,   outcome.type = \"competing-risk\" )"},{"path":"https://gestimation.github.io/cifmodeling/reference/extract_time_to_event.html","id":null,"dir":"Reference","previous_headings":"","what":"Extract per-stratum event times from a formula and data — extract_time_to_event","title":"Extract per-stratum event times from a formula and data — extract_time_to_event","text":"Creates list event times can passed downstream visualization analysis functions competing.risk.time intercurrent.event.time cifplot() cifpanel(). Event types specified event 1, event 2, censoring, user-specified codes.","code":""},{"path":"https://gestimation.github.io/cifmodeling/reference/extract_time_to_event.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Extract per-stratum event times from a formula and data — extract_time_to_event","text":"","code":"extract_time_to_event(   formula,   data,   subset.condition = NULL,   na.action = na.omit,   which_event = c(\"event2\", \"event1\", \"censor\", \"censoring\", \"user_specified\"),   code.event1 = 1,   code.event2 = 2,   code.censoring = 0,   user_specified_code = NULL,   readUniqueTime = TRUE,   dropEmpty = TRUE )"},{"path":"https://gestimation.github.io/cifmodeling/reference/extract_time_to_event.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Extract per-stratum event times from a formula and data — extract_time_to_event","text":"formula model formula specifying outcome (optionally) strata(). data data frame containing variables formula. subset.condition Optional expression (character string) defining subset data analyse. Defaults NULL. na.action Function handle missing values (default: na.omit stats). which_event One \"event1\", \"event2\", \"censor\", \"censoring\", \"user_specified\", indicating event type extract times . code.event1, code.event2, code.censoring Integer codes representing event censoring categories. Defaults 1, 2, 0, respectively. user_specified_code which_event = \"user_specified\", integer event code extract (e.g., 3 intercurrent event). readUniqueTime Logical TRUE, unique sorted time points returned stratum. dropEmpty Logical TRUE (default), strata events dropped returned list. Set FALSE retain empty strata numeric(0) vectors (useful diagnostics consistent list length).","code":""},{"path":"https://gestimation.github.io/cifmodeling/reference/extract_time_to_event.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Extract per-stratum event times from a formula and data — extract_time_to_event","text":"named list numeric vectors, element corresponds stratum contains event times selected type.","code":""},{"path":"https://gestimation.github.io/cifmodeling/reference/extract_time_to_event.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Extract per-stratum event times from a formula and data — extract_time_to_event","text":"function typically used internally plotting model functions, can also called directly inspect per-stratum event-time structure data frame.","code":""},{"path":[]},{"path":[]},{"path":"https://gestimation.github.io/cifmodeling/reference/extract_time_to_event.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Extract per-stratum event times from a formula and data — extract_time_to_event","text":"","code":"data(diabetes.complications) output <- extract_time_to_event(Event(t,epsilon) ~ fruitq,                                 data = diabetes.complications,                                 which_event = \"event2\") cifplot(Event(t,epsilon) ~ fruitq,         data = diabetes.complications,         outcome.type=\"competing-risk\",         add.conf=FALSE,         add.risktable=FALSE,         add.censor.mark=FALSE,         add.competing.risk.mark=TRUE,         competing.risk.time=output,         label.y='CIF of diabetic retinopathy',         label.x='Years from registration')"},{"path":"https://gestimation.github.io/cifmodeling/reference/methods.html","id":null,"dir":"Reference","previous_headings":"","what":"Methods for polyreg model objects — methods","title":"Methods for polyreg model objects — methods","text":"S3 methods extract coefficients, variance–covariance matrices, sample size, formatted summaries objects returned polyreg().","code":""},{"path":"https://gestimation.github.io/cifmodeling/reference/methods.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Methods for polyreg model objects — methods","text":"","code":"# S3 method for class 'polyreg' coef(object, ...)  # S3 method for class 'polyreg' vcov(object, type = c(\"default\", \"sandwich\", \"bootstrap\"), ...)  # S3 method for class 'polyreg' nobs(object, ...)  # S3 method for class 'polyreg' summary(object, ...)  # S3 method for class 'summary.polyreg' print(summary, digits = 3, ...)"},{"path":"https://gestimation.github.io/cifmodeling/reference/methods.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Methods for polyreg model objects — methods","text":"object \"polyreg\" object returned polyreg(). ... arguments passed methods. type Character string; one \"default\", \"sandwich\", \"bootstrap\". \"default\", function chooses sandwich bootstrap variance based original polyreg() settings, using outcome.type, report.sandwich.conf, report.boot.conf. (Used vcov.polyreg().) digits Number digits print parameter estimates. (Used print.summary.polyreg().) x \"summary.polyreg\" object, returned summary.polyreg().","code":""},{"path":"https://gestimation.github.io/cifmodeling/reference/methods.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Methods for polyreg model objects — methods","text":"coef.polyreg() returns numeric vector regression coefficients. vcov.polyreg() returns variance–covariance matrix. nobs.polyreg() returns number observations. summary.polyreg() returns list tidy glance summaries event. print.summary.polyreg() called side effect printing formatted, modelsummary-like table console returns x invisibly.","code":""},{"path":[]},{"path":"https://gestimation.github.io/cifmodeling/reference/polyreg-methods.html","id":null,"dir":"Reference","previous_headings":"","what":"Methods for polyreg objects — polyreg-methods","title":"Methods for polyreg objects — polyreg-methods","text":"S3 methods extract coefficients, variance–covariance matrices, sample size, formatted summaries objects returned polyreg().","code":""},{"path":"https://gestimation.github.io/cifmodeling/reference/polyreg-methods.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Methods for polyreg objects — polyreg-methods","text":"","code":"# S3 method for class 'polyreg' coef(object, ...)  # S3 method for class 'polyreg' vcov(object, type = c(\"default\", \"sandwich\", \"bootstrap\"), ...)  # S3 method for class 'polyreg' nobs(object, ...)  # S3 method for class 'polyreg' summary(object, ...)  # S3 method for class 'summary.polyreg' print(summary, digits = 3, ...)"},{"path":"https://gestimation.github.io/cifmodeling/reference/polyreg-methods.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Methods for polyreg objects — polyreg-methods","text":"object \"polyreg\" object returned polyreg(). ... arguments passed methods. type Character string; one \"default\", \"sandwich\", \"bootstrap\". \"default\", function chooses sandwich bootstrap variance based original polyreg() settings, using outcome.type, report.sandwich.conf, report.boot.conf. (Used vcov.polyreg().) digits Number digits print parameter estimates. (Used print.summary.polyreg().) x \"summary.polyreg\" object, returned summary.polyreg().","code":""},{"path":"https://gestimation.github.io/cifmodeling/reference/polyreg-methods.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Methods for polyreg objects — polyreg-methods","text":"coef.polyreg() returns numeric vector regression coefficients. vcov.polyreg() returns variance–covariance matrix. nobs.polyreg() returns number observations. summary.polyreg() returns list tidy glance summaries event. print.summary.polyreg() called side effect printing formatted, modelsummary-like table console returns x invisibly.","code":""},{"path":[]},{"path":"https://gestimation.github.io/cifmodeling/reference/polyreg.html","id":null,"dir":"Reference","previous_headings":"","what":"Fit coherent regression models of CIFs using polytomous log odds products — polyreg","title":"Fit coherent regression models of CIFs using polytomous log odds products — polyreg","text":"polyreg() fits regression models CIFs, targeting familiar effect measures (risk ratios, odds ratios subdistribution hazard ratios). Modeling nuisance structure using polytomous log odds products ensures sum cause-specific CIFs exceed one, enables coherent modelling multiplicative effects. function follows familiar formula–data workflow: outcome covariates exposure specified formula nuisance.model (Event() survival::Surv() LHS), exposure interest given separate variable name exposure. fitted object contains tidy summaries exposure effects (point estimates, SEs, CIs, p-values) can summarised summary.polyreg() formatted external tools modelsummary::modelsummary().","code":""},{"path":"https://gestimation.github.io/cifmodeling/reference/polyreg.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Fit coherent regression models of CIFs using polytomous log odds products — polyreg","text":"","code":"polyreg(   nuisance.model,   exposure,   strata = NULL,   data,   subset.condition = NULL,   na.action = na.omit,   code.event1 = 1,   code.event2 = 2,   code.censoring = 0,   code.exposure.ref = 0,   effect.measure1 = \"RR\",   effect.measure2 = \"RR\",   time.point = NULL,   outcome.type = \"competing-risk\",   conf.level = 0.95,   report.nuisance.parameter = FALSE,   report.optim.convergence = FALSE,   report.sandwich.conf = TRUE,   report.boot.conf = NULL,   boot.bca = FALSE,   boot.multiplier = \"rademacher\",   boot.replications = 200,   boot.seed = 46,   nleqslv.method = \"Newton\",   optim.parameter1 = 1e-06,   optim.parameter2 = 1e-06,   optim.parameter3 = 100,   optim.parameter4 = 50,   optim.parameter5 = 50,   optim.parameter6 = 50,   optim.parameter7 = 1e-10,   optim.parameter8 = 1e-06,   optim.parameter9 = 1e-06,   optim.parameter10 = 40,   optim.parameter11 = 0.025,   optim.parameter12 = 2,   optim.parameter13 = 0.5,   data.initial.values = NULL,   normalize.covariate = TRUE,   terminate.time.point = TRUE,   prob.bound = 1e-07 )"},{"path":"https://gestimation.github.io/cifmodeling/reference/polyreg.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Fit coherent regression models of CIFs using polytomous log odds products — polyreg","text":"nuisance.model formula describing outcome nuisance covariates, excluding exposure interest. LHS must Event(time, status) survival::Surv(time, status). exposure character string giving name categorical exposure variable data. strata Optional character string name stratification variable used adjust dependent censoring (default NULL). data data frame containing outcome, exposure nuisance covariates referenced nuisance.model. subset.condition Optional character string giving logical condition subset data (default NULL). na.action function specifying action take missing values (default na.omit). code.event1 Integer code event interest (default 1). code.event2 Integer code competing event (default 2). code.censoring Integer code censoring (default 0). code.exposure.ref Integer code identifying reference exposure category (default 0). effect.measure1 Character string specifying effect measure primary event. Supported values \"RR\", \"\" \"SHR\". effect.measure2 Character string specifying effect measure competing event. Supported values \"RR\", \"\" \"SHR\". time.point Numeric time point exposure effect evaluated time-point models. Required \"competing-risk\" \"survival\" outcomes. outcome.type Character string selecting outcome type. Valid values \"competing-risk\", \"survival\", \"binomial\", \"proportional-survival\", \"proportional-competing-risk\". default \"competing-risk\". explicitly set NULL, polyreg() attempts infer outcome type data: event variable two distinct levels, \"competing-risk\" assumed; otherwise, \"survival\" assumed. Abbreviations \"S\" \"C\" accepted; mixed ambiguous inputs trigger automatic detection event coding data. conf.level Confidence level Wald-type intervals (default 0.95). report.nuisance.parameter Logical; TRUE, returned object includes estimates nuisance model parameters (default FALSE). report.optim.convergence Logical; TRUE, optimization convergence summaries returned (default FALSE). report.sandwich.conf Logical NULL. TRUE, confidence intervals based sandwich variance computed. FALSE, omitted (default TRUE). confidence interval default time-point models (\"outcome.type=competing-risk\", \"survival\" \"binomial\") available otherwise. report.boot.conf Logical NULL. TRUE, bootstrap confidence intervals computed. FALSE, omitted. NULL, function chooses based outcome.type (default NULL). confidence interval default proportional models (outcome.type=\"proportional-competing-risk\" \"proportional-survival\"). boot.bca Logical indicating bootstrap confidence interval method. Use TRUE bias-corrected accelerated intervals FALSE normal approximation (default FALSE). boot.multiplier Character string specifying wild bootstrap weight distribution. One \"rademacher\", \"mammen\" \"gaussian\" (default \"rademacher\"). boot.replications Integer giving number bootstrap replications (default 200). boot.seed Numeric seed used resampling bootstrap. nleqslv.method Character string specifying solver used nleqslv(). Available choices \"Broyden\" \"Newton\". optim.parameter1 Numeric tolerance convergence outer loop (default 1e-6). optim.parameter2 Numeric tolerance convergence inner loop (default 1e-6). optim.parameter3 Numeric constraint absolute value parameters (default 100). optim.parameter4 Integer maximum number outer loop iterations (default 50). optim.parameter5 Integer maximum number nleqslv iterations per outer iteration (default 50). optim.parameter6 Integer maximum number iterations Levenberg-Marquardt routine (default 50). optim.parameter7 Numeric convergence tolerance Levenberg-Marquardt routine (default 1e-10). optim.parameter8 Numeric tolerance updating Hessian Levenberg-Marquardt routine (default 1e-6). optim.parameter9 Numeric starting value Levenberg-Marquardt damping parameter lambda (default 1e-6). optim.parameter10 Numeric upper bound lambda Levenberg-Marquardt routine (default 40). optim.parameter11 Numeric lower bound lambda Levenberg-Marquardt routine (default 0.025). optim.parameter12 Numeric multiplicative increment applied lambda Levenberg-Marquardt step successful (default 2). optim.parameter13 Numeric multiplicative decrement applied lambda Levenberg-Marquardt step unsuccessful (default 0.5). data.initial.values Optional data frame providing starting values optimization (default NULL). normalize.covariate Logical indicating whether covariates centered scaled prior optimization (default TRUE). terminate.time.point Logical indicating whether time points contribute estimation terminated min max follow-times exposure level (default TRUE). prob.bound Numeric lower bound used internally truncate probabilities away 0 1 (default 1e-5).","code":""},{"path":"https://gestimation.github.io/cifmodeling/reference/polyreg.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Fit coherent regression models of CIFs using polytomous log odds products — polyreg","text":"list class \"polyreg\" containing fitted exposure effects supporting results. Key components methods include: coef: regression coefficients chosen effect-measure scale vcov: variance–covariance matrix regression coefficients diagnostic.statistics: data frame inverse probability weights, influence function contributions, predicted potential outcomes summary: event-wise tidy/glance summaries used summary.polyreg() modelsummary::modelsummary() additional elements storing convergence information internal tuning parameters. Standard S3 methods available: coef.polyreg(), vcov.polyreg(), nobs.polyreg(), summary.polyreg().","code":""},{"path":[]},{"path":"https://gestimation.github.io/cifmodeling/reference/polyreg.html","id":"overview","dir":"Reference","previous_headings":"","what":"Overview","title":"Fit coherent regression models of CIFs using polytomous log odds products — polyreg","text":"polyreg() implements log odds product modeling CIFs user-specified time points, focusing multiplicative effects categorical exposure, constant effects time like Cox regression Fine-Gray models. estimates multiplicative effects risk ratios, odds ratios, subdistribution hazard ratios, ensuring probabilities across competing events sum one. achieved reparameterization using polytomous log odds products, fits -called effect-measure models nuisance models multiple competing events simultaneously. Additionally, polyreg() supports direct binomial regression survival outcomes Richardson model binomial outcomes, use log odds products.","code":""},{"path":"https://gestimation.github.io/cifmodeling/reference/polyreg.html","id":"key-arguments","dir":"Reference","previous_headings":"","what":"Key arguments","title":"Fit coherent regression models of CIFs using polytomous log odds products — polyreg","text":"nuisance.model: formula Event() survivai::Surv() describing outcome nuisance covariates, excluding exposure interest. exposure: name categorical exposure variable effect.measure1 effect.measure2: effect measures event1 event2 (\"RR\", \"\" \"SHR\"). outcome.type: type outcome variable (\"competing-risk\", \"survival\", \"binomial\", \"proportional-survival\" \"proportional-competing-risk\"). time.point: time point(s) exposure effect evaluated. Required \"competing-risk\" \"survival\" outcomes. strata: name stratification variable used IPCW adjustment dependent censoring.","code":""},{"path":"https://gestimation.github.io/cifmodeling/reference/polyreg.html","id":"outcome-type-and-event-status-coding","dir":"Reference","previous_headings":"","what":"Outcome type and event status coding","title":"Fit coherent regression models of CIFs using polytomous log odds products — polyreg","text":"outcome.type argument must set : Effects cumulative incidence probabilities specific time: \"competing-risk\". Effects risk specific time: \"survival\". Common effects cumulative incidence probabilities time: \"proportional-competing-risk\". Common effects risk time: \"proportional-survival\". Effects risk binomial outcome: \"binomial\".","code":""},{"path":"https://gestimation.github.io/cifmodeling/reference/polyreg.html","id":"effect-measures-for-categorical-exposure","dir":"Reference","previous_headings":"","what":"Effect measures for categorical exposure","title":"Fit coherent regression models of CIFs using polytomous log odds products — polyreg","text":"Choose effect scale event 1 (optionally) event 2: RR: risk ratio time.point common time. : odds ratio time.point common time. SHR: subdistribution hazard ratio common time.","code":""},{"path":[]},{"path":"https://gestimation.github.io/cifmodeling/reference/polyreg.html","id":"optimization-amp-solver-controls-advanced-","dir":"Reference","previous_headings":"","what":"Optimization & solver controls (advanced)","title":"Fit coherent regression models of CIFs using polytomous log odds products — polyreg","text":"polyreg() solves estimating equations optional inner routines.","code":""},{"path":[]},{"path":"https://gestimation.github.io/cifmodeling/reference/polyreg.html","id":"downstream-use","dir":"Reference","previous_headings":"","what":"Downstream use","title":"Fit coherent regression models of CIFs using polytomous log odds products — polyreg","text":"polyreg() returns object class \"polyreg\" contains regression coefficients (coef), variance-covariance matrix (vcov) list event-wise tidy glance tables (summary). Users typically access results via S3 methods: coef() — extract regression coefficients. vcov() — extract variance–covariance matrix (sandwich bootstrap, depending outcome.type report.* arguments). nobs() — number observations used fit. summary() — print event-wise, modelsummary-like table estimates, CIs p-values, return underlying list tidy/glance tables invisibly. backward compatibility, components named coefficient cov may also present mirror coef vcov, respectively. summary component can passed external functions modelsummary() formatting, desired.","code":""},{"path":"https://gestimation.github.io/cifmodeling/reference/polyreg.html","id":"reproducibility-and-conventions","dir":"Reference","previous_headings":"","what":"Reproducibility and conventions","title":"Fit coherent regression models of CIFs using polytomous log odds products — polyreg","text":"convergence warnings appear, relax/tighten tolerances cap parameter bound (optim.parameter1–3) inspect output report.optim.convergence = TRUE. necessary, modify optim.parameter, provide user-specified initial values, reduce number nuisance parameters (e.g., provide small set time points contributing estimation using \"proportional-survival\" \"proportional-competing-risk\"). Set boot.seed reproducible bootstrap results. Match CDISC ADaM conventions via code.event1 = 0, code.censoring = 1 (, applicable, code.event2 competing events).","code":""},{"path":[]},{"path":[]},{"path":"https://gestimation.github.io/cifmodeling/reference/polyreg.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Fit coherent regression models of CIFs using polytomous log odds products — polyreg","text":"","code":"data(diabetes.complications) output <- polyreg(   nuisance.model = Event(t, epsilon) ~ +1,   exposure = \"fruitq1\",   data = diabetes.complications,   effect.measure1 = \"RR\",   effect.measure2 = \"RR\",   time.point = 8,   outcome.type = \"competing-risk\" )  coef(fit) #> Error: object 'fit' not found vcov(fit) #> Error: object 'fit' not found nobs(fit) #> Error: object 'fit' not found summary(fit) #> Error: object 'fit' not found"},{"path":"https://gestimation.github.io/cifmodeling/reference/prostate.html","id":null,"dir":"Reference","previous_headings":"","what":"Data from a prostate cancer trial in Byer & Green (1980) — prostate","title":"Data from a prostate cancer trial in Byer & Green (1980) — prostate","text":"Anonymized data randomized clinical trial prostate cancer published Byer & Green (1980).","code":""},{"path":"https://gestimation.github.io/cifmodeling/reference/prostate.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Data from a prostate cancer trial in Byer & Green (1980) — prostate","text":"","code":"data(prostate)"},{"path":"https://gestimation.github.io/cifmodeling/reference/prostate.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Data from a prostate cancer trial in Byer & Green (1980) — prostate","text":"data frame 502 observations 16 variables, including: dtime Follow-time days. status Event status (\"alive\", \"dead - prostatic ca\", \"dead - ca\", \"dead - heart vascular\", \"dead - cerebrovascular\"). rx Treatment assignment diethylstilbestrol (DES) placebo. age Age baseline (years). wt Weight pounds. pf Performance status. hx History cardiovascular disease. sbp Systolic blood pressure. dbp Diastolic blood pressure. ekg Electrocardiogram category. hg Hemoglobin level. sz Size primary tumor. sg Stage/grade disease. ap Serum acid phosphatase. bm Bone metastases indicator. stage Clinical stage. sdate Start date. patno Patient number.","code":""},{"path":"https://gestimation.github.io/cifmodeling/reference/prostate.html","id":"source","dir":"Reference","previous_headings":"","what":"Source","title":"Data from a prostate cancer trial in Byer & Green (1980) — prostate","text":"Byer, D. P. & Green, S. B. (1980), 'Prognostic variables survival randomized comparison treatments prostatic cancer', Bulletin du Cancer 67, 477-488","code":""},{"path":"https://gestimation.github.io/cifmodeling/reference/prostate.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Data from a prostate cancer trial in Byer & Green (1980) — prostate","text":"dataset records follow-cause death together treatment assignment baseline characteristics. used package documentation illustrate stratified cumulative incidence analyses.","code":""},{"path":"https://gestimation.github.io/cifmodeling/reference/prostate.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Data from a prostate cancer trial in Byer & Green (1980) — prostate","text":"","code":"data(prostate) head(prostate) #>   patno stage              rx dtime                 status age  wt #> 1     1     3 0.2 mg estrogen    72                  alive  75  76 #> 2     2     3 0.2 mg estrogen     1        dead - other ca  54 116 #> 3     3     3 5.0 mg estrogen    40 dead - cerebrovascular  69 102 #> 4     4     3 0.2 mg estrogen    20 dead - cerebrovascular  75  94 #> 5     5     3         placebo    65                  alive  67  99 #> 6     6     3 0.2 mg estrogen    24    dead - prostatic ca  71  98 #>                     pf hx sbp dbp                           ekg       hg sz sg #> 1      normal activity  0  15   9                  heart strain 13.79883  2  8 #> 2      normal activity  0  13   7 heart block or conduction def 14.59961 42 NA #> 3      normal activity  1  14   8                  heart strain 13.39844  3  9 #> 4 in bed < 50% daytime  1  14   7                        benign 17.59766  4  8 #> 5      normal activity  0  17  10                        normal 13.39844 34  8 #> 6      normal activity  0  19  10                        normal 15.09961 10 11 #>          ap bm      sdate #> 1 0.2999878  0 1977-08-10 #> 2 0.6999512  0 1977-09-21 #> 3 0.2999878  0 1978-01-12 #> 4 0.8999023  0 1978-03-19 #> 5 0.5000000  0 1978-03-22 #> 6 0.5999756  0 1978-06-14"},{"path":"https://gestimation.github.io/cifmodeling/news/index.html","id":"cifmodeling-080","dir":"Changelog","previous_headings":"","what":"cifmodeling 0.8.0","title":"cifmodeling 0.8.0","text":"Breaking change: cifplot() cifpanel() now return structured objects explicit plot/list.plot patchwork elements, metadata, printing handled via new S3 methods. Automatic printing limited interactive sessions, panel outputs store engine metadata print.info$engine. Standardized outcome.type canonical values lowercase; legacy uppercase short aliases remain accepted. Internals now use tolower().","code":""},{"path":[]},{"path":"https://gestimation.github.io/cifmodeling/news/index.html","id":"cifmodeling-040","dir":"Changelog","previous_headings":"","what":"cifmodeling 0.4.0","title":"cifmodeling 0.4.0","text":"order.strata now applied via discrete scale limits legend fill ordering remain stable, including printEachVar = TRUE. Numeric stratification variables coerced factors fewer nine unique values split median (/median) nine unique values. cifplot(printEachEvent = TRUE) keeps event-specific ggplot objects attr(x, \"plots\") returning combined panel. Default y-axis labels consistently use “Survival” survival outcomes “Cumulative incidence” phrasing competing-risk outcomes.","code":""},{"path":[]},{"path":"https://gestimation.github.io/cifmodeling/news/index.html","id":"cifmodeling-010","dir":"Changelog","previous_headings":"","what":"cifmodeling 0.1.0","title":"cifmodeling 0.1.0","text":"Initial CRAN submission.","code":""}]
