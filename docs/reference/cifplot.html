<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Generate a survival/CIF curve with marks that represent censoring, competing risks and intercurrent events — cifplot • cifmodeling</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Generate a survival/CIF curve with marks that represent censoring, competing risks and intercurrent events — cifplot"><meta name="description" content="This function generates a survival or CIF curve from a unified formula–data
interface or from an existing survfit object. When a formula is supplied,
the LHS is typically Event() or survivai::Surv(), and the RHS specifies
an optional stratification variable. In addition to the curves themselves,
cifplot() can add numbers-at-risk tables, tables of point estimates and
CIs, censoring marks, competing-risk marks, and intercurrent-event marks.
For more complex multi-panel displays, cifplot() can internally call
cifpanel() via several “panel modes” (per event, per variable, or
censoring-focused). The function returns an object whose plot component
is a regular ggplot object that can be further modified (compatible with + and %+%)."><meta property="og:description" content="This function generates a survival or CIF curve from a unified formula–data
interface or from an existing survfit object. When a formula is supplied,
the LHS is typically Event() or survivai::Surv(), and the RHS specifies
an optional stratification variable. In addition to the curves themselves,
cifplot() can add numbers-at-risk tables, tables of point estimates and
CIs, censoring marks, competing-risk marks, and intercurrent-event marks.
For more complex multi-panel displays, cifplot() can internally call
cifpanel() via several “panel modes” (per event, per variable, or
censoring-focused). The function returns an object whose plot component
is a regular ggplot object that can be further modified (compatible with + and %+%)."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">cifmodeling</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.8.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/overview.html">Overview</a></li>
    <li><a class="dropdown-item" href="../articles/polyreg.html">Direct polytomous regression</a></li>
    <li><a class="dropdown-item" href="../articles/formulas.html">Computational formulas in cifcurve()</a></li>
    <li><a class="dropdown-item" href="../articles/examples.html">Examples</a></li>
    <li><a class="dropdown-item" href="../articles/gallery.html">Gallery</a></li>
    <li><a class="dropdown-item" href="../articles/information.html">Additional information</a></li>
    <li><a class="dropdown-item" href="../articles/arguments.html">Full lists of arguments</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/gestimation/cifmodeling" aria-label="GitHub repository"><span class="fa fa-github"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Generate a survival/CIF curve with marks that represent censoring, competing risks and intercurrent events</h1>
      <small class="dont-index">Source: <a href="https://github.com/gestimation/cifmodeling/blob/HEAD/R/cifplot.R" class="external-link"><code>R/cifplot.R</code></a></small>
      <div class="d-none name"><code>cifplot.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function generates a survival or CIF curve from a unified formula–data
interface or from an existing survfit object. When a formula is supplied,
the LHS is typically <code><a href="Event.html">Event()</a></code> or <code>survivai::Surv()</code>, and the RHS specifies
an optional stratification variable. In addition to the curves themselves,
<code>cifplot()</code> can add numbers-at-risk tables, tables of point estimates and
CIs, censoring marks, competing-risk marks, and intercurrent-event marks.</p>
<p>For more complex multi-panel displays, <code>cifplot()</code> can internally call
<code><a href="cifpanel.html">cifpanel()</a></code> via several “panel modes” (per event, per variable, or
censoring-focused). The function returns an object whose <code>plot</code> component
is a regular ggplot object that can be further modified (compatible with <code>+</code> and <code>%+%</code>).</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">cifplot</span><span class="op">(</span></span>
<span>  <span class="va">formula_or_fit</span>,</span>
<span>  data <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  weights <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  subset.condition <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  na.action <span class="op">=</span> <span class="va">na.omit</span>,</span>
<span>  outcome.type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"competing-risk"</span>, <span class="st">"survival"</span><span class="op">)</span>,</span>
<span>  code.event1 <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  code.event2 <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  code.censoring <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  code.events <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  error <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  conf.type <span class="op">=</span> <span class="st">"arcsine-square root"</span>,</span>
<span>  conf.int <span class="op">=</span> <span class="fl">0.95</span>,</span>
<span>  type.y <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  label.x <span class="op">=</span> <span class="st">"Time"</span>,</span>
<span>  label.y <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  label.strata <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  level.strata <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  order.strata <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  limits.x <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  limits.y <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  breaks.x <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  breaks.y <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  use.coord.cartesian <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  add.conf <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  add.risktable <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  add.estimate.table <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  symbol.risk.table <span class="op">=</span> <span class="st">"square"</span>,</span>
<span>  font.size.risk.table <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  add.censor.mark <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  shape.censor.mark <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  size.censor.mark <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  add.competing.risk.mark <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  competing.risk.time <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  shape.competing.risk.mark <span class="op">=</span> <span class="fl">16</span>,</span>
<span>  size.competing.risk.mark <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  add.intercurrent.event.mark <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  intercurrent.event.time <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  shape.intercurrent.event.mark <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  size.intercurrent.event.mark <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  add.quantile <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  level.quantile <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>  panel.per.event <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  panel.censoring <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  panel.per.variable <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  panel.mode <span class="op">=</span> <span class="st">"auto"</span>,</span>
<span>  rows.columns.panel <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  style <span class="op">=</span> <span class="st">"classic"</span>,</span>
<span>  palette <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  linewidth <span class="op">=</span> <span class="fl">0.8</span>,</span>
<span>  linetype <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  font.family <span class="op">=</span> <span class="st">"sans"</span>,</span>
<span>  font.size <span class="op">=</span> <span class="fl">12</span>,</span>
<span>  legend.position <span class="op">=</span> <span class="st">"top"</span>,</span>
<span>  print.panel <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  filename.ggsave <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  width.ggsave <span class="op">=</span> <span class="fl">6</span>,</span>
<span>  height.ggsave <span class="op">=</span> <span class="fl">6</span>,</span>
<span>  dpi.ggsave <span class="op">=</span> <span class="fl">300</span>,</span>
<span>  survfit.info <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  axis.info <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  visual.info <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  panel.info <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  style.info <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  inset.info <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  print.info <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  ggsave.info <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-formula-or-fit">formula_or_fit<a class="anchor" aria-label="anchor" href="#arg-formula-or-fit"></a></dt>
<dd><p>Either a model formula or a survfit object. When a formula is
supplied, the LHS must be <code>Event(time, status)</code> or <code>Surv(time, status)</code>.
The RHS specifies an optional stratification variable.</p></dd>


<dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>A data frame containing variables in the formula.</p></dd>


<dt id="arg-weights">weights<a class="anchor" aria-label="anchor" href="#arg-weights"></a></dt>
<dd><p>Optional name of the weight variable in <code>data</code>. Weights must be nonnegative.</p></dd>


<dt id="arg-subset-condition">subset.condition<a class="anchor" aria-label="anchor" href="#arg-subset-condition"></a></dt>
<dd><p>Optional character string giving a logical condition to subset
<code>data</code> (default <code>NULL</code>).</p></dd>


<dt id="arg-na-action">na.action<a class="anchor" aria-label="anchor" href="#arg-na-action"></a></dt>
<dd><p>A function specifying the action to take on missing values (default <code>na.omit</code>).</p></dd>


<dt id="arg-outcome-type">outcome.type<a class="anchor" aria-label="anchor" href="#arg-outcome-type"></a></dt>
<dd><p>Character string specifying the type of time-to-event outcome.
One of <code>"survival"</code> (Kaplan-Meier) or <code>"competing-risk"</code> (Aalen-Johansen).
If <code>NULL</code> (default), the function automatically infers the outcome type from the data:
if the event variable has more than two unique levels, <code>"competing-risk"</code> is assumed;
otherwise, <code>"survival"</code> is used. You can also use abbreviations such as <code>"S"</code> or <code>"C"</code>.
Mixed or ambiguous inputs (e.g., <code>c("S", "C")</code>) trigger automatic detection based on the event coding.</p></dd>


<dt id="arg-code-event-">code.event1<a class="anchor" aria-label="anchor" href="#arg-code-event-"></a></dt>
<dd><p>Integer code of the event of interest (default <code>1</code>).</p></dd>


<dt id="arg-code-event-">code.event2<a class="anchor" aria-label="anchor" href="#arg-code-event-"></a></dt>
<dd><p>Integer code of the competing risk (default <code>2</code>).</p></dd>


<dt id="arg-code-censoring">code.censoring<a class="anchor" aria-label="anchor" href="#arg-code-censoring"></a></dt>
<dd><p>Integer code of censoring (default <code>0</code>).</p></dd>


<dt id="arg-code-events">code.events<a class="anchor" aria-label="anchor" href="#arg-code-events"></a></dt>
<dd><p>Optional numeric length-3 vector <code>c(event1, event2, censoring)</code>.
When supplied, it overrides <code>code.event1</code>, <code>code.event2</code>, and <code>code.censoring</code>
(primarily used when <code><a href="cifpanel.html">cifpanel()</a></code> is called or when <code>panel.per.event = TRUE</code>).</p></dd>


<dt id="arg-error">error<a class="anchor" aria-label="anchor" href="#arg-error"></a></dt>
<dd><p>Character string specifying the method for SEs and CIs used internally.
For <code>"survival"</code> without weights, choose one of <code>"greenwood"</code> (default), <code>"tsiatis"</code>, or <code>"if"</code>.
For <code>"competing-risk"</code> without weights, choose one of <code>"delta"</code> (default), <code>"aalen"</code>, or <code>"if"</code>.
SEs and CIs based on influence functions (<code>"if"</code>) is recommended for weighted analysis.</p></dd>


<dt id="arg-conf-type">conf.type<a class="anchor" aria-label="anchor" href="#arg-conf-type"></a></dt>
<dd><p>Character specifying the method of transformation for CIs
used internally (default <code>arcsine-square root</code>).</p></dd>


<dt id="arg-conf-int">conf.int<a class="anchor" aria-label="anchor" href="#arg-conf-int"></a></dt>
<dd><p>Numeric two-sided level of CIs (default <code>0.95</code>).</p></dd>


<dt id="arg-type-y">type.y<a class="anchor" aria-label="anchor" href="#arg-type-y"></a></dt>
<dd><p>Character string specifying the y-scale. For survival/CIF curves,
<code>"surv"</code> implies survival probabilities and <code>"risk"</code> implies CIF
(1-survival in simple survival settings). Specify <code>"cumhaz"</code> to plot cumulative hazard
or <code>"cloglog"</code> to generate a complementary log-log plot.
If <code>NULL</code>, a default is chosen from <code>outcome.type</code> or the survfit object.</p></dd>


<dt id="arg-label-x">label.x<a class="anchor" aria-label="anchor" href="#arg-label-x"></a></dt>
<dd><p>Character x-axis label (default <code>"Time"</code>).</p></dd>


<dt id="arg-label-y">label.y<a class="anchor" aria-label="anchor" href="#arg-label-y"></a></dt>
<dd><p>Character y-axis label (default is chosen automatically from <code>outcome.type</code>
and <code>type.y</code>, e.g. "Survival", "Cumulative incidence" or "Cumulative hazard").</p></dd>


<dt id="arg-label-strata">label.strata<a class="anchor" aria-label="anchor" href="#arg-label-strata"></a></dt>
<dd><p>Character vector or named character vector specifying labels for strata.
Names (if present) must match the (re-ordered) underlying strata levels.
<strong>Note:</strong> when any of the panel modes is active
(<code>panel.per.variable = TRUE</code>, <code>panel.per.event = TRUE</code>, <code>panel.censoring = TRUE</code>,
or <code>panel.mode = "auto"</code> and it actually dispatches to a panel),
strata labels are suppressed to avoid duplicated legends across sub-plots.</p></dd>


<dt id="arg-level-strata">level.strata<a class="anchor" aria-label="anchor" href="#arg-level-strata"></a></dt>
<dd><p>Optional character vector giving the full set of expected strata levels.
When provided, both <code>order.strata</code> and <code>label.strata</code> are validated against it
before application.</p></dd>


<dt id="arg-order-strata">order.strata<a class="anchor" aria-label="anchor" href="#arg-order-strata"></a></dt>
<dd><p>Optional character vector specifying the display order of strata
in the legend/number-at-risk table. Specify the levels of strata. Levels not listed are dropped.</p></dd>


<dt id="arg-limits-x">limits.x<a class="anchor" aria-label="anchor" href="#arg-limits-x"></a></dt>
<dd><p>Numeric length-2 vector specifying x-axis limits. If <code>NULL</code>, it is
set from the fitted object (typically <code>c(0, max(time))</code>).</p></dd>


<dt id="arg-limits-y">limits.y<a class="anchor" aria-label="anchor" href="#arg-limits-y"></a></dt>
<dd><p>Numeric length-2 vector specifying y-axis limits. If <code>NULL</code>, it is
set to <code>c(0, 1)</code> for probability-type outcomes.</p></dd>


<dt id="arg-breaks-x">breaks.x<a class="anchor" aria-label="anchor" href="#arg-breaks-x"></a></dt>
<dd><p>Numeric vector of x-axis breaks (default <code>NULL</code>).</p></dd>


<dt id="arg-breaks-y">breaks.y<a class="anchor" aria-label="anchor" href="#arg-breaks-y"></a></dt>
<dd><p>Numeric vector of y-axis breaks (default <code>NULL</code>).</p></dd>


<dt id="arg-use-coord-cartesian">use.coord.cartesian<a class="anchor" aria-label="anchor" href="#arg-use-coord-cartesian"></a></dt>
<dd><p>Logical; if <code>TRUE</code>, uses <code><a href="https://ggplot2.tidyverse.org/reference/coord_cartesian.html" class="external-link">ggplot2::coord_cartesian()</a></code> for zooming
instead of changing the scale limits (default <code>FALSE</code>).</p></dd>


<dt id="arg-add-conf">add.conf<a class="anchor" aria-label="anchor" href="#arg-add-conf"></a></dt>
<dd><p>Logical; if <code>TRUE</code>, adds a CI ribbon
(via <code><a href="http://www.danieldsjoberg.com/ggsurvfit/reference/add_confidence_interval.html" class="external-link">ggsurvfit::add_confidence_interval()</a></code>). Default <code>TRUE</code>.</p></dd>


<dt id="arg-add-risktable">add.risktable<a class="anchor" aria-label="anchor" href="#arg-add-risktable"></a></dt>
<dd><p>Logical; if <code>TRUE</code>, adds a numbers-at-risk table under the plot.
Default <code>TRUE</code>. <strong>Note:</strong> when a panel mode is active, tables are suppressed.</p></dd>


<dt id="arg-add-estimate-table">add.estimate.table<a class="anchor" aria-label="anchor" href="#arg-add-estimate-table"></a></dt>
<dd><p>Logical; if <code>TRUE</code>, adds a table of estimates and CIs.
Default <code>FALSE</code>. <strong>Note:</strong> when a panel mode is active, tables are suppressed.</p></dd>


<dt id="arg-symbol-risk-table">symbol.risk.table<a class="anchor" aria-label="anchor" href="#arg-symbol-risk-table"></a></dt>
<dd><p>Character specifying the symbol used in the risk table to denote
strata: <code>"square"</code>, <code>"circle"</code>, or <code>"triangle"</code> (default <code>"square"</code>).</p></dd>


<dt id="arg-font-size-risk-table">font.size.risk.table<a class="anchor" aria-label="anchor" href="#arg-font-size-risk-table"></a></dt>
<dd><p>Numeric font size for texts in risk / estimate tables (default <code>3</code>).</p></dd>


<dt id="arg-add-censor-mark">add.censor.mark<a class="anchor" aria-label="anchor" href="#arg-add-censor-mark"></a></dt>
<dd><p>Logical; if <code>TRUE</code>, draws censoring marks on each curve
(via <code><a href="http://www.danieldsjoberg.com/ggsurvfit/reference/add_censor_mark.html" class="external-link">ggsurvfit::add_censor_mark()</a></code>). Default <code>TRUE</code>.</p></dd>


<dt id="arg-shape-censor-mark">shape.censor.mark<a class="anchor" aria-label="anchor" href="#arg-shape-censor-mark"></a></dt>
<dd><p>Integer point shape used for censoring marks (default <code>3</code>).</p></dd>


<dt id="arg-size-censor-mark">size.censor.mark<a class="anchor" aria-label="anchor" href="#arg-size-censor-mark"></a></dt>
<dd><p>Numeric point size used for censoring marks (default <code>2</code>).</p></dd>


<dt id="arg-add-competing-risk-mark">add.competing.risk.mark<a class="anchor" aria-label="anchor" href="#arg-add-competing-risk-mark"></a></dt>
<dd><p>Logical; if <code>TRUE</code>, draws time marks for the competing event
(event 2). If no times are supplied via <code>competing.risk.time</code>, the function tries to
extract them automatically from the data. Default <code>FALSE</code>.</p></dd>


<dt id="arg-competing-risk-time">competing.risk.time<a class="anchor" aria-label="anchor" href="#arg-competing-risk-time"></a></dt>
<dd><p>A <strong>named list</strong> of numeric vectors. Each name must correspond to a
strata label, and its numeric vector gives the times at which the competing event occurred
in that stratum. Typically left as <code><a href="https://rdrr.io/r/base/list.html" class="external-link">list()</a></code> and filled internally.</p></dd>


<dt id="arg-shape-competing-risk-mark">shape.competing.risk.mark<a class="anchor" aria-label="anchor" href="#arg-shape-competing-risk-mark"></a></dt>
<dd><p>Integer point shape for competing-risk marks (default <code>16</code>).</p></dd>


<dt id="arg-size-competing-risk-mark">size.competing.risk.mark<a class="anchor" aria-label="anchor" href="#arg-size-competing-risk-mark"></a></dt>
<dd><p>Numeric point size for competing-risk marks (default <code>2</code>).</p></dd>


<dt id="arg-add-intercurrent-event-mark">add.intercurrent.event.mark<a class="anchor" aria-label="anchor" href="#arg-add-intercurrent-event-mark"></a></dt>
<dd><p>Logical; if <code>TRUE</code>, overlays user-specified intercurrent-event
times per stratum. Default <code>FALSE</code>.</p></dd>


<dt id="arg-intercurrent-event-time">intercurrent.event.time<a class="anchor" aria-label="anchor" href="#arg-intercurrent-event-time"></a></dt>
<dd><p>A <strong>named list</strong> of numeric vectors for intercurrent events
(names must match strata labels).</p></dd>


<dt id="arg-shape-intercurrent-event-mark">shape.intercurrent.event.mark<a class="anchor" aria-label="anchor" href="#arg-shape-intercurrent-event-mark"></a></dt>
<dd><p>Integer point shape for intercurrent-event marks
(default <code>1</code>).</p></dd>


<dt id="arg-size-intercurrent-event-mark">size.intercurrent.event.mark<a class="anchor" aria-label="anchor" href="#arg-size-intercurrent-event-mark"></a></dt>
<dd><p>Numeric point size for intercurrent-event marks
(default <code>2</code>).</p></dd>


<dt id="arg-add-quantile">add.quantile<a class="anchor" aria-label="anchor" href="#arg-add-quantile"></a></dt>
<dd><p>Logical; if <code>TRUE</code>, adds a quantile reference line (via
<code><a href="http://www.danieldsjoberg.com/ggsurvfit/reference/add_quantile.html" class="external-link">ggsurvfit::add_quantile()</a></code>). Default <code>FALSE</code>.</p></dd>


<dt id="arg-level-quantile">level.quantile<a class="anchor" aria-label="anchor" href="#arg-level-quantile"></a></dt>
<dd><p>Numeric quantile level to be shown (default <code>0.5</code> for the median).</p></dd>


<dt id="arg-panel-per-event">panel.per.event<a class="anchor" aria-label="anchor" href="#arg-panel-per-event"></a></dt>
<dd><p>Logical. <strong>Explicit panel mode.</strong> If <code>TRUE</code> and
<code>outcome.type == "competing-risk"</code>, <code>cifplot()</code> internally calls <code><a href="cifpanel.html">cifpanel()</a></code>
to display two event-specific CIFs side-by-side (event 1 and event 2) using
reversed <code>code.events</code>. Ignored for non-competing-risk outcomes.</p></dd>


<dt id="arg-panel-censoring">panel.censoring<a class="anchor" aria-label="anchor" href="#arg-panel-censoring"></a></dt>
<dd><p>Logical. <strong>Explicit panel mode.</strong> If <code>TRUE</code> and
<code>outcome.type == "survival"</code>, <code>cifplot()</code> internally calls <code><a href="cifpanel.html">cifpanel()</a></code>
to display KM curves for <code>(event, censor)</code> and <code>(censor, event)</code> so that
censoring patterns can be inspected.</p></dd>


<dt id="arg-panel-per-variable">panel.per.variable<a class="anchor" aria-label="anchor" href="#arg-panel-per-variable"></a></dt>
<dd><p>Logical. <strong>Explicit panel mode.</strong> If <code>TRUE</code> and the RHS
of the formula has multiple covariates (e.g. <code>~ a + b + c</code>), the function produces
a panel where each variable in the RHS is used once as the stratification factor.</p></dd>


<dt id="arg-panel-mode">panel.mode<a class="anchor" aria-label="anchor" href="#arg-panel-mode"></a></dt>
<dd><p>Character specifying <strong>Automatic panel mode.</strong> If <code>"auto"</code> and none of
<code>panel.per.variable</code>, <code>panel.per.event</code>, <code>panel.censoring</code> has been set to <code>TRUE</code>,
the function chooses a suitable panel mode automatically:
(i) if the formula RHS has 2+ variables, it behaves like <code>panel.per.variable = TRUE</code>;
(ii) otherwise, if <code>outcome.type == "competing-risk"</code>, it behaves like
<code>panel.per.event = TRUE</code>; (iii) otherwise, if <code>outcome.type == "survival"</code>, it
behaves like <code>panel.censoring = TRUE</code>. If a panel mode is explicitly specified,
<code>panel.mode</code> is ignored.</p></dd>


<dt id="arg-rows-columns-panel">rows.columns.panel<a class="anchor" aria-label="anchor" href="#arg-rows-columns-panel"></a></dt>
<dd><p>Optional integer vector <code>c(nrow, ncol)</code> controlling
the layout of the panel returned by the panel modes. If <code>NULL</code>, an automatic
layout is determined from the number of subplots.</p></dd>


<dt id="arg-style">style<a class="anchor" aria-label="anchor" href="#arg-style"></a></dt>
<dd><p>Character choosing the base plot style: <code>"classic"</code>, <code>"bold"</code>,
<code>"framed"</code>, <code>"grid"</code>, <code>"gray"</code> or <code>"ggsurvfit"</code> (default <code>"classic"</code>).
Abbreviations such as <code>"C"</code>, <code>"B"</code>, <code>"F"</code>, or <code>"G"</code> are also accepted.</p></dd>


<dt id="arg-palette">palette<a class="anchor" aria-label="anchor" href="#arg-palette"></a></dt>
<dd><p>Optional character vector specifying the color palette to use across strata.</p></dd>


<dt id="arg-linewidth">linewidth<a class="anchor" aria-label="anchor" href="#arg-linewidth"></a></dt>
<dd><p>Optional numeric specifying the line width of curve (default <code>0.8</code>).</p></dd>


<dt id="arg-linetype">linetype<a class="anchor" aria-label="anchor" href="#arg-linetype"></a></dt>
<dd><p>Optional logical using different line types of curve (default <code>FALSE</code>).</p></dd>


<dt id="arg-font-family">font.family<a class="anchor" aria-label="anchor" href="#arg-font-family"></a></dt>
<dd><p>Character specifying the font family: <code>"sans"</code>,  <code>"serif"</code>, or
<code>"mono"</code> (default <code>"sans"</code>).</p></dd>


<dt id="arg-font-size">font.size<a class="anchor" aria-label="anchor" href="#arg-font-size"></a></dt>
<dd><p>Integer specifying the base font size (default <code>12</code>).</p></dd>


<dt id="arg-legend-position">legend.position<a class="anchor" aria-label="anchor" href="#arg-legend-position"></a></dt>
<dd><p>Character specifying the legend position:
<code>"top"</code>, <code>"right"</code>, <code>"bottom"</code>, <code>"left"</code>, or <code>"none"</code> (default <code>"top"</code>).</p></dd>


<dt id="arg-print-panel">print.panel<a class="anchor" aria-label="anchor" href="#arg-print-panel"></a></dt>
<dd><p>Logical. When <code>TRUE</code>, panel displays created internally are
printed automatically in interactive sessions; otherwise they are returned
invisibly for further modification (default <code>FALSE</code>).</p></dd>


<dt id="arg-filename-ggsave">filename.ggsave<a class="anchor" aria-label="anchor" href="#arg-filename-ggsave"></a></dt>
<dd><p>Character; if non-<code>NULL</code>, save the plot to this file.</p></dd>


<dt id="arg-width-ggsave">width.ggsave<a class="anchor" aria-label="anchor" href="#arg-width-ggsave"></a></dt>
<dd><p>Numeric width passed to <code><a href="https://ggplot2.tidyverse.org/reference/ggsave.html" class="external-link">ggplot2::ggsave()</a></code> (default <code>6</code>).</p></dd>


<dt id="arg-height-ggsave">height.ggsave<a class="anchor" aria-label="anchor" href="#arg-height-ggsave"></a></dt>
<dd><p>Numeric height passed to <code><a href="https://ggplot2.tidyverse.org/reference/ggsave.html" class="external-link">ggplot2::ggsave()</a></code> (default <code>6</code>).</p></dd>


<dt id="arg-dpi-ggsave">dpi.ggsave<a class="anchor" aria-label="anchor" href="#arg-dpi-ggsave"></a></dt>
<dd><p>Numeric DPI passed to <code><a href="https://ggplot2.tidyverse.org/reference/ggsave.html" class="external-link">ggplot2::ggsave()</a></code> (default <code>300</code>).</p></dd>


<dt id="arg-survfit-info-axis-info-visual-info-panel-info-style-info-print-info-ggsave-info">survfit.info, axis.info, visual.info, panel.info, style.info, print.info, ggsave.info<a class="anchor" aria-label="anchor" href="#arg-survfit-info-axis-info-visual-info-panel-info-style-info-print-info-ggsave-info"></a></dt>
<dd><p>Internal lists used for programmatic control. Not intended for direct user input.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A <code>"cifplot"</code> object (a list) with at least the following elements:</p><ul><li><p><code>plot</code>: a ggplot object containing the main plot</p></li>
<li><p><code>patchwork</code>: reserved for compatibility with panel displays
(typically <code>NULL</code> for single-panel plots)</p></li>
<li><p><code>survfit.info</code>, <code>axis.info</code>, <code>visual.info</code>, <code>panel.info</code>,
<code>style.info</code>, <code>inset.info</code>, <code>print.info</code>, <code>ggsave.info</code>:
internal lists storing the fitted curves and display settings</p></li>
<li><p><code>version</code>: a character string giving the cifmodeling version used</p></li>
<li><p><code>call</code>: the original function call</p></li>
</ul><p>The object is returned invisibly. When a panel mode is active and
<code>print.panel = TRUE</code>, the panel is also printed in interactive sessions.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>

<div class="section">
<h3 id="typical-use-cases">Typical use cases<a class="anchor" aria-label="anchor" href="#typical-use-cases"></a></h3>

<ul><li><p>Draw one survival/CIF curve set by exposure groups (e.g., treatment vs control).</p></li>
<li><p>Call <code><a href="cifpanel.html">cifpanel()</a></code> with a simplified code to create a panel displaying plots of multiple stratified survival/CIF curves or CIF curves for each event type.</p></li>
<li><p>Add CIs and censor/competing-risk/intercurrent-event marks.</p></li>
<li><p>Add number-at-risk table to display the number at risk or the estimated survival probabilities or CIFs and CIs at each point in time.</p></li>
</ul></div>

<div class="section">
<h3 id="key-arguments-shared-with-cifcurve-">Key arguments shared with cifcurve()<a class="anchor" aria-label="anchor" href="#key-arguments-shared-with-cifcurve-"></a></h3>

<ul><li><p><strong>Outcome type and estimator</strong></p><ul><li><p><code>outcome.type = "survival"</code>: Kaplan-Meier estimator</p></li>
<li><p><code>outcome.type = "competing-risk"</code>: Aalen-Johansen estimator</p></li>
</ul></li>
<li><p><strong>Confidence intervals</strong></p><ul><li><p><code>conf.int</code> sets the two-sided level (default 0.95)</p></li>
<li><p><code>conf.type</code> chooses the transformation (<code>"arcsine-square root"</code>, <code>"plain"</code>, <code>"log"</code>, <code>"log-log"</code>, <code>"logit"</code>, or <code>"none"</code>)</p></li>
<li><p><code>error</code> chooses the estimator for SE (<code>"greenwood"</code>, <code>"tsiatis"</code> or <code>"if"</code> for survival curves and <code>"delta"</code>, <code>"aalen"</code> or <code>"if"</code> for CIFs)</p></li>
</ul></li>
</ul></div>

<div class="section">
<h3 id="key-arguments-for-cifplot-">Key arguments for cifplot()<a class="anchor" aria-label="anchor" href="#key-arguments-for-cifplot-"></a></h3>

<ul><li><p><strong>Data visualization</strong></p><ul><li><p><code>add.conf</code> adds CIs on the ggplot2-based plot</p></li>
<li><p><code>add.competing.risk.mark</code> and <code>add.intercurrent.event.mark</code> adds symbols to describe competing risks or intercurrent events in addition to conventional censoring marks with <code>add.censor.mark</code></p></li>
<li><p><code>add.risktable</code> adds numbers at risk</p></li>
<li><p><code>add.estimate.table</code> adds time-by-time estimates and CIs</p></li>
<li><p><code>add.quantile</code> adds a reference line at a chosen quantile level</p></li>
</ul></li>
<li><p><strong>Plot customization</strong></p><ul><li><p><code>type.y</code> chooses y-axis (<code>"surv"</code> for survival and <code>"risk"</code> for 1-survival/CIF)</p></li>
<li><p><code>limits.x</code>, <code>limits.y</code>, <code>breaks.x</code>, <code>breaks.y</code>: numeric vectors for axis control</p></li>
<li><p><code>style</code> specifies the appearance of plot (<code>"classic"</code>, <code>"bold"</code>, <code>"framed"</code>, <code>"grid"</code>, <code>"gray"</code> or <code>"ggsurvfit"</code>)</p></li>
<li><p><code>palette</code> specifies color of each curve (e.g. <code>palette=c("blue1", "cyan3", "navy", "deepskyblue3"))</code>)</p></li>
</ul></li>
<li><p><strong>Panel display</strong></p><ul><li><p><code>panel.per.variable</code> produces multiple survival/CIF curves per stratification variable specified in the formula</p></li>
<li><p><code>panel.per.event</code> produces CIF curves for each event type</p></li>
<li><p><code>panel.censoring</code> produces the Kaplan–Meier curves for (event, censor) and (censor, event) so that censoring patterns can be inspected</p></li>
<li><p><code>panel.mode</code> uses automatic panel mode</p></li>
</ul></li>
</ul><p>When <code>panel.per.event = TRUE</code>, two panels are created with
<code>code.events = list(c(e1, e2, c), c(e2, e1, c))</code>, where
<code>code.events = c(e1, e2, c)</code> is the input coding for event1, event2, and censoring.
Common legend is collected by default (<code>legend.collect = TRUE</code>).</p>
<p>Numeric stratification variables are normalized automatically. Columns with
fewer than nine distinct numeric values are coerced to factors; columns with
nine or more distinct numeric values are split at the median into
“Below median” and “Above median” strata.</p>
</div>

<div class="section">
<h3 id="advanced-control-not-required-for-typical-use">Advanced control not required for typical use<a class="anchor" aria-label="anchor" href="#advanced-control-not-required-for-typical-use"></a></h3>


<p>The arguments below fine-tune internal estimation and figure appearance.
<strong>Most users do not need to change these defaults.</strong></p><div class="section">
<h4 id="graphical-layers">Graphical layers<a class="anchor" aria-label="anchor" href="#graphical-layers"></a></h4>
<table class="table table"><tr><td>Argument</td><td>Description</td><td>Default</td></tr><tr><td><code>add.conf</code></td><td>Add confidence interval ribbon.</td><td><code>TRUE</code></td></tr><tr><td><code>add.risktable</code></td><td>Add numbers-at-risk table below the plot.</td><td><code>TRUE</code></td></tr><tr><td><code>add.estimate.table</code></td><td>Add estimates and confidence intervals table.</td><td><code>FALSE</code></td></tr><tr><td><code>symbol.risk.table</code></td><td>Symbol for strata in risk / estimate tables</td><td><code>"square"</code></td></tr><tr><td><code>font.size.risk.table</code></td><td>Font size for texts in risk / estimate tables</td><td><code>3</code></td></tr><tr><td><code>add.censor.mark</code></td><td>Add censoring marks.</td><td><code>TRUE</code></td></tr><tr><td><code>add.competing.risk.mark</code></td><td>Add marks for event2 of "competing-risk" outcome.</td><td><code>FALSE</code></td></tr><tr><td><code>add.intercurrent.event.mark</code></td><td>Add intercurrent event marks at user-specified times.</td><td><code>FALSE</code></td></tr><tr><td><code>add.quantile</code></td><td>Add quantile reference lines.</td><td><code>FALSE</code></td></tr><tr><td><code>level.quantile</code></td><td>Quantile level for <code>add.quantile</code>.</td><td><code>0.5</code></td></tr></table></div>

<div class="section">
<h4 id="time-for-marks">Time for marks<a class="anchor" aria-label="anchor" href="#time-for-marks"></a></h4>
<table class="table table"><tr><td>Argument</td><td>Description</td></tr><tr><td><code>competing.risk.time</code></td><td><strong>Named list</strong> of numeric vectors that contains times of competing risks. Names must match strata labels. Typically created internally</td></tr><tr><td><code>intercurrent.event.time</code></td><td><strong>Named list</strong> of numeric vectors that contains times of intercurrent events. Names must match strata labels. Typically created by <code><a href="extract_time_to_event.html">extract_time_to_event()</a></code>.</td></tr></table></div>

<div class="section">
<h4 id="appearance-of-marks">Appearance of marks<a class="anchor" aria-label="anchor" href="#appearance-of-marks"></a></h4>
<table class="table table"><tr><td>Argument</td><td>Applies to</td><td>Default</td></tr><tr><td><code>shape.censor.mark</code></td><td>Censoring marks</td><td><code>3</code> (cross)</td></tr><tr><td><code>size.censor.mark</code></td><td>Censoring marks</td><td><code>2</code></td></tr><tr><td><code>shape.competing.risk.mark</code></td><td>Competing-risk marks</td><td><code>16</code> (filled circle)</td></tr><tr><td><code>size.competing.risk.mark</code></td><td>Competing-risk marks</td><td><code>2</code></td></tr><tr><td><code>shape.intercurrent.event.mark</code></td><td>Intercurrent marks</td><td><code>1</code> (circle)</td></tr><tr><td><code>size.intercurrent.event.mark</code></td><td>Intercurrent marks</td><td><code>2</code></td></tr></table></div>

<div class="section">
<h4 id="panel-display">Panel display<a class="anchor" aria-label="anchor" href="#panel-display"></a></h4>
<table class="table table"><tr><td>Argument</td><td>Description</td></tr><tr><td><code>panel.per.variable</code></td><td>One panel per stratification variable</td></tr><tr><td><code>panel.per.event</code></td><td>For <code>"competing-risk"</code>, show CIFs of event 1 and event 2</td></tr><tr><td><code>panel.censoring</code></td><td>For survival, show (event, censor) vs (censor, event)</td></tr><tr><td><code>panel.mode</code> with 2+ stratification variables</td><td>Behave like <code>panel.per.variable</code></td></tr><tr><td><code>panel.mode</code> with outcome.type = "competing-risk"</td><td>Behave like <code>panel.per.event</code></td></tr><tr><td><code>panel.mode</code> with outcome.type = "survival"</td><td>Behave like <code>panel.censoring</code></td></tr></table></div>

<div class="section">
<h4 id="axes-and-legend">Axes and legend<a class="anchor" aria-label="anchor" href="#axes-and-legend"></a></h4>
<table class="table table"><tr><td>Argument</td><td>Description</td><td>Default</td></tr><tr><td><code>limits.x</code>, <code>limits.y</code></td><td>Axis limits (<code>c(min, max)</code>)</td><td>Auto</td></tr><tr><td><code>breaks.x</code>, <code>breaks.y</code></td><td>Tick breaks for x and y axes</td><td>Auto</td></tr><tr><td><code>use.coord.cartesian</code></td><td>For zooming use <code>coord_cartesian()</code></td><td><code>FALSE</code></td></tr><tr><td><code>legend.position</code></td><td><code>"top"</code>, <code>"right"</code>, <code>"bottom"</code>, <code>"left"</code>, <code>"none"</code></td><td><code>"top"</code></td></tr></table></div>

<div class="section">
<h4 id="export">Export<a class="anchor" aria-label="anchor" href="#export"></a></h4>
<table class="table table"><tr><td>Argument</td><td>Description</td><td>Default</td></tr><tr><td><code>filename.ggsave</code></td><td>If non-<code>NULL</code>, save the plot using <code>ggsave()</code></td><td><code>NULL</code></td></tr><tr><td><code>width.ggsave</code></td><td>Size passed to <code>ggsave()</code></td><td><code>6</code></td></tr><tr><td><code>height.ggsave</code></td><td>Size passed to <code>ggsave()</code></td><td><code>6</code></td></tr><tr><td><code>dpi.ggsave</code></td><td>DPI passed to <code>ggsave()</code></td><td><code>300</code></td></tr></table><p><strong>Notes</strong></p><ul><li><p>For CIF displays, set <code>type.y = "risk"</code>. For survival scale, use <code>type.y = NULL</code> or <code>= "surv"</code>.
For a cumulative hazard plot, use <code>type.y = "cumhaz"</code>. To generate a log-log plot, use <code>type.y = "cloglog"</code>.</p></li>
<li><p>Event coding can be controlled via <code>code.event1</code>, <code>code.event2</code>, <code>code.censoring</code>.
For ADaM-style data, use <code>code.event1 = 0</code>, <code>code.censoring = 1</code>.</p></li>
<li><p>Per-stratum time lists should have names identical to plotted strata labels.</p></li>
</ul></div>


</div>

    </div>
    <div class="section level2">
    <h2 id="lifecycle">Lifecycle<a class="anchor" aria-label="anchor" href="#lifecycle"></a></h2>


<p><a href="https://lifecycle.r-lib.org/articles/stages.html#stable" class="external-link"><img src="figures/lifecycle-stable.svg" alt="[Stable]"></a></p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="polyreg.html">polyreg()</a></code> for log-odds product modeling of CIFs; <code><a href="cifcurve.html">cifcurve()</a></code> for KM/AJ estimators; <code><a href="cifpanel.html">cifpanel()</a></code> for display of multiple CIFs; <a href="http://www.danieldsjoberg.com/ggsurvfit/reference/ggsurvfit.html" class="external-link">ggsurvfit::ggsurvfit</a>, <a href="https://patchwork.data-imaginist.com/reference/patchwork-package.html" class="external-link">patchwork::patchwork</a> and <a href="https://modelsummary.com/man/modelsummary.html" class="external-link">modelsummary::modelsummary</a> for display helpers.</p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">diabetes.complications</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">cifplot</span><span class="op">(</span><span class="fu"><a href="Event.html">Event</a></span><span class="op">(</span><span class="va">t</span>,<span class="va">epsilon</span><span class="op">)</span> <span class="op">~</span> <span class="va">fruitq</span>,</span></span>
<span class="r-in"><span>        data <span class="op">=</span> <span class="va">diabetes.complications</span>,</span></span>
<span class="r-in"><span>        outcome.type<span class="op">=</span><span class="st">"competing-risk"</span>,</span></span>
<span class="r-in"><span>        add.risktable <span class="op">=</span> <span class="cn">FALSE</span>,</span></span>
<span class="r-in"><span>        label.y<span class="op">=</span><span class="st">'CIF of diabetic retinopathy'</span>,</span></span>
<span class="r-in"><span>        label.x<span class="op">=</span><span class="st">'Years from registration'</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="cifplot-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Shiro Tanaka.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

