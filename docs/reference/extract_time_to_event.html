<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Extract per-stratum event times from a formula and data — extract_time_to_event • cifmodeling</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Extract per-stratum event times from a formula and data — extract_time_to_event"><meta name="description" content="Creates a list of event times that can be passed to downstream
visualization or analysis functions such as competing.risk.time or
intercurrent.event.time in cifplot() and cifpanel().
Event types are specified by event 1, event 2, censoring, or user-specified codes."><meta property="og:description" content="Creates a list of event times that can be passed to downstream
visualization or analysis functions such as competing.risk.time or
intercurrent.event.time in cifplot() and cifpanel().
Event types are specified by event 1, event 2, censoring, or user-specified codes."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">cifmodeling</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.7.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/01_overview.html">Overview</a></li>
    <li><a class="dropdown-item" href="../articles/02_functions.html">Main functions</a></li>
    <li><a class="dropdown-item" href="../articles/03_polyreg.html">Direct polytomous regression</a></li>
    <li><a class="dropdown-item" href="../articles/04_examples.html">Examples</a></li>
    <li><a class="dropdown-item" href="../articles/05_information.html">Additional information</a></li>
    <li><a class="dropdown-item" href="../articles/06_arguments.html">Full lists of arguments</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/gestimation/cifmodeling" aria-label="GitHub repository"><span class="fa fa-github"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Extract per-stratum event times from a formula and data</h1>
      <small class="dont-index">Source: <a href="https://github.com/gestimation/cifmodeling/blob/HEAD/R/extract_time_to_event.R" class="external-link"><code>R/extract_time_to_event.R</code></a></small>
      <div class="d-none name"><code>extract_time_to_event.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Creates a list of event times that can be passed to downstream
visualization or analysis functions such as <code>competing.risk.time</code> or
<code>intercurrent.event.time</code> in <code><a href="cifplot.html">cifplot()</a></code> and <code><a href="cifpanel.html">cifpanel()</a></code>.
Event types are specified by event 1, event 2, censoring, or user-specified codes.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">extract_time_to_event</span><span class="op">(</span></span>
<span>  <span class="va">formula</span>,</span>
<span>  <span class="va">data</span>,</span>
<span>  subset.condition <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  na.action <span class="op">=</span> <span class="va">na.omit</span>,</span>
<span>  which_event <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"event2"</span>, <span class="st">"event1"</span>, <span class="st">"censor"</span>, <span class="st">"censoring"</span>, <span class="st">"user_specified"</span><span class="op">)</span>,</span>
<span>  code.event1 <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  code.event2 <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  code.censoring <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  user_specified_code <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  readUniqueTime <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  dropEmpty <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-formula">formula<a class="anchor" aria-label="anchor" href="#arg-formula"></a></dt>
<dd><p>A model formula specifying the outcome and (optionally) <code>strata()</code>.</p></dd>


<dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>A data frame containing variables in <code>formula</code>.</p></dd>


<dt id="arg-subset-condition">subset.condition<a class="anchor" aria-label="anchor" href="#arg-subset-condition"></a></dt>
<dd><p>Optional expression (as a character string) defining a
subset of <code>data</code> to analyse. Defaults to <code>NULL</code>.</p></dd>


<dt id="arg-na-action">na.action<a class="anchor" aria-label="anchor" href="#arg-na-action"></a></dt>
<dd><p>Function to handle missing values (default: <code>na.omit</code> in <span class="pkg">stats</span>).</p></dd>


<dt id="arg-which-event">which_event<a class="anchor" aria-label="anchor" href="#arg-which-event"></a></dt>
<dd><p>One of <code>"event1"</code>, <code>"event2"</code>, <code>"censor"</code>,
<code>"censoring"</code>, or <code>"user_specified"</code>, indicating which event type
to extract times for.</p></dd>


<dt id="arg-code-event-code-event-code-censoring">code.event1, code.event2, code.censoring<a class="anchor" aria-label="anchor" href="#arg-code-event-code-event-code-censoring"></a></dt>
<dd><p>Integer codes representing the
event and censoring categories. Defaults are <code>1</code>, <code>2</code>, and
<code>0</code>, respectively.</p></dd>


<dt id="arg-user-specified-code">user_specified_code<a class="anchor" aria-label="anchor" href="#arg-user-specified-code"></a></dt>
<dd><p>When <code>which_event = "user_specified"</code>,
the integer event code to extract (e.g., 3 for an intercurrent event).</p></dd>


<dt id="arg-readuniquetime">readUniqueTime<a class="anchor" aria-label="anchor" href="#arg-readuniquetime"></a></dt>
<dd><p>Logical if <code>TRUE</code>, only unique and sorted time points
are returned for each stratum.</p></dd>


<dt id="arg-dropempty">dropEmpty<a class="anchor" aria-label="anchor" href="#arg-dropempty"></a></dt>
<dd><p>Logical if <code>TRUE</code> (default), strata with no events are
dropped from the returned list. Set to <code>FALSE</code> to retain empty strata
as <code>numeric(0)</code> vectors (useful for diagnostics or consistent list length).</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A named list of numeric vectors, where each element corresponds to a stratum
and contains the event times of the selected type.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This function is typically used internally by plotting and model functions,
but can also be called directly to inspect the per-stratum event-time
structure of a data frame.</p>
    </div>
    <div class="section level2">
    <h2 id="lifecycle">Lifecycle<a class="anchor" aria-label="anchor" href="#lifecycle"></a></h2>


<p><a href="https://lifecycle.r-lib.org/articles/stages.html#stable" class="external-link"><img src="figures/lifecycle-stable.svg" alt="[Stable]"></a></p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="polyreg.html">polyreg()</a></code> for log-odds product modeling of CIFs; <code><a href="cifcurve.html">cifcurve()</a></code> for KM/AJ estimators; <code><a href="cifplot.html">cifplot()</a></code> for display of a CIF; <code><a href="cifpanel.html">cifpanel()</a></code> for display of multiple CIFs; <a href="http://www.danieldsjoberg.com/ggsurvfit/reference/ggsurvfit.html" class="external-link">ggsurvfit::ggsurvfit</a>, <a href="https://patchwork.data-imaginist.com/reference/patchwork-package.html" class="external-link">patchwork::patchwork</a> and <a href="https://modelsummary.com/man/modelsummary.html" class="external-link">modelsummary::modelsummary</a> for display helpers.</p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">diabetes.complications</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">output</span> <span class="op">&lt;-</span> <span class="fu">extract_time_to_event</span><span class="op">(</span><span class="fu"><a href="Event.html">Event</a></span><span class="op">(</span><span class="va">t</span>,<span class="va">epsilon</span><span class="op">)</span> <span class="op">~</span> <span class="va">fruitq</span>,</span></span>
<span class="r-in"><span>                                data <span class="op">=</span> <span class="va">diabetes.complications</span>,</span></span>
<span class="r-in"><span>                                which_event <span class="op">=</span> <span class="st">"event2"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="cifplot.html">cifplot</a></span><span class="op">(</span><span class="fu"><a href="Event.html">Event</a></span><span class="op">(</span><span class="va">t</span>,<span class="va">epsilon</span><span class="op">)</span> <span class="op">~</span> <span class="va">fruitq</span>,</span></span>
<span class="r-in"><span>        data <span class="op">=</span> <span class="va">diabetes.complications</span>,</span></span>
<span class="r-in"><span>        outcome.type<span class="op">=</span><span class="st">"COMPETING-RISK"</span>,</span></span>
<span class="r-in"><span>        add.conf<span class="op">=</span><span class="cn">FALSE</span>,</span></span>
<span class="r-in"><span>        add.risktable<span class="op">=</span><span class="cn">FALSE</span>,</span></span>
<span class="r-in"><span>        add.censor.mark<span class="op">=</span><span class="cn">FALSE</span>,</span></span>
<span class="r-in"><span>        add.competing.risk.mark<span class="op">=</span><span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>        competing.risk.time<span class="op">=</span><span class="va">output</span>,</span></span>
<span class="r-in"><span>        label.y<span class="op">=</span><span class="st">'CIF of diabetic retinopathy'</span>,</span></span>
<span class="r-in"><span>        label.x<span class="op">=</span><span class="st">'Years from registration'</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="extract_time_to_event-1.png" alt="" width="700" height="433"></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Shiro Tanaka.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

